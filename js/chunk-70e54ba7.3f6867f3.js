(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70e54ba7"],{"0067":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("h1",[e._v("资源管理")]),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"资源配置",name:"authResource"}},[a("AuthResourceTable",{ref:"authResourceTable"})],1),a("el-tab-pane",{attrs:{label:"资源组",name:"authGroup"}},[a("AuthGroupTable",{ref:"authGroupTable"})],1)],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[a("el-select",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索资源组","remote-method":e.getGroup,loading:e.loading},model:{value:e.queryParam.groupId,callback:function(t){e.$set(e.queryParam,"groupId",t)},expression:"queryParam.groupId"}},e._l(e.groupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.groupCode,value:e.id}})})),1),a("el-input",{staticStyle:{display:"inline-block","max-width":"200px","margin-left":"5px"},attrs:{placeholder:"资源路径"},model:{value:e.queryParam.resourceName,callback:function(t){e.$set(e.queryParam,"resourceName",t)},expression:"queryParam.resourceName"}}),a("el-select",{staticStyle:{"margin-left":"5px"},attrs:{clearable:"",placeholder:"鉴权"},model:{value:e.queryParam.needAuth,callback:function(t){e.$set(e.queryParam,"needAuth",t)},expression:"queryParam.needAuth"}},e._l(e.authOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.fetchData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.addItem}},[e._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"groupCode",label:"资源组"}}),a("el-table-column",{attrs:{prop:"resourceName",label:"资源路径"}}),a("el-table-column",{attrs:{prop:"comment",label:"描述"}}),a("el-table-column",{attrs:{prop:"needAuth",label:"鉴权"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:0===t.row.needAuth?"success":"danger","disable-transitions":""}},[e._v(e._s(0===t.row.needAuth?"开放":"鉴权")+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:0===t.row.needAuth?"primary":"success",plain:"",size:"mini"},on:{click:function(a){return e.updateItemNeedAuth(t.row)}}},[e._v(e._s(0===t.row.needAuth?"鉴权":"开放")+" ")]),a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.editItem(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.delItem(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}}),a("ResourceDialog",{ref:"resourceDialog",attrs:{formStatus:e.formResourceStatus},on:{closeResourceDialog:e.fetchData}})],1)},i=[],u=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),s=a("5880"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.formStatus.operationType?e.formStatus.addTitle:e.formStatus.updateTitle,visible:e.formStatus.visible},on:{"update:visible":function(t){return e.$set(e.formStatus,"visible",t)}}},[a("el-form",{attrs:{model:e.resourceData}},[a("el-form-item",{attrs:{label:"资源组","label-width":e.formStatus.labelWidth,required:!0}},[a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索资源组","remote-method":e.getGroup,loading:e.loading},model:{value:e.resourceData.groupId,callback:function(t){e.$set(e.resourceData,"groupId",t)},expression:"resourceData.groupId"}},e._l(e.groupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.groupCode,value:e.id}})})),1)],1)],1),a("el-form",{attrs:{model:e.resourceData}},[a("el-form-item",{attrs:{label:"资源路径","label-width":e.formStatus.labelWidth,required:!0}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.resourceData.resourceName,callback:function(t){e.$set(e.resourceData,"resourceName",t)},expression:"resourceData.resourceName"}})],1)],1),a("el-form",{attrs:{model:e.resourceData}},[a("el-form-item",{attrs:{label:"鉴权","label-width":e.formStatus.labelWidth,required:!0}},[a("el-select",{attrs:{placeholder:"是否鉴权"},model:{value:e.resourceData.needAuth,callback:function(t){e.$set(e.resourceData,"needAuth",t)},expression:"resourceData.needAuth"}},e._l(e.needAuthOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form",{attrs:{model:e.resourceData}},[a("el-form-item",{attrs:{label:"描述","label-width":e.formStatus.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.resourceData.comment,callback:function(t){e.$set(e.resourceData,"comment",t)},expression:"resourceData.comment"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formStatus.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveInfo}},[e._v("确定")])],1)],1)},c=[],p=a("7325"),d=a("9bd2");function m(e,t,a,o,r){return Object(d["a"])({url:"/auth/resource/page/query?resourceName="+t+"&groupId="+e+"&needAuth="+a+"&page="+o+"&length="+r,method:"get"})}function f(e){return Object(d["a"])({url:"/auth/resource/add",method:"post",data:e})}function h(e){return Object(d["a"])({url:"/auth/resource/del?id="+e,method:"delete"})}function g(e){return Object(d["a"])({url:"/auth/resource/update",method:"put",data:e})}function b(e){return Object(d["a"])({url:"/auth/resource/updateNeedAuth",method:"put",data:e})}var v={data:function(){return{resourceData:{},groupOptions:[],loading:!1,needAuthOptions:[{value:0,label:"不鉴权"},{value:1,label:"鉴权"}]}},name:"resource-dialog",props:["formStatus"],mounted:function(){},methods:{initData:function(e,t){this.resourceData=e,"[]"===JSON.stringify(t)?this.getGroup(""):this.groupOptions=t},getGroup:function(e){var t=this;Object(p["c"])(e,1,10).then((function(e){t.groupOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},saveInfo:function(){var e=this;setTimeout((function(){var t=Object.assign({},e.resourceData);e.formStatus.operationType?f(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeResourceDialog")})):g(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeResourceDialog")}))}),600)}}},y=v,S=a("2877"),D=function(e){e.options.__source="src/components/opscloud/dialog/ResourceDialog.vue"},O=D,j=Object(S["a"])(y,l,c,!1,null,null,null);"function"===typeof O&&O(j);var w=j.exports;function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(u["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=[{value:-1,label:"全部"},{value:0,label:"开放"},{value:1,label:"鉴权"}],x=[{value:0,label:"不鉴权"},{value:1,label:"鉴权"}],z={name:"AuthGroupTable",data:function(){return{formResourceStatus:{visible:!1,addTitle:"新增资源配置",updateTitle:"更新资源配置",labelWidth:"100px",operationType:!0},tableData:[],loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{groupId:"",groupCode:"",resourceName:"",needAuth:""},authOptions:_,needAuthOptions:x,groupOptions:[]}},computed:k({},Object(s["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData(),this.getGroup("")},components:{ResourceDialog:w},methods:k({},Object(s["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},getGroup:function(e){var t=this;Object(p["c"])(e,1,10).then((function(e){t.groupOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handleDialogCancel:function(e){this.$message({message:"取消保存",type:"warning"}),e()},delItem:function(e){var t=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h(e.id).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},updateItemNeedAuth:function(e){var t=this,a={id:e.id,needAuth:0===e.needAuth?1:0};b(a).then((function(e){t.$message({message:"成功",type:"success"}),t.fetchData()}))},addItem:function(){this.formResourceStatus.operationType=!0,this.formResourceStatus.visible=!0;var e={id:"",groupId:"",resourceName:"",comment:"",needAuth:1};this.$refs.resourceDialog.initData(e,[])},editItem:function(e){var t=Object.assign({},e),a=[];a.push(t.group),this.formResourceStatus.operationType=!1,this.formResourceStatus.visible=!0,this.$refs.resourceDialog.initData(t,a)},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},fetchData:function(){var e=this;this.loading=!0,m(this.queryParam.groupId,this.queryParam.resourceName,this.queryParam.needAuth,this.pagination.currentPage,this.pagination.pageSize).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.loading=!1}))}})},$=z,A=function(e){e.options.__source="src/components/opscloud/table/AuthResourceTable.vue"},C=A,T=Object(S["a"])($,n,i,!1,null,"3930c562",null);"function"===typeof C&&C(T);var R=T.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[a("el-input",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{placeholder:"资源组名称"},model:{value:e.queryParam.groupCode,callback:function(t){e.$set(e.queryParam,"groupCode",t)},expression:"queryParam.groupCode"}}),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.fetchData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.addItem}},[e._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"groupCode",label:"资源组名称"}}),a("el-table-column",{attrs:{prop:"comment",label:"描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateItem(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.delItem(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}}),a("ResourceGroupDialog",{attrs:{formStatus:e.formResourceGroupStatus,formData:e.resourceGroup},on:{closeResourceGroupDialog:e.fetchData}})],1)},I=[],q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.formStatus.operationType?e.formStatus.addTitle:e.formStatus.updateTitle,visible:e.formStatus.visible},on:{"update:visible":function(t){return e.$set(e.formStatus,"visible",t)}}},[a("el-form",{attrs:{model:e.formData}}),a("el-form",{attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:"资源组名称","label-width":e.formStatus.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formData.groupCode,callback:function(t){e.$set(e.formData,"groupCode",t)},expression:"formData.groupCode"}})],1)],1),a("el-form",{attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:"描述","label-width":e.formStatus.labelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formData.comment,callback:function(t){e.$set(e.formData,"comment",t)},expression:"formData.comment"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formStatus.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveInfo}},[e._v("确定")])],1)],1)},N=[],E={data:function(){return{loading:!1,needAuthOptions:[{value:0,label:"不鉴权"},{value:1,label:"鉴权"}]}},name:"resource-group-dialog",props:["formStatus","formData"],mounted:function(){},methods:{handleClick:function(){this.$emit("input",!this.value)},saveInfo:function(){var e=this;setTimeout((function(){var t=Object.assign({},e.formData);e.formStatus.operationType?Object(p["a"])(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeResourceGroupDialog")})):Object(p["d"])(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeResourceGroupDialog")}))}),600)}}},W=E,B=function(e){e.options.__source="src/components/opscloud/dialog/ResourceGroupDialog.vue"},J=B,F=Object(S["a"])(W,q,N,!1,null,null,null);"function"===typeof J&&J(F);var H=F.exports;function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){Object(u["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={name:"AuthGroupTable",data:function(){return{tableData:[],resourceGroup:{},formResourceGroupStatus:{visible:!1,addTitle:"新增资源组配置",updateTitle:"更新资源组配置",labelWidth:"100px",operationType:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{groupCode:""}}},computed:L({},Object(s["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData()},components:{ResourceGroupDialog:H},methods:L({},Object(s["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},delItem:function(e){var t=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["b"])(e.id).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addItem:function(){this.formResourceGroupStatus.operationType=!0,this.formResourceGroupStatus.visible=!0,this.resourceGroup={id:"",groupCode:"",comment:""}},updateItem:function(e){this.resourceGroup=Object.assign({},e),this.formResourceGroupStatus.operationType=!1,this.formResourceGroupStatus.visible=!0},handleDialogCancel:function(e){this.$message({message:"取消保存",type:"warning"}),e()},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},fetchData:function(){var e=this;this.loading=!0,Object(p["c"])(this.queryParam.groupCode,this.pagination.currentPage,this.pagination.pageSize).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.loading=!1}))}})},Q=M,U=function(e){e.options.__source="src/components/opscloud/table/AuthGroupTable.vue"},V=U,X=Object(S["a"])(Q,G,I,!1,null,"27069e92",null);"function"===typeof V&&V(X);var Y=X.exports,Z={data:function(){return{activeName:"authResource"}},mounted:function(){},components:{AuthResourceTable:R,AuthGroupTable:Y},methods:{}},ee=Z,te=function(e){e.options.__source="src/pages/auth/resource/index.vue"},ae=te,oe=Object(S["a"])(ee,o,r,!1,null,null,null);"function"===typeof ae&&ae(oe);t["default"]=oe.exports},7325:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return u}));var o=a("9bd2");function r(e,t,a){return Object(o["a"])({url:"/auth/group/page/query?groupCode="+e+"&page="+t+"&length="+a,method:"get"})}function n(e){return Object(o["a"])({url:"/auth/group/add",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/auth/group/del?id="+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/auth/group/update",method:"put",data:e})}}}]);