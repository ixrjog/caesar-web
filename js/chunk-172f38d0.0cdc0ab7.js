(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-172f38d0"],{"0549":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",[[r("div",[r("h1",[e._v(e._s(e.title))])]),r("el-col",[r("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":"top"}},[r("el-tab-pane",{attrs:{label:"用户管理"}},[r("div",{staticStyle:{"margin-bottom":"5px"}},[r("el-row",{staticStyle:{"margin-bottom":"5px"}},[r("el-input",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{clearable:"",placeholder:"名称"},model:{value:e.queryUserParam.queryName,callback:function(t){e.$set(e.queryUserParam,"queryName","string"===typeof t?t.trim():t)},expression:"queryUserParam.queryName"}}),r("el-select",{attrs:{clearable:"",placeholder:"用户是否有效"},model:{value:e.queryUserParam.isActive,callback:function(t){e.$set(e.queryUserParam,"isActive","string"===typeof t?t.trim():t)},expression:"queryUserParam.isActive"}},e._l(e.activeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("el-button",{on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{attrs:{loading:e.syncUserLoading},on:{click:e.syncUser}},[e._v("同步")])],1)],1),r("el-row",{staticStyle:{"margin-bottom":"5px"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoading,expression:"userLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"邮箱"}},[r("span",[e._v(e._s(t.row.email))])]),null!=t.row.name&&""!=t.row.name?r("el-form-item",{attrs:{label:"名称"}},[r("span",[e._v(e._s(t.row.name))])]):e._e(),null!=t.row.phone&&""!=t.row.phone?r("el-form-item",{attrs:{label:"电话"}},[r("span",[e._v(e._s(t.row.phone))])]):e._e(),null!=t.row.wechat&&""!=t.row.wechat?r("el-form-item",{attrs:{label:"微信"}},[r("span",[e._v(e._s(t.row.wechat))])]):e._e(),r("el-form-item",{attrs:{label:"有效期"}},[r("span",[e._v(e._s(t.row.dateExpired))])]),r("el-form-item",{attrs:{label:"数据源"}},[r("span",[e._v(e._s(t.row.source))])]),null!=t.row.comment&&""!=t.row.comment?r("el-form-item",{attrs:{label:"描述"}},[r("span",[e._v(e._s(t.row.comment))])]):e._e(),r("el-form-item",{attrs:{label:"用户组"}},[r("div",{staticClass:"tag-group"},e._l(t.row.usersUsergroups,(function(t){return r("el-tag",{key:t.id,staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.name)+" ")])})),1)])],1)]}}])}),r("el-table-column",{attrs:{prop:"username",label:"用户名"}}),r("el-table-column",{attrs:{prop:"name",label:"显示名"}}),r("el-table-column",{attrs:{prop:"role",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{staticClass:"filters",attrs:{type:e._f("getUserRoleType")(t.row.role),size:"small "}},[e._v(" "+e._s(e._f("getUserRoleText")(t.row.role))+" ")])]}}])}),r("el-table-column",{attrs:{prop:"usersUsergroups.length",label:"授权用户组"}}),r("el-table-column",{attrs:{prop:"publicKey",label:"公钥"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:""===t.row.publicKey?"info":"success",size:"small "}},[e._v(" "+e._s(""===t.row.publicKey?"未录入":"已录入")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"isActive",label:"有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{staticClass:"filters",attrs:{type:e._f("getActiveType")(t.row.isActive),size:"small "}},[e._v(" "+e._s(e._f("getActiveText")(t.row.isActive))+" ")])]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.handlerSyncUser(t.row.id)}}},[e._v("同步")]),r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.setItemActive(t.row.id)}}},[e._v(" "+e._s(e._f("getActiveText")(!t.row.isActive))+" ")]),r("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.handlerDelUser(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}})],1)],1),r("el-tab-pane",{attrs:{label:"帮助"}})],1)],1)]],2)},a=[],s=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),i=r("5880"),u=r("da4f"),o=r("11a2"),c=r("9f19");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=[{value:-1,label:"全部"},{value:1,label:"有效"},{value:0,label:"无效"}],m={data:function(){return{tableData:[],userLoading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryUserParam:{queryName:"",isActive:-1},syncUserLoading:!1,activeOptions:f,title:"Jump用户管理"}},mounted:function(){this.initPageSize(),this.fetchData()},computed:p({},Object(i["mapState"])("d2admin/user",["info"])),filters:{getUserRoleType:u["b"],getUserRoleText:u["a"],getActiveType:o["b"],getActiveText:o["a"]},methods:p({},Object(i["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},syncUser:function(){var e=this;this.syncUserLoading=!0,Object(c["g"])().then((function(t){e.fetchData(),e.$message({type:"success",message:"同步完成!"}),e.syncUserLoading=!1}))},handlerSyncUser:function(e){var t=this;Object(c["h"])(e).then((function(e){t.fetchData(),t.$message({type:"success",message:"同步完成!"})}))},setItemActive:function(e){var t=this;Object(c["f"])(e).then((function(e){t.fetchData(),t.$message({type:"success",message:"设置成功!"})}))},handlerDelUser:function(e){var t=this;Object(c["b"])(e.username).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))},fetchData:function(){var e=this;this.userLoading=!0;var t={queryName:this.queryUserParam.queryName,extend:1,isActive:this.queryUserParam.isActive,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(c["d"])(t).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.userLoading=!1}))}})},d=m,g=(r("fb5d"),r("2877")),b=function(e){e.options.__source="src/pages/jump/jumpserver/user/index.vue"},h=b,y=Object(g["a"])(d,n,a,!1,null,"22accc12",null);"function"===typeof h&&h(y);t["default"]=y.exports},"11a2":function(e,t,r){"use strict";function n(e){switch(e){case!0:return"success";case!1:return"warning";case 1:return"success";case 0:return"warning";default:return"info"}}function a(e){switch(e){case!0:return"有效";case!1:return"无效";case 1:return"有效";case 0:return"无效";default:return"未定义"}}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}))},"5ce1":function(e,t,r){},"9f19":function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return i})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return p}));var n=r("9bd2");function a(e){return Object(n["a"])({url:"/jump/jumpserver/user/page/fuzzy/query",method:"post",data:e})}function s(){return Object(n["a"])({url:"/jump/jumpserver/user/sync",method:"get"})}function i(e){return Object(n["a"])({url:"/jump/jumpserver/user/id/sync?id="+e,method:"get"})}function u(e){return Object(n["a"])({url:"/jump/jumpserver/user/active/set?id="+e,method:"get"})}function o(e){return Object(n["a"])({url:"/jump/jumpserver/user/del?username="+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/jump/jumpserver/user/admin/page/fuzzy/query",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/jump/jumpserver/user/admin/auth?id="+e,method:"get"})}function p(e){return Object(n["a"])({url:"/jump/jumpserver/user/admin/revoke?id="+e,method:"get"})}},da4f:function(e,t,r){"use strict";function n(e){switch(e){case"User":return"success";case"Auditor":return"warning";case"Admin":return"danger";default:return"info"}}function a(e){switch(e){case"User":return"用户";case"Auditor":return"审计员";case"Admin":return"管理员";default:return"未定义"}}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}))},fb5d:function(e,t,r){"use strict";var n=r("5ce1"),a=r.n(n);a.a}}]);