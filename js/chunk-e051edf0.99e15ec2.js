(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e051edf0"],{"95bc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",[[r("div",[r("h1",[e._v("服务器组")])]),r("div",{staticStyle:{"margin-bottom":"5px"}},[r("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[r("el-input",{style:e.searchBarHeadStyle,attrs:{placeholder:"名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name","string"===typeof t?t.trim():t)},expression:"queryParam.name"}}),r("el-select",{style:e.searchBarStyle,attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜组类型","remote-method":e.getGrpType,loading:e.loading},model:{value:e.queryParam.grpType,callback:function(t){e.$set(e.queryParam,"grpType","string"===typeof t?t.trim():t)},expression:"queryParam.grpType"}},e._l(e.grpTypeOptions,(function(e){return r("el-option",{key:e.grpType,attrs:{label:e.name,value:e.grpType}})})),1),r("el-button",{style:e.searchBarStyle,on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{style:e.searchBarStyle,on:{click:e.addItem}},[e._v("新增")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"name",label:"名称"}}),r("el-table-column",{attrs:{prop:"serverGroupType",label:"组类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{style:{color:t.row.serverGroupType.color},attrs:{"disable-transitions":""}},[e._v(" "+e._s(t.row.serverGroupType.name)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"comment",label:"描述"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(r){return e.editItem(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.delItem(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}}),r("ServerGroupDialog",{ref:"serverGroupDialog",attrs:{formStatus:e.formServerGroupStatus},on:{closeServerGroupDialog:e.fetchData}})]],2)},n=[],o=(r("a4d3"),r("4de4"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),i=r("5880"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.formStatus.operationType?e.formStatus.addTitle:e.formStatus.updateTitle,visible:e.formStatus.visible},on:{"update:visible":function(t){return e.$set(e.formStatus,"visible",t)}}},[r("el-form",{attrs:{model:e.serverGroupData}},[r("el-form-item",{attrs:{label:"名称","label-width":e.formStatus.labelWidth,required:!0}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.serverGroupData.name,callback:function(t){e.$set(e.serverGroupData,"name",t)},expression:"serverGroupData.name"}})],1)],1),r("el-form",{attrs:{model:e.serverGroupData}},[r("el-form-item",{attrs:{label:"组类型","label-width":e.formStatus.labelWidth,required:!0}},[r("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜组类型","remote-method":e.getGrpType,loading:e.loading},model:{value:e.serverGroupData.grpType,callback:function(t){e.$set(e.serverGroupData,"grpType",t)},expression:"serverGroupData.grpType"}},e._l(e.grpTypeOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.grpType}})})),1)],1)],1),r("el-form",{attrs:{model:e.serverGroupData}},[r("el-form-item",{attrs:{label:"工单申请","label-width":e.formStatus.labelWidth,required:!0}},[r("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.serverGroupData.inWorkorder,callback:function(t){e.$set(e.serverGroupData,"inWorkorder",t)},expression:"serverGroupData.inWorkorder"}},e._l(e.workorderOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-form",{attrs:{model:e.serverGroupData}},[r("el-form-item",{attrs:{label:"描述","label-width":e.formStatus.labelWidth}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.serverGroupData.comment,callback:function(t){e.$set(e.serverGroupData,"comment",t)},expression:"serverGroupData.comment"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.formStatus.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveInfo}},[e._v("确定")])],1)],1)},s=[],l=r("b06d"),p=r("e8b6"),c=[{value:0,label:"禁止工单申请"},{value:1,label:"允许工单申请"}],d={data:function(){return{serverGroupData:"",grpTypeOptions:[],loading:!1,workorderOptions:c}},name:"ServerDialog",props:["formStatus"],mounted:function(){this.getGrpType("")},methods:{getGrpType:function(e){var t=this;Object(l["c"])(e,"",1,10).then((function(e){t.grpTypeOptions=e.body.data}))},initData:function(e,t){this.serverGroupData=e,this.grpTypeOptions=t},handleClick:function(){this.$emit("input",!this.value)},saveInfo:function(){var e=this;setTimeout((function(){var t=Object.assign({},e.serverGroupData);e.formStatus.operationType?Object(p["a"])(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeServerGroupDialog")})):Object(p["j"])(t).then((function(t){e.$message({message:"成功",type:"success"}),e.formStatus.visible=!1,e.$emit("closeServerGroupDialog")}))}),600)}}},g=d,f=r("2877"),m=function(e){e.options.__source="src/components/opscloud/dialog/ServerGroupDialog.vue"},b=m,v=Object(f["a"])(g,u,s,!1,null,null,null);"function"===typeof b&&b(v);var h=v.exports;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={data:function(){return{searchBarHeadStyle:{display:"inline-block",maxWidth:"200px",marginLeft:"10px"},searchBarStyle:{marginLeft:"5px"},formServerGroupStatus:{visible:!1,addTitle:"新增服务器组配置",updateTitle:"更新服务器组配置",operationType:!0,labelWidth:"100px"},tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{name:"",grpType:""},grpTypeOptions:[],grpTypeDialogOptions:[]}},mounted:function(){this.initPageSize(),this.getGrpType(""),this.fetchData()},computed:S({},Object(i["mapState"])("d2admin/user",["info"])),components:{ServerGroupDialog:h},methods:S({},Object(i["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},getGrpType:function(e){var t=this;Object(l["c"])(e,"",1,10).then((function(e){t.grpTypeOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handleDialogCancel:function(e){this.$message({message:"取消保存",type:"warning"}),e()},delItem:function(e){var t=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["b"])(e.id).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addItem:function(){var e={id:"",name:"group_",inWorkorder:0,grpType:"",comment:""};this.$refs.serverGroupDialog.initData(e,[]),this.formServerGroupStatus.operationType=!0,this.formServerGroupStatus.visible=!0},editItem:function(e){var t=[];t.push(e.serverGroupType);var r=Object.assign({},e);this.$refs.serverGroupDialog.initData(r,t),this.formServerGroupStatus.operationType=!1,this.formServerGroupStatus.visible=!0},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},fetchData:function(){var e=this;this.loading=!0,Object(p["e"])(this.queryParam.name,this.queryParam.grpType,this.pagination.currentPage,this.pagination.pageSize).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.loading=!1}))}})},D=O,G=function(e){e.options.__source="src/pages/server/group/index.vue"},T=G,j=Object(f["a"])(D,a,n,!1,null,null,null);"function"===typeof T&&T(j);t["default"]=j.exports},b06d:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return u}));var a=r("9bd2");function n(e,t,r,n){return Object(a["a"])({url:"/server/group/type/page/query?name="+e+"&grpType="+t+"&page="+r+"&length="+n,method:"get"})}function o(e){return Object(a["a"])({url:"/server/group/type/add",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/server/group/type/del?id="+e,method:"delete"})}function u(e){return Object(a["a"])({url:"/server/group/type/update",method:"put",data:e})}},e8b6:function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"j",(function(){return u})),r.d(t,"g",(function(){return s})),r.d(t,"f",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"h",(function(){return c})),r.d(t,"d",(function(){return d})),r.d(t,"i",(function(){return g}));var a=r("9bd2");function n(e,t,r,n){return Object(a["a"])({url:"/server/group/page/query?name="+e+"&grpType="+t+"&page="+r+"&length="+n,method:"get"})}function o(e){return Object(a["a"])({url:"/server/group/add",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/server/group/del?id="+e,method:"delete"})}function u(e){return Object(a["a"])({url:"/server/group/update",method:"put",data:e})}function s(e,t,r){return Object(a["a"])({url:"/server/group/user/include/page/query?userId="+e+"&page="+t+"&length="+r,method:"get"})}function l(e,t,r,n){return Object(a["a"])({url:"/server/group/user/exclude/page/query?userId="+e+"&queryName="+t+"&page="+r+"&length="+n,method:"get"})}function p(e,t){return Object(a["a"])({url:"/server/group/grant?userId="+e+"&serverGroupId="+t,method:"get"})}function c(e,t){return Object(a["a"])({url:"/server/group/revoke?userId="+e+"&serverGroupId="+t,method:"delete"})}function d(e){return Object(a["a"])({url:"/server/group/attribute/query?id="+e,method:"get"})}function g(e){return Object(a["a"])({url:"/server/group/attribute/save",method:"put",data:e})}}}]);