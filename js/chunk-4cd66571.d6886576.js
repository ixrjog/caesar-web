(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd66571"],{"3fd3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[[a("div",[a("h1",[e._v(e._s(e.title))])]),a("el-col",[a("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":"top"}},[a("el-tab-pane",{attrs:{label:"资产"}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-input",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{clearable:"",placeholder:"名称"},model:{value:e.queryAssetParam.queryName,callback:function(t){e.$set(e.queryAssetParam,"queryName","string"===typeof t?t.trim():t)},expression:"queryAssetParam.queryName"}}),a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"搜索资产节点","remote-method":e.getAssetsNode},model:{value:e.queryAssetParam.assetsNodeId,callback:function(t){e.$set(e.queryAssetParam,"assetsNodeId","string"===typeof t?t.trim():t)},expression:"queryAssetParam.assetsNodeId"}},e._l(e.assetsNodeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"用户是否有效"},model:{value:e.queryAssetParam.isActive,callback:function(t){e.$set(e.queryAssetParam,"isActive","string"===typeof t?t.trim():t)},expression:"queryAssetParam.isActive"}},e._l(e.activeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{on:{click:e.fetchData}},[e._v("查询")]),a("el-button",{attrs:{loading:e.syncAssetLoading},on:{click:e.syncAsset}},[e._v("同步")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.assetLoading,expression:"assetLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"hostname",label:"主机名"}}),a("el-table-column",{attrs:{prop:"publicIp",label:"公网ip"}}),a("el-table-column",{attrs:{prop:"ip",label:"私网ip"}}),a("el-table-column",{attrs:{prop:"isActive",label:"有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.isActive?"success":"info",size:"small"}},[e._v(e._s(t.row.isActive?"有效":"无效")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"comment",label:"描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.handlerDelAsset(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("el-tab-pane",{attrs:{label:"帮助"}})],1)],1)]],2)},n=[],i=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),r=a("da4f"),o=a("9bd2");function l(e){return Object(o["a"])({url:"/jump/jumpserver/asset/page/fuzzy/query",method:"post",data:e})}function c(){return Object(o["a"])({url:"/jump/jumpserver/asset/sync",method:"get"})}function u(e){return Object(o["a"])({url:"/jump/jumpserver/asset/del?assetId="+e,method:"delete"})}function p(e,t,a){return Object(o["a"])({url:"/jump/jumpserver/assetsNode/page/query?value="+e+"&page="+t+"&length="+a,method:"get"})}var d=a("5880");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=[{value:1,label:"有效"},{value:0,label:"无效"}],m={data:function(){return{assetsNodeOptions:[],activeOptions:b,pagination:{currentPage:1,pageSize:10,total:0},queryAssetParam:{assetsNodeId:"",queryName:"",isActive:"",extend:0},syncAssetLoading:!1,assetLoading:!1,tableData:[],title:"Jump资产管理"}},computed:f({},Object(d["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData(),this.getAssetsNode("")},filters:{getUserRoleType:r["b"],getUserRoleText:r["a"]},methods:f({},Object(d["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},getAssetsNode:function(e){var t=this;p(e,1,20).then((function(e){t.assetsNodeOptions=e.body.data}))},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},syncAsset:function(){var e=this;this.syncAssetLoading=!0,c().then((function(t){e.fetchData(),e.$message({type:"success",message:"同步完成!"}),e.syncAssetLoading=!1}))},handlerDelAsset:function(e){var t=this;u(e.id).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))},fetchData:function(){var e=this;this.assetLoading=!0;var t=Object.assign({},this.queryAssetParam);t.page=this.pagination.currentPage,t.length=this.pagination.pageSize,l(t).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.assetLoading=!1}))}})},h=m,y=(a("d6d6"),a("2877")),v=function(e){e.options.__source="src/pages/jump/jumpserver/asset/index.vue"},A=v,O=Object(y["a"])(h,s,n,!1,null,"987755f0",null);"function"===typeof A&&A(O);t["default"]=O.exports},d6d6:function(e,t,a){"use strict";var s=a("e353"),n=a.n(s);n.a},da4f:function(e,t,a){"use strict";function s(e){switch(e){case"User":return"success";case"Auditor":return"warning";case"Admin":return"danger";default:return"info"}}function n(e){switch(e){case"User":return"用户";case"Auditor":return"审计员";case"Admin":return"管理员";default:return"未定义"}}a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n}))},e353:function(e,t,a){}}]);