(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61bda9d6"],{"0035":function(t,e,n){"use strict";var a=n("363a"),i=n.n(a);i.a},"363a":function(t,e,n){},f95e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("d2-container",[[n("div",[n("h1",[t._v(t._s(t.title))])]),n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[n("el-input",{staticClass:"input",attrs:{placeholder:"输入关键字模糊查询"},model:{value:t.queryParam.queryName,callback:function(e){t.$set(t.queryParam,"queryName",e)},expression:"queryParam.queryName"}}),n("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.fetchData}},[t._v("查询")]),n("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.handlerAdd}},[t._v("新增")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"name",label:"应用名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(e.row.name))]),n("div",[t._v(t._s(e.row.comment))])]}}])}),n("el-table-column",{attrs:{prop:"serverGroupId",label:"服务器组"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.serverGroup?n("span",[t._v(t._s(e.row.serverGroup.name))]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"instances",label:"应用实例",width:"700"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.instances,(function(a){return n("div",{key:a.id},[n("el-tag",{style:{color:a.env.color},attrs:{type:"primary"}},[t._v(t._s(a.instanceName)+" "),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerRowInstanceEdit(e.row,a)}}},[t._v("编辑 ")]),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerRowInstanceDel(a)}}},[t._v("删除")])],1),null!==a.deployment?n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"success",effect:"dark"}},[t._v(t._s(a.deployment.name)+" "),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerDeploymentDel(a.deployment.id)}}},[t._v("删除 ")])],1):t._e(),null!==a.service?n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning",effect:"dark"}},[t._v(t._s(a.service.name)+" "),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerServiceDel(a.service.id)}}},[t._v("删除 ")])],1):t._e()],1)}))}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowInstanceAdd(e.row)}}},[t._v("新建")]),n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowEdit(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowDel(e.row)}}},[t._v("删除")])]}}])})],1),n("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),n("KubernetesApplicationInstanceDialog",{ref:"kubernetesApplicationInstanceDialog",attrs:{formStatus:t.formInstanceStatus},on:{closeDialog:t.fetchData}}),n("KubernetesApplicationDialog",{ref:"kubernetesApplicationDialog",attrs:{formStatus:t.formApplicationStatus},on:{closeDialog:t.fetchData}})]],2)},i=[],o=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),r=n("d4c4"),s=n("3a3e"),c=n("e12b"),l=n("2b41"),u=n("5880");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={data:function(){return{title:"Kubernetes应用管理",formInstanceStatus:{visible:!1,operationType:!0,addTitle:"新增实例配置",updateTitle:"更新实例配置"},formApplicationStatus:{visible:!1,operationType:!0,addTitle:"新增应用配置",updateTitle:"更新应用配置"},tableData:[],loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:"",serverGroupId:"",extend:1}}},computed:f({},Object(u["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData()},components:{KubernetesApplicationInstanceDialog:r["a"],KubernetesApplicationDialog:s["a"]},methods:f({},Object(u["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},handlerAdd:function(t){var e={id:"",name:"",serverGroupId:"",businessId:"",comment:""};this.$refs.kubernetesApplicationDialog.initData(e),this.formApplicationStatus.visible=!0,this.formApplicationStatus.operationType=!0},handlerRowEdit:function(t){this.formApplicationStatus.visible=!0,this.formApplicationStatus.operationType=!1;var e=Object.assign({},t);this.$refs.kubernetesApplicationDialog.initData(e)},handlerRowDel:function(t){var e=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])(t.id).then((function(t){e.fetchData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handlerRowInstanceDel:function(t){var e=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["d"])(t.id).then((function(t){e.fetchData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handlerRowInstanceEdit:function(t,e){var n=Object.assign({},t),a=Object.assign({},e);this.$refs.kubernetesApplicationInstanceDialog.initData(n,a),this.formInstanceStatus.visible=!0,this.formInstanceStatus.operationType=!1},handlerRowInstanceAdd:function(t){var e={id:"",applicationId:t.id,envType:0,envLabel:"",templateVariable:""};this.$refs.kubernetesApplicationInstanceDialog.initData(t,e),this.formInstanceStatus.visible=!0,this.formInstanceStatus.operationType=!0},handlerDeploymentDel:function(t){var e=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["e"])(t).then((function(t){e.fetchData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handlerServiceDel:function(t){var e=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["f"])(t).then((function(t){e.fetchData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0;var e=Object.assign({},this.queryParam);e.page=this.pagination.currentPage,e.length=this.pagination.pageSize,Object(l["c"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}})},g=d,h=(n("0035"),n("2877")),m=function(t){t.options.__source="src/pages/kubernetes/application/index.vue"},b=m,y=Object(h["a"])(g,a,i,!1,null,"0f9a20cc",null);"function"===typeof b&&b(y);e["default"]=y.exports}}]);