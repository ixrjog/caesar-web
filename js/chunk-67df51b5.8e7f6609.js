(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67df51b5"],{"0ed0":function(e,t,r){},2968:function(e,t){ace.define("ace/mode/yaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,r){"use strict";var n=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,i=function(){this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"list.markup",regex:/^(?:-{3}|\.{3})\s*(?=#|$)/},{token:"list.markup",regex:/^\s*[\-?](?:$|\s)/},{token:"constant",regex:"!![\\w//]+"},{token:"constant.language",regex:"[&\\*][a-zA-Z0-9-_]+"},{token:["meta.tag","keyword"],regex:/^(\s*\w.*?)(:(?=\s|$))/},{token:["meta.tag","keyword"],regex:/(\w+?)(\s*:(?=\s|$))/},{token:"keyword.operator",regex:"<<\\w*:\\w*"},{token:"keyword.operator",regex:"-\\s*(?=[{])"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:/[|>][-+\d\s]*$/,onMatch:function(e,t,r,n){var o=/^\s*/.exec(n)[0];return r.length<1?r.push(this.next):r[0]="mlString",r.length<2?r.push(o.length):r[1]=o.length,this.token},next:"mlString"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:/(\b|[+\-\.])[\d_]+(?:(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)(?=[^\d-\w]|$)/},{token:"constant.numeric",regex:/[+\-]?\.inf\b|NaN\b|0x[\dA-Fa-f_]+|0b[10_]+/},{token:"constant.language.boolean",regex:"\\b(?:true|false|TRUE|FALSE|True|False|yes|no)\\b"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:/[^\s,:\[\]\{\}]+/}],mlString:[{token:"indent",regex:/^\s*$/},{token:"indent",regex:/^\s*/,onMatch:function(e,t,r){var n=r[1];return n>=e.length?(this.next="start",r.splice(0)):this.next="mlString",this.token},next:"mlString"},{token:"string",regex:".+"}]},this.normalizeRules()};n.inherits(i,o),t.YamlHighlightRules=i})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=e("../range").Range,o=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var r=e.getLine(t),o=r.match(/^(\s*\})/);if(!o)return 0;var i=o[1].length,a=e.findMatchingBracket({row:t,column:i});if(!a||a.row==t)return 0;var s=this.$getIndent(e.getLine(a.row));e.replace(new n(t,0,t,i-1),s)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(o.prototype),t.MatchingBraceOutdent=o})),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],(function(e,t,r){"use strict";var n=e("../../lib/oop"),o=e("./fold_mode").FoldMode,i=e("../../range").Range,a=t.FoldMode=function(){};n.inherits(a,o),function(){this.getFoldWidgetRange=function(e,t,r){var n=this.indentationBlock(e,r);if(n)return n;var o=/\S/,a=e.getLine(r),s=a.search(o);if(-1!=s&&"#"==a[s]){var l=a.length,c=e.getLength(),u=r,d=r;while(++r<c){a=e.getLine(r);var p=a.search(o);if(-1!=p){if("#"!=a[p])break;d=r}}if(d>u){var g=e.getLine(d).length;return new i(u,l,d,g)}}},this.getFoldWidget=function(e,t,r){var n=e.getLine(r),o=n.search(/\S/),i=e.getLine(r+1),a=e.getLine(r-1),s=a.search(/\S/),l=i.search(/\S/);if(-1==o)return e.foldWidgets[r-1]=-1!=s&&s<l?"start":"","";if(-1==s){if(o==l&&"#"==n[o]&&"#"==i[o])return e.foldWidgets[r-1]="",e.foldWidgets[r+1]="","start"}else if(s==o&&"#"==n[o]&&"#"==a[o]&&-1==e.getLine(r-2).search(/\S/))return e.foldWidgets[r-1]="start",e.foldWidgets[r+1]="","";return e.foldWidgets[r-1]=-1!=s&&s<o?"start":"",o<l?"start":""}}.call(a.prototype)})),ace.define("ace/mode/yaml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/yaml_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/coffee"],(function(e,t,r){"use strict";var n=e("../lib/oop"),o=e("./text").Mode,i=e("./yaml_highlight_rules").YamlHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,s=e("./folding/coffee").FoldMode,l=function(){this.HighlightRules=i,this.$outdent=new a,this.foldingRules=new s,this.$behaviour=this.$defaultBehaviour};n.inherits(l,o),function(){this.lineCommentStart=["#","//"],this.getNextLineIndent=function(e,t,r){var n=this.$getIndent(t);if("start"==e){var o=t.match(/^.*[\{\(\[]\s*$/);o&&(n+=r)}return n},this.checkOutdent=function(e,t,r){return this.$outdent.checkOutdent(t,r)},this.autoOutdent=function(e,t,r){this.$outdent.autoOutdent(t,r)},this.$id="ace/mode/yaml"}.call(l.prototype),t.Mode=l}))},"296c":function(e,t,r){"use strict";var n=r("0ed0"),o=r.n(n);o.a},"446e":function(e,t){ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,r){"use strict";var n=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,i=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",a=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",s=function(){var e=this.createKeywordMapper({keyword:i,"support.function.builtin":a,"invalid.deprecated":"debugger"},"identifier"),t="(?:(?:[1-9]\\d*)|(?:0))",r="(?:\\.\\d+)",n="(?:\\d+)",o="(?:(?:"+n+"?"+r+")|(?:"+n+"\\.))",s="(?:(?:"+o+"|"+n+"))",l="(?:"+s+"|"+o+")",c="(?:&"+n+")",u="[a-zA-Z_][a-zA-Z0-9_]*",d="(?:"+u+"(?==))",p="(?:\\$(?:SHLVL|\\$|\\!|\\?))",g="(?:"+u+"\\s*\\(\\))";this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,r){var n="-"==e[2]?"indentedHeredoc":"heredoc",o=e.split(this.splitRegex);return r.push(n,o[4]),[{type:"constant",value:o[1]},{type:"text",value:o[2]},{type:"string",value:o[3]},{type:"support.class",value:o[4]},{type:"string",value:o[5]}]},rules:{heredoc:[{onMatch:function(e,t,r){return e===r[1]?(r.shift(),r.shift(),this.next=r[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^\t+"},{onMatch:function(e,t,r){return e===r[1]?(r.shift(),r.shift(),this.next=r[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:p},{token:"variable",regex:d},{include:"variables"},{token:"support.function",regex:g},{token:"support.function",regex:c},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:l},{token:"constant.numeric",regex:t+"\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};n.inherits(s,o),t.ShHighlightRules=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,r){"use strict";var n=e("../../lib/oop"),o=e("../../range").Range,i=e("./fold_mode").FoldMode,a=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};n.inherits(a,i),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,r){var n=e.getLine(r);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return"";var o=this._getFoldWidgetBase(e,t,r);return!o&&this.startRegionRe.test(n)?"start":o},this.getFoldWidgetRange=function(e,t,r,n){var o=e.getLine(r);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(e,o,r);var i=o.match(this.foldingStartMarker);if(i){var a=i.index;if(i[1])return this.openingBracketBlock(e,i[1],r,a);var s=e.getCommentFoldRange(r,a+i[0].length,1);return s&&!s.isMultiLine()&&(n?s=this.getSectionRange(e,r):"all"!=t&&(s=null)),s}if("markbegin"!==t){i=o.match(this.foldingStopMarker);if(i){a=i.index+i[0].length;return i[1]?this.closingBracketBlock(e,i[1],r,a):e.getCommentFoldRange(r,a,-1)}}},this.getSectionRange=function(e,t){var r=e.getLine(t),n=r.search(/\S/),i=t,a=r.length;t+=1;var s=t,l=e.getLength();while(++t<l){r=e.getLine(t);var c=r.search(/\S/);if(-1!==c){if(n>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=i)break;if(u.isMultiLine())t=u.end.row;else if(n==c)break}s=t}}return new o(i,a,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,r){var n=t.search(/\s*$/),i=e.getLength(),a=r,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;while(++r<i){t=e.getLine(r);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}var u=r;if(u>a)return new o(a,n,u,t.length)}}.call(a.prototype)})),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],(function(e,t,r){"use strict";var n=e("../lib/oop"),o=e("./text").Mode,i=e("./sh_highlight_rules").ShHighlightRules,a=e("../range").Range,s=e("./folding/cstyle").FoldMode,l=e("./behaviour/cstyle").CstyleBehaviour,c=function(){this.HighlightRules=i,this.foldingRules=new s,this.$behaviour=new l};n.inherits(c,o),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,r){var n=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e),i=o.tokens;if(i.length&&"comment"==i[i.length-1].type)return n;if("start"==e){var a=t.match(/^.*[\{\(\[:]\s*$/);a&&(n+=r)}return n};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,r,n){if("\r\n"!==n&&"\r"!==n&&"\n"!==n)return!1;var o=this.getTokenizer().getLineTokens(r.trim(),t).tokens;if(!o)return!1;do{var i=o.pop()}while(i&&("comment"==i.type||"text"==i.type&&i.value.match(/^\s+$/)));return!!i&&("keyword"==i.type&&e[i.value])},this.autoOutdent=function(e,t,r){r+=1;var n=this.$getIndent(t.getLine(r)),o=t.getTabString();n.slice(-o.length)==o&&t.remove(new a(r,n.length-o.length,r,n.length))},this.$id="ace/mode/sh"}.call(c.prototype),t.Mode=c}))},"67ee":function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return i})),r.d(t,"j",(function(){return a})),r.d(t,"o",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"m",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"q",(function(){return g})),r.d(t,"f",(function(){return f})),r.d(t,"n",(function(){return h})),r.d(t,"d",(function(){return b})),r.d(t,"r",(function(){return m})),r.d(t,"g",(function(){return k})),r.d(t,"l",(function(){return v})),r.d(t,"k",(function(){return y})),r.d(t,"p",(function(){return x}));var n=r("9bd2");function o(e){return Object(n["a"])({url:"/server/task/command/executor",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/server/task/playbook/executor",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/server/task/script/executor",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/server/task/query?taskId="+e,method:"get"})}function l(){return Object(n["a"])({url:"/server/task/ansible/hosts/create",method:"get"})}function c(e){return Object(n["a"])({url:"/server/task/abort?taskId="+e,method:"get"})}function u(e){return Object(n["a"])({url:"/server/task/member/abort?memberId="+e,method:"get"})}function d(e){return Object(n["a"])({url:"/server/task/playbook/page/query",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/server/task/playbook/add",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/server/task/playbook/update",method:"put",data:e})}function f(e){return Object(n["a"])({url:"/server/task/playbook/del?id="+e,method:"delete"})}function h(e){return Object(n["a"])({url:"/server/task/script/page/query",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/server/task/script/add",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/server/task/script/update",method:"put",data:e})}function k(e){return Object(n["a"])({url:"/server/task/script/del?id="+e,method:"delete"})}function v(){return Object(n["a"])({url:"/server/task/ansible/version",method:"get"})}function y(){return Object(n["a"])({url:"/server/task/ansible/hosts/preview",method:"get"})}function x(e){return Object(n["a"])({url:"/server/task/history/page/query",method:"post",data:e})}},"94fc":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",[r("h1",[e._v(e._s(e.title))]),r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"订阅配置",name:"subscription"}},[r("ProfileSubscriptionTable",{ref:"profileSubscriptionTable"})],1)],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[r("el-input",{staticClass:"input",attrs:{placeholder:"输入关键字模糊查询"},model:{value:e.queryParam.queryName,callback:function(t){e.$set(e.queryParam,"queryName",t)},expression:"queryParam.queryName"}}),r("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{staticStyle:{"margin-left":"5px"},on:{click:e.handlerAdd}},[e._v("新建")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"vars"}},[r("editor",{attrs:{lang:t.row.scriptLang,theme:"kuroir",width:"500",height:"80",options:e.options},on:{init:e.editorInit},model:{value:t.row.vars,callback:function(r){e.$set(t.row,"vars",r)},expression:"props.row.vars"}})],1)],1)]}}])}),r("el-table-column",{attrs:{prop:"name",label:"任务名称"}}),r("el-table-column",{attrs:{prop:"subscriptionType",label:"订阅类型"}}),r("el-table-column",{attrs:{prop:"ansiblePlaybook",label:"脚本名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.ansiblePlaybook.name))])]}}])}),r("el-table-column",{attrs:{prop:"hostPattern",label:"主机模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.hostPattern))]),r("div",{staticClass:"tag-group"},e._l(t.row.servers,(function(t){return r("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"}},[e._v(" "+e._s(t.name)+"-"+e._s(t.serialNumber)+" "+e._s(t.privateIp)+" ")])})),1)]}}])}),r("el-table-column",{attrs:{prop:"executionTime",label:"执行时间"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.handlerRowPublish(t.row)}}},[e._v("发布")]),r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.handlerRowEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(r){return e.handlerRowDel(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:e.pagination.total,"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize},on:{"current-change":e.paginationCurrentChange,"size-change":e.handleSizeChange}}),r("ProfileSubscriptionDialog",{ref:"profileSubscriptionDialog",attrs:{formStatus:e.formStatus},on:{closeDialog:e.fetchData}})],1)},a=[],s=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),l=r("5880"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.formStatus.operationType?e.formStatus.addTitle:e.formStatus.updateTitle,visible:e.formStatus.visible},on:{"update:visible":function(t){return e.$set(e.formStatus,"visible",t)},"before-close":e.handlerCloseDialog}},[r("el-form",{attrs:{model:e.profileSubscriptionData}},[r("el-form-item",{attrs:{label:"名称","label-width":e.labelWidth,required:!0}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.profileSubscriptionData.name,callback:function(t){e.$set(e.profileSubscriptionData,"name","string"===typeof t?t.trim():t)},expression:"profileSubscriptionData.name"}})],1),r("el-form-item",{attrs:{label:"订阅类型","label-width":e.labelWidth,required:!0}},[r("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.profileSubscriptionData.subscriptionType,callback:function(t){e.$set(e.profileSubscriptionData,"subscriptionType","string"===typeof t?t.trim():t)},expression:"profileSubscriptionData.subscriptionType"}},e._l(e.subscriptionTypeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"选择脚本","label-width":e.labelWidth,required:!0}},[r("el-select",{attrs:{filterable:"","value-key":"id","reserve-keyword":"",remote:"",placeholder:"搜索playbook","remote-method":e.getPlaybook,loading:e.playbookSearching},model:{value:e.profileSubscriptionData.scriptId,callback:function(t){e.$set(e.profileSubscriptionData,"scriptId",t)},expression:"profileSubscriptionData.scriptId"}},e._l(e.playbookOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"服务器组","label-width":e.labelWidth,required:!0}},[r("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜组类型","remote-method":e.getServerGroup,loading:e.loading},model:{value:e.profileSubscriptionData.serverGroupId,callback:function(t){e.$set(e.profileSubscriptionData,"serverGroupId","string"===typeof t?t.trim():t)},expression:"profileSubscriptionData.serverGroupId"}},e._l(e.serverGroupOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"主机模式","label-width":e.labelWidth,required:!0}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.profileSubscriptionData.hostPattern,callback:function(t){e.$set(e.profileSubscriptionData,"hostPattern","string"===typeof t?t.trim():t)},expression:"profileSubscriptionData.hostPattern"}})],1),r("el-form-item",{attrs:{label:"vars","label-width":e.labelWidth,required:!0}},[r("editor",{attrs:{lang:"yaml",theme:"chrome",width:"100%",height:"100"},on:{init:e.editorInit},model:{value:e.profileSubscriptionData.vars,callback:function(t){e.$set(e.profileSubscriptionData,"vars",t)},expression:"profileSubscriptionData.vars"}})],1),r("el-form-item",{attrs:{label:"描述","label-width":e.labelWidth}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.profileSubscriptionData.comment,callback:function(t){e.$set(e.profileSubscriptionData,"comment","string"===typeof t?t.trim():t)},expression:"profileSubscriptionData.comment"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:e.handlerCloseDialog}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveInfo}},[e._v("确定")])],1)],1)},u=[],d=r("e8b6"),p=r("9bd2"),g="/profile/subscription";function f(e){return Object(p["a"])({url:g+"/page/query",method:"post",data:e})}function h(e){return Object(p["a"])({url:g+"/del?id="+e,method:"delete"})}function b(e){return Object(p["a"])({url:g+"/add",method:"post",data:e})}function m(e){return Object(p["a"])({url:g+"/update",method:"put",data:e})}function k(e){return Object(p["a"])({url:g+"/publish?id="+e,method:"get"})}var v=r("67ee"),y=[{value:"ANSIBLE_HOSTS",label:"ANSIBLE_HOSTS"}],x={data:function(){return{loading:!1,playbookSearching:!1,labelWidth:"150px",profileSubscriptionData:{},subscriptionTypeOptions:y,serverGroupOptions:[],playbookOptions:[]}},name:"ProfileSubscriptionDialog",props:["formStatus"],mixins:[],components:{editor:r("7c9e")},mounted:function(){},methods:{editorInit:function(){r("2099"),r("2968"),r("95b8"),r("ec5e")},getPlaybook:function(e){var t=this;this.playbookSearching=!0;var r={queryName:e,page:1,length:20};Object(v["m"])(r).then((function(e){t.playbookOptions=e.body.data,t.playbookSearching=!1}))},handlerCloseDialog:function(){this.formStatus.visible=!1,this.$emit("closeDialog")},getServerGroup:function(e){var t=this;Object(d["e"])(e,"",1,20).then((function(e){t.serverGroupOptions=e.body.data}))},initData:function(e){this.profileSubscriptionData=e,this.formStatus.operationType?(this.getServerGroup(""),this.getPlaybook("")):(this.serverGroupOptions=[],this.serverGroupOptions.push(e.serverGroup),this.playbookOptions=[],this.playbookOptions.push(e.ansiblePlaybook))},handleClick:function(){this.$emit("input",!this.value)},saveInfo:function(){var e=this;setTimeout((function(){var t=Object.assign({},e.profileSubscriptionData);e.formStatus.operationType?b(t).then((function(t){e.$message({message:"成功",type:"success"}),e.handlerCloseDialog()})):m(t).then((function(t){e.$message({message:"成功",type:"success"}),e.handlerCloseDialog()}))}),600)}}},_=x,S=r("2877"),w=function(e){e.options.__source="src/components/opscloud/dialog/ProfileSubscriptionDialog.vue"},O=w,$=Object(S["a"])(_,c,u,!1,null,null,null);"function"===typeof O&&O($);var D=$.exports;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={name:"ProfileSubscriptionTable",data:function(){return{formStatus:{visible:!1,operationType:!0,addTitle:"新增订阅配置",updateTitle:"更新订阅配置"},tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:""}}},computed:R({},Object(l["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData()},components:{editor:r("7c9e"),ProfileSubscriptionDialog:D},methods:R({},Object(l["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(e){this.pagination.pageSize=e,this.info.pageSize=e,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},editorInit:function(e){r("2099"),r("2968"),r("446e"),r("95b8"),r("a63c"),r("ec5e"),e.setReadOnly(!0)},handlerRowEdit:function(e){var t=Object.assign({},e);this.formStatus.visible=!0,this.formStatus.operationType=!1,this.$refs.profileSubscriptionDialog.initData(t)},handlerRowDel:function(e){var t=this;this.$confirm("此操作将删除当前配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h(e.id).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handlerAdd:function(){var e={id:"",name:"",subscriptionType:"",hostPattern:"",serverGroupId:0,serverTaskId:0,vars:"",comment:""};this.$refs.profileSubscriptionDialog.initData(e),this.formStatus.visible=!0,this.formStatus.operationType=!0},handlerRowPublish:function(e){var t=this;k(e.id).then((function(e){e.success?t.$message({type:"info",message:"任务运行中"}):t.$message.error(e.msg)}))},paginationCurrentChange:function(e){this.pagination.currentPage=e,this.fetchData()},fetchData:function(){var e=this;this.loading=!0;var t={queryName:this.queryParam.queryName,page:this.pagination.currentPage,length:this.pagination.pageSize};f(t).then((function(t){e.tableData=t.body.data,e.pagination.total=t.body.totalNum,e.loading=!1}))}})},P=T,q=(r("296c"),function(e){e.options.__source="src/components/opscloud/profile/ProfileSubscriptionTable.vue"}),C=q,z=Object(S["a"])(P,i,a,!1,null,null,null);"function"===typeof C&&C(z);var I=z.exports,L={data:function(){return{activeName:"subscription",title:"配置订阅"}},components:{ProfileSubscriptionTable:I},mounted:function(){},methods:{}},B=L,F=function(e){e.options.__source="src/pages/task/profile-subscription/index.vue"},M=F,E=Object(S["a"])(B,n,o,!1,null,null,null);"function"===typeof M&&M(E);t["default"]=E.exports},a63c:function(e,t){ace.define("ace/theme/kuroir",["require","exports","module","ace/lib/dom"],(function(e,t,r){t.isDark=!1,t.cssClass="ace-kuroir",t.cssText=".ace-kuroir .ace_gutter {background: #e8e8e8;color: #333;}.ace-kuroir .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-kuroir {background-color: #E8E9E8;color: #363636;}.ace-kuroir .ace_cursor {color: #202020;}.ace-kuroir .ace_marker-layer .ace_selection {background: rgba(245, 170, 0, 0.57);}.ace-kuroir.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #E8E9E8;}.ace-kuroir .ace_marker-layer .ace_step {background: rgb(198, 219, 174);}.ace-kuroir .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(0, 0, 0, 0.29);}.ace-kuroir .ace_marker-layer .ace_active-line {background: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_gutter-active-line {background-color: rgba(203, 220, 47, 0.22);}.ace-kuroir .ace_marker-layer .ace_selected-word {border: 1px solid rgba(245, 170, 0, 0.57);}.ace-kuroir .ace_invisible {color: #BFBFBF}.ace-kuroir .ace_fold {border-color: #363636;}.ace-kuroir .ace_constant{color:#CD6839;}.ace-kuroir .ace_constant.ace_numeric{color:#9A5925;}.ace-kuroir .ace_support{color:#104E8B;}.ace-kuroir .ace_support.ace_function{color:#005273;}.ace-kuroir .ace_support.ace_constant{color:#CF6A4C;}.ace-kuroir .ace_storage{color:#A52A2A;}.ace-kuroir .ace_invalid.ace_illegal{color:#FD1224;background-color:rgba(255, 6, 0, 0.15);}.ace-kuroir .ace_invalid.ace_deprecated{text-decoration:underline;font-style:italic;color:#FD1732;background-color:#E8E9E8;}.ace-kuroir .ace_string{color:#639300;}.ace-kuroir .ace_string.ace_regexp{color:#417E00;background-color:#C9D4BE;}.ace-kuroir .ace_comment{color:rgba(148, 148, 148, 0.91);background-color:rgba(220, 220, 220, 0.56);}.ace-kuroir .ace_variable{color:#009ACD;}.ace-kuroir .ace_meta.ace_tag{color:#005273;}.ace-kuroir .ace_markup.ace_heading{color:#B8012D;background-color:rgba(191, 97, 51, 0.051);}.ace-kuroir .ace_markup.ace_list{color:#8F5B26;}";var n=e("../lib/dom");n.importCssString(t.cssText,t.cssClass)}))},e8b6:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"j",(function(){return s})),r.d(t,"g",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"i",(function(){return g}));var n=r("9bd2");function o(e,t,r,o){return Object(n["a"])({url:"/server/group/page/query?name="+e+"&grpType="+t+"&page="+r+"&length="+o,method:"get"})}function i(e){return Object(n["a"])({url:"/server/group/add",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/server/group/del?id="+e,method:"delete"})}function s(e){return Object(n["a"])({url:"/server/group/update",method:"put",data:e})}function l(e,t,r){return Object(n["a"])({url:"/server/group/user/include/page/query?userId="+e+"&page="+t+"&length="+r,method:"get"})}function c(e,t,r,o){return Object(n["a"])({url:"/server/group/user/exclude/page/query?userId="+e+"&queryName="+t+"&page="+r+"&length="+o,method:"get"})}function u(e,t){return Object(n["a"])({url:"/server/group/grant?userId="+e+"&serverGroupId="+t,method:"get"})}function d(e,t){return Object(n["a"])({url:"/server/group/revoke?userId="+e+"&serverGroupId="+t,method:"delete"})}function p(e){return Object(n["a"])({url:"/server/group/attribute/query?id="+e,method:"get"})}function g(e){return Object(n["a"])({url:"/server/group/attribute/save",method:"put",data:e})}},ec5e:function(e,t){ace.define("ace/snippets/yaml",["require","exports","module"],(function(e,t,r){"use strict";t.snippetText=void 0,t.scope="yaml"}))}}]);