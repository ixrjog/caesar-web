(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ab3ce82"],{"051c":function(t,e,n){var i=n("2164"),a=n("0925"),o=n("9688"),r=n("c8b6");t.exports=i?Object.defineProperties:function(t,e){o(t);var n,i=r(e),s=i.length,l=0;while(s>l)a.f(t,n=i[l++],e[n]);return t}},"058d":function(t,e){ace.define("ace/snippets/xml",["require","exports","module"],(function(t,e,n){"use strict";e.snippetText=void 0,e.scope="xml"}))},"0663":function(t,e,n){var i=n("79df"),a=n("1a97");t.exports=function(t){return i(a(t))}},"0696":function(t,e,n){ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,n){"use strict";var i=t("../lib/oop"),a=t("./text_highlight_rules").TextHighlightRules,o=function(t){var e="[_:a-zA-ZÀ-￿][-_:.a-zA-Z0-9À-￿]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+e+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:e},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+e+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"--\x3e",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+e+":)?"+e+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===o&&this.normalizeRules()};(function(){this.embedTagRules=function(t,e,n){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(<)("+n+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:e+"start"}]}),this.$rules[n+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(t,e,n){return n.splice(0),this.token}}],this.embedRules(t,e,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(</)("+n+"(?=\\s|>|$))",next:n+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(a.prototype),i.inherits(o,a),e.XmlHighlightRules=o})),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,n){"use strict";var i=t("../../lib/oop"),a=t("../behaviour").Behaviour,o=t("../../token_iterator").TokenIterator;t("../../lib/lang");function r(t,e){return t.type.lastIndexOf(e+".xml")>-1}var s=function(){this.add("string_dquotes","insertion",(function(t,e,n,i,a){if('"'==a||"'"==a){var s=a,l=i.doc.getTextRange(n.getSelectionRange());if(""!==l&&"'"!==l&&'"'!=l&&n.getWrapBehavioursEnabled())return{text:s+l+s,selection:!1};var c=n.getCursorPosition(),u=i.doc.getLine(c.row),d=u.substring(c.column,c.column+1),p=new o(i,c.row,c.column),f=p.getCurrentToken();if(d==s&&(r(f,"attribute-value")||r(f,"string")))return{text:"",selection:[1,1]};if(f||(f=p.stepBackward()),!f)return;while(r(f,"tag-whitespace")||r(f,"whitespace"))f=p.stepBackward();var m=!d||d.match(/\s/);if(r(f,"attribute-equals")&&(m||">"==d)||r(f,"decl-attribute-equals")&&(m||"?"==d))return{text:s+s,selection:[1,1]}}})),this.add("string_dquotes","deletion",(function(t,e,n,i,a){var o=i.doc.getTextRange(a);if(!a.isMultiLine()&&('"'==o||"'"==o)){var r=i.doc.getLine(a.start.row),s=r.substring(a.start.column+1,a.start.column+2);if(s==o)return a.end.column++,a}})),this.add("autoclosing","insertion",(function(t,e,n,i,a){if(">"==a){var s=n.getSelectionRange().start,l=new o(i,s.row,s.column),c=l.getCurrentToken()||l.stepBackward();if(!c||!(r(c,"tag-name")||r(c,"tag-whitespace")||r(c,"attribute-name")||r(c,"attribute-equals")||r(c,"attribute-value")))return;if(r(c,"reference.attribute-value"))return;if(r(c,"attribute-value")){var u=c.value.charAt(0);if('"'==u||"'"==u){var d=c.value.charAt(c.value.length-1),p=l.getCurrentTokenColumn()+c.value.length;if(p>s.column||p==s.column&&u!=d)return}}while(!r(c,"tag-name"))if(c=l.stepBackward(),"<"==c.value){c=l.stepForward();break}var f=l.getCurrentTokenRow(),m=l.getCurrentTokenColumn();if(r(l.stepBackward(),"end-tag-open"))return;var b=c.value;if(f==s.row&&(b=b.substring(0,s.column-m)),this.voidElements.hasOwnProperty(b.toLowerCase()))return;return{text:"></"+b+">",selection:[1,1]}}})),this.add("autoindent","insertion",(function(t,e,n,i,a){if("\n"==a){var r=n.getCursorPosition(),s=i.getLine(r.row),l=new o(i,r.row,r.column),c=l.getCurrentToken();if(c&&-1!==c.type.indexOf("tag-close")){if("/>"==c.value)return;while(c&&-1===c.type.indexOf("tag-name"))c=l.stepBackward();if(!c)return;var u=c.value,d=l.getCurrentTokenRow();if(c=l.stepBackward(),!c||-1!==c.type.indexOf("end-tag"))return;if(this.voidElements&&!this.voidElements[u]){var p=i.getTokenAt(r.row,r.column+1),f=(s=i.getLine(d),this.$getIndent(s)),m=f+i.getTabString();return p&&"</"===p.value?{text:"\n"+m+"\n"+f,selection:[1,m.length,1,m.length]}:{text:"\n"+m}}}}}))};i.inherits(s,a),e.XmlBehaviour=s})),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],(function(t,e,n){"use strict";var i=t("../../lib/oop"),a=(t("../../lib/lang"),t("../../range").Range),o=t("./fold_mode").FoldMode,r=t("../../token_iterator").TokenIterator,s=e.FoldMode=function(t,e){o.call(this),this.voidElements=t||{},this.optionalEndTags=i.mixin({},this.voidElements),e&&i.mixin(this.optionalEndTags,e)};i.inherits(s,o);var l=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};function c(t,e){return t.type.lastIndexOf(e+".xml")>-1}(function(){this.getFoldWidget=function(t,e,n){var i=this._getFirstTagInLine(t,n);return i?i.closing||!i.tagName&&i.selfClosing?"markbeginend"==e?"end":"":!i.tagName||i.selfClosing||this.voidElements.hasOwnProperty(i.tagName.toLowerCase())?"":this._findEndTagInLine(t,n,i.tagName,i.end.column)?"":"start":this.getCommentFoldWidget(t,n)},this.getCommentFoldWidget=function(t,e){return/comment/.test(t.getState(e))&&/<!-/.test(t.getLine(e))?"start":""},this._getFirstTagInLine=function(t,e){for(var n=t.getTokens(e),i=new l,a=0;a<n.length;a++){var o=n[a];if(c(o,"tag-open")){if(i.end.column=i.start.column+o.value.length,i.closing=c(o,"end-tag-open"),o=n[++a],!o)return null;for(i.tagName=o.value,i.end.column+=o.value.length,a++;a<n.length;a++)if(o=n[a],i.end.column+=o.value.length,c(o,"tag-close")){i.selfClosing="/>"==o.value;break}return i}if(c(o,"tag-close"))return i.selfClosing="/>"==o.value,i;i.start.column+=o.value.length}return null},this._findEndTagInLine=function(t,e,n,i){for(var a=t.getTokens(e),o=0,r=0;r<a.length;r++){var s=a[r];if(o+=s.value.length,!(o<i)&&c(s,"end-tag-open")&&(s=a[r+1],s&&s.value==n))return!0}return!1},this._readTagForward=function(t){var e=t.getCurrentToken();if(!e)return null;var n=new l;do{if(c(e,"tag-open"))n.closing=c(e,"end-tag-open"),n.start.row=t.getCurrentTokenRow(),n.start.column=t.getCurrentTokenColumn();else if(c(e,"tag-name"))n.tagName=e.value;else if(c(e,"tag-close"))return n.selfClosing="/>"==e.value,n.end.row=t.getCurrentTokenRow(),n.end.column=t.getCurrentTokenColumn()+e.value.length,t.stepForward(),n}while(e=t.stepForward());return null},this._readTagBackward=function(t){var e=t.getCurrentToken();if(!e)return null;var n=new l;do{if(c(e,"tag-open"))return n.closing=c(e,"end-tag-open"),n.start.row=t.getCurrentTokenRow(),n.start.column=t.getCurrentTokenColumn(),t.stepBackward(),n;c(e,"tag-name")?n.tagName=e.value:c(e,"tag-close")&&(n.selfClosing="/>"==e.value,n.end.row=t.getCurrentTokenRow(),n.end.column=t.getCurrentTokenColumn()+e.value.length)}while(e=t.stepBackward());return null},this._pop=function(t,e){while(t.length){var n=t[t.length-1];if(e&&n.tagName!=e.tagName){if(this.optionalEndTags.hasOwnProperty(n.tagName)){t.pop();continue}return null}return t.pop()}},this.getFoldWidgetRange=function(t,e,n){var i=this._getFirstTagInLine(t,n);if(!i)return this.getCommentFoldWidget(t,n)&&t.getCommentFoldRange(n,t.getLine(n).length);var o,s=i.closing||i.selfClosing,l=[];if(s){u=new r(t,n,i.end.column);var c={row:n,column:i.start.column};while(o=this._readTagBackward(u)){if(o.selfClosing){if(l.length)continue;return o.start.column+=o.tagName.length+2,o.end.column-=2,a.fromPoints(o.start,o.end)}if(o.closing)l.push(o);else if(this._pop(l,o),0==l.length)return o.start.column+=o.tagName.length+2,o.start.row==o.end.row&&o.start.column<o.end.column&&(o.start.column=o.end.column),a.fromPoints(o.start,c)}}else{var u=new r(t,n,i.start.column),d={row:n,column:i.start.column+i.tagName.length+2};i.start.row==i.end.row&&(d.column=i.end.column);while(o=this._readTagForward(u)){if(o.selfClosing){if(l.length)continue;return o.start.column+=o.tagName.length+2,o.end.column-=2,a.fromPoints(o.start,o.end)}if(o.closing){if(this._pop(l,o),0==l.length)return a.fromPoints(d,o.start)}else l.push(o)}}}}).call(s.prototype)})),ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml","ace/worker/worker_client"],(function(t,e,i){"use strict";var a=t("../lib/oop"),o=t("../lib/lang"),r=t("./text").Mode,s=t("./xml_highlight_rules").XmlHighlightRules,l=t("./behaviour/xml").XmlBehaviour,c=t("./folding/xml").FoldMode,u=t("../worker/worker_client").WorkerClient,d=function(){this.HighlightRules=s,this.$behaviour=new l,this.foldingRules=new c};a.inherits(d,r),function(){this.voidElements=o.arrayToMap([]),this.blockComment={start:"\x3c!--",end:"--\x3e"},this.createWorker=function(t){var e=new u(["ace"],n("275b"),"Worker");return e.attachToDocument(t.getDocument()),e.on("error",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/xml"}.call(d.prototype),e.Mode=d}))},"0714":function(t,e,n){"use strict";var i=n("b255"),a=n.n(i);a.a},"078b":function(t,e,n){"use strict";var i=n("f2df"),a=n("2164"),o=n("dc26"),r=n("b598"),s=n("b388"),l=n("0925").f,c=n("56a1"),u=o.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};c(p,u);var f=p.prototype=u.prototype;f.constructor=p;var m=f.toString,b="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(r(d,t))return"";var n=b?e.slice(7,-1):e.replace(h,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},"0831":function(t,e,n){"use strict";var i=n("4bf7"),a=n.n(i);a.a},"0925":function(t,e,n){var i=n("2164"),a=n("915f"),o=n("9688"),r=n("ef20"),s=Object.defineProperty;e.f=i?s:function(t,e,n){if(o(t),e=r(e,!0),o(n),a)try{return s(t,e,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"0970":function(t,e,n){"use strict";n.d(e,"k",(function(){return o})),n.d(e,"g",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"h",(function(){return f})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return b}));var i=n("9bd2"),a="/job";function o(t){return Object(i["a"])({url:a+"/ci/build/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/cd/build/page/query",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/ci/build",method:"post",data:t})}function l(t){return Object(i["a"])({url:a+"/ci/build/abort?ciBuildId="+t,method:"put"})}function c(t){return Object(i["a"])({url:a+"/cd/build",method:"post",data:t})}function u(t){return Object(i["a"])({url:a+"/ci/build/query?buildId="+t,method:"get"})}function d(t){return Object(i["a"])({url:a+"/cd/build/query?buildId="+t,method:"get"})}function p(t){return Object(i["a"])({url:a+"/ci/build/artifact/query",method:"post",data:t})}function f(t){return Object(i["a"])({url:a+"/cd/host/pattern/query?cdJobId="+t,method:"get"})}function m(t){return Object(i["a"])({url:a+"/ci/engine/correction?ciJobId="+t,method:"get"})}function b(t){return Object(i["a"])({url:a+"/cd/engine/correction?cdJobId="+t,method:"get"})}},"0dc4":function(t,e,n){"use strict";var i=n("544c"),a=n.n(i);a.a},"0eec":function(t,e,n){"use strict";var i=n("0663"),a=n("4c45"),o=n("b33e"),r=n("5eba"),s=n("2c76"),l="Array Iterator",c=r.set,u=r.getterFor(l);t.exports=s(Array,"Array",(function(t,e){c(this,{type:l,target:i(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},"0f0e":function(t,e,n){var i=n("2164"),a=n("0925"),o=n("d587");t.exports=i?function(t,e,n){return a.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"10ff":function(t,e,n){"use strict";var i=n("f2df"),a=n("a96e").indexOf,o=n("bcc8"),r=n("ac6d"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),u=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?s.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},"11fa":function(t,e,n){var i=n("ffb7"),a=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?a(n+e,0):o(n,e)}},1219:function(t,e,n){"use strict";var i=n("a225"),a=n.n(i);a.a},1379:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.changes.length&&t.changes.length>0,expression:"changes.length !== null && changes.length > 0"}],staticClass:"tag-group"},t._l(t.changes,(function(e){return n("div",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.commitId,placement:"top-start"}},[n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerOpenUrl(e)}}},[t._v(t._s(e.shortCommitId))])],1),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.commitMsg))])],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:null===t.changes||0===t.changes.length,expression:"changes === null || changes.length === 0"}]},[t._v("No Changes")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"变更详情",placement:"top-start"}},[n("i",{staticClass:"fa fa-comment-o",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},a=[],o=n("c276"),r={name:"BuildChanges",data:function(){return{}},props:["changes"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(t){o["a"].open(t.commitUrl)}}},s=r,l=(n("275c"),n("2877")),c=function(t){t.options.__source="src/components/opscloud/build/summary/BuildChanges.vue"},u=c,d=Object(l["a"])(s,i,a,!1,null,null,null);"function"===typeof u&&u(d);e["a"]=d.exports},"1a97":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1c71":function(t,e,n){"use strict";var i=n("f43e"),a=n.n(i);a.a},2164:function(t,e,n){var i=n("2f86");t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"243d":function(t,e,n){"use strict";var i=n("cd2a"),a=n.n(i);a.a},"257f":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"269b":function(t,e,n){},"275c":function(t,e,n){"use strict";var i=n("97ca"),a=n.n(i);a.a},"2a62":function(t,e,n){var i=n("1a97");t.exports=function(t){return Object(i(t))}},"2bae":function(t,e){e.f=Object.getOwnPropertySymbols},"2c76":function(t,e,n){"use strict";var i=n("f2df"),a=n("5cea"),o=n("dee4"),r=n("31d0"),s=n("a635"),l=n("0f0e"),c=n("bf6f"),u=n("447f"),d=n("f3cc"),p=n("b33e"),f=n("2e1e"),m=f.IteratorPrototype,b=f.BUGGY_SAFARI_ITERATORS,h=u("iterator"),g="keys",v="values",y="entries",x=function(){return this};t.exports=function(t,e,n,u,f,w,S){a(n,e,u);var k,_,O,T=function(t){if(t===f&&P)return P;if(!b&&t in C)return C[t];switch(t){case g:return function(){return new n(this,t)};case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this)}},j=e+" Iterator",D=!1,C=t.prototype,J=C[h]||C["@@iterator"]||f&&C[f],P=!b&&J||T(f),I="Array"==e&&C.entries||J;if(I&&(k=o(I.call(new t)),m!==Object.prototype&&k.next&&(d||o(k)===m||(r?r(k,m):"function"!=typeof k[h]&&l(k,h,x)),s(k,j,!0,!0),d&&(p[j]=x))),f==v&&J&&J.name!==v&&(D=!0,P=function(){return J.call(this)}),d&&!S||C[h]===P||l(C,h,P),p[e]=P,f)if(_={values:T(v),keys:w?P:T(g),entries:T(y)},S)for(O in _)!b&&!D&&O in C||c(C,O,_[O]);else i({target:e,proto:!0,forced:b||D},_);return _}},"2d6d":function(t,e,n){},"2d7f":function(t,e,n){"use strict";var i=n("9fbf"),a=n.n(i);a.a},"2e1e":function(t,e,n){"use strict";var i,a,o,r=n("dee4"),s=n("0f0e"),l=n("b598"),c=n("447f"),u=n("f3cc"),d=c("iterator"),p=!1,f=function(){return this};[].keys&&(o=[].keys(),"next"in o?(a=r(r(o)),a!==Object.prototype&&(i=a)):p=!0),void 0==i&&(i={}),u||l(i,d)||s(i,d,f),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},"2f17":function(t,e,n){var i,a,o=n("dc26"),r=n("bab5"),s=o.process,l=s&&s.versions,c=l&&l.v8;c?(i=c.split("."),a=i[0]+i[1]):r&&(i=r.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=r.match(/Chrome\/(\d+)/),i&&(a=i[1]))),t.exports=a&&+a},"2f86":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"30bc":function(t,e,n){"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);e.f=o?function(t){var e=a(this,t);return!!e&&e.enumerable}:i},"30d0":function(t,e,n){"use strict";var i=n("f2df"),a=n("5406").map,o=n("5dd2"),r=n("ac6d"),s=o("map"),l=r("map");i({target:"Array",proto:!0,forced:!s||!l},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"31d0":function(t,e,n){var i=n("9688"),a=n("b1d5");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return i(n),a(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},"336f":function(t,e,n){"use strict";var i=n("3ad6"),a=n.n(i);a.a},3407:function(t,e,n){var i=n("2f86"),a=/#|\.prototype\./,o=function(t,e){var n=s[r(t)];return n==c||n!=l&&("function"==typeof e?i(e):!!e)},r=o.normalize=function(t){return String(t).replace(a,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},3452:function(t,e,n){"use strict";var i=n("6889"),a=n.n(i);a.a},"34e1":function(t,e,n){var i=n("dc26"),a=n("b388"),o=i.document,r=a(o)&&a(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},"395e":function(t,e,n){"use strict";var i=n("7439"),a=n.n(i);a.a},"3ad6":function(t,e,n){},"3b66":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c}));var i=n("9bd2"),a="/dingtalk";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/update",method:"put",data:t})}function l(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}function c(t){return Object(i["a"])({url:a+"/test?id="+t,method:"get"})}},"3ba7":function(t,e,n){},"3ceb":function(t,e,n){var i=n("dc26"),a=n("5e32"),o=n("c6b7"),r=n("0f0e");for(var s in a){var l=i[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{r(c,"forEach",o)}catch(u){c.forEach=o}}},"3d8a":function(t,e,n){var i=n("f2df"),a=n("2164"),o=n("f825"),r=n("0663"),s=n("bc00"),l=n("9da3");i({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,i=r(t),a=s.f,c=o(i),u={},d=0;while(c.length>d)n=a(i,e=c[d++]),void 0!==n&&l(u,e,n);return u}})},"3ec4":function(t,e,n){var i=n("883b"),a=n("b671"),o=i("keys");t.exports=function(t){return o[t]||(o[t]=a(t))}},"3fb9":function(t,e){t.exports={}},4205:function(t,e,n){"use strict";var i=n("c835"),a=n.n(i);a.a},"447f":function(t,e,n){var i=n("dc26"),a=n("883b"),o=n("b598"),r=n("b671"),s=n("d7b1"),l=n("e8b2"),c=a("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||r;t.exports=function(t){return o(c,t)||(s&&o(u,t)?c[t]=u[t]:c[t]=d("Symbol."+t)),c[t]}},4622:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},4903:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"h",(function(){return s})),n.d(e,"l",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"i",(function(){return b})),n.d(e,"k",(function(){return h}));var i=n("9bd2"),a="/jenkins/tpl";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/update",method:"put",data:t})}function l(t){return Object(i["a"])({url:a+"/write",method:"put",data:t})}function c(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}function u(t){return Object(i["a"])({url:a+"/instance/query?instanceId="+t,method:"get"})}function d(t){return Object(i["a"])({url:a+"/read?id="+t,method:"get"})}function p(t){return Object(i["a"])({url:a+"/ci/job/page/query",method:"post",data:t})}function f(t){return Object(i["a"])({url:a+"/cd/job/page/query",method:"post",data:t})}function m(t){return Object(i["a"])({url:a+"/ci/job/upgrade?jobId="+t,method:"get"})}function b(t){return Object(i["a"])({url:a+"/cd/job/upgrade?jobId="+t,method:"get"})}function h(t){return Object(i["a"])({url:a+"/job/upgrade?tplId="+t,method:"get"})}},"4a64":function(t,e,n){"use strict";var i=n("f2df"),a=n("2f86"),o=n("618e"),r=n("b388"),s=n("2a62"),l=n("d885"),c=n("9da3"),u=n("7fd9"),d=n("5dd2"),p=n("447f"),f=n("2f17"),m=p("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",g=f>=51||!a((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=d("concat"),y=function(t){if(!r(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},x=!g||!v;i({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,i,a,o,r=s(this),d=u(r,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?r:arguments[e],y(o)){if(a=l(o.length),p+a>b)throw TypeError(h);for(n=0;n<a;n++,p++)n in o&&c(d,p,o[n])}else{if(p>=b)throw TypeError(h);c(d,p++,o)}return d.length=p,d}})},"4bf7":function(t,e,n){},"4c45":function(t,e,n){var i=n("447f"),a=n("9d0d"),o=n("0925"),r=i("unscopables"),s=Array.prototype;void 0==s[r]&&o.f(s,r,{configurable:!0,value:a(null)}),t.exports=function(t){s[r][t]=!0}},5406:function(t,e,n){var i=n("cbcc"),a=n("79df"),o=n("2a62"),r=n("d885"),s=n("7fd9"),l=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,u=4==t,d=6==t,p=5==t||d;return function(f,m,b,h){for(var g,v,y=o(f),x=a(y),w=i(m,b,3),S=r(x.length),k=0,_=h||s,O=e?_(f,S):n?_(f,0):void 0;S>k;k++)if((p||k in x)&&(g=x[k],v=w(g,k,y),t))if(e)O[k]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return k;case 2:l.call(O,g)}else if(u)return!1;return d?-1:c||u?u:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},"544c":function(t,e,n){},5505:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.executors.length&&t.executors.length>0,expression:"executors.length !== null && executors.length > 0"}],staticClass:"tag-group"},t._l(t.executors,(function(e){return n("div",{key:e.id},[n("b",{staticClass:"label"},[t._v(t._s(e.nodeName))]),null!==e.privateIp&&""!==e.privateIp?n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.privateIp))]):t._e()])})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:null===t.executors.length||0===t.executors.length,expression:"executors.length === null || executors.length === 0"}]},[t._v("No Executors")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[n("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)],1)},a=[],o={name:"BuildExecutors",data:function(){return{}},props:["executors"],filters:{},mounted:function(){},methods:{}},r=o,s=(n("0714"),n("2877")),l=function(t){t.options.__source="src/components/opscloud/build/summary/BuildExecutors.vue"},c=l,u=Object(s["a"])(r,i,a,!1,null,"a2a68b44",null);"function"===typeof c&&c(u);e["a"]=u.exports},5672:function(t,e,n){},"56a1":function(t,e,n){var i=n("b598"),a=n("f825"),o=n("bc00"),r=n("0925");t.exports=function(t,e){for(var n=a(e),s=r.f,l=o.f,c=0;c<n.length;c++){var u=n[c];i(t,u)||s(t,u,l(e,u))}}},"573a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("d2-container",[n("h1",[t._v(t._s(t.title))]),n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"我的应用",name:"application"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:7}},[n("el-card",{attrs:{shadow:"hover"}},[n("my-application-table",{ref:"myApplicationTable",on:{handlerSelApplication:t.handlerSelApplication}})],1)],1),n("el-col",{attrs:{span:17}},[n("announcement-carousel"),n("block-platform-status"),n("el-card",{directives:[{name:"show",rawName:"v-show",value:t.buildType,expression:"buildType"}],attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("All build jobs")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"45px"},attrs:{type:"primary"},on:{click:t.handlerSwitch}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}}),t._v("SWITCH ")])],1),n("my-ci-job-table",{ref:"myCiJobTable"})],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:!t.buildType,expression:"!buildType"}],attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("All deploy jobs")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"45px"},attrs:{type:"primary"},on:{click:t.handlerSwitch}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}}),t._v("SWITCH ")])],1),n("my-cd-job-table",{ref:"myCdJobTable"})],1),n("engine-chart",{staticStyle:{"margin-top":"10px"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"任务流水线",name:"taskPipeline"}},[n("my-task-pipeline")],1)],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[n("el-input",{staticClass:"input",attrs:{placeholder:"输入关键字模糊查询"},model:{value:t.queryParam.queryName,callback:function(e){t.$set(t.queryParam,"queryName",e)},expression:"queryParam.queryName"}}),n("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.fetchData}},[t._v("查询")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"key"}},[n("el-tag",{attrs:{"disable-transitions":"",type:"primary",plain:"",size:"mini"}},[t._v(t._s(e.row.applicationKey))])],1)],1)]}}])}),n("el-table-column",{attrs:{prop:"name",label:"应用名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.comment,placement:"top-start"}},[n("span",[t._v(t._s(e.row.name))])]),n("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return n("span",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0),n("el-rate",{on:{change:function(n){return t.handlerSetApplicationRate(e.row)}},model:{value:e.row.userPermission.rate,callback:function(n){t.$set(e.row.userPermission,"rate",n)},expression:"props.row.userPermission.rate"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{"split-button":"",type:"primary",plain:""},on:{click:function(n){return t.handlerRowSel(e.row)}}},[n("i",{staticClass:"el-icon-search"}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[n("span",{on:{click:function(n){return t.handlerRowPermissionEdit(e.row)}}},[t._v("权限配置")])])],1)],1)]}}])})],1),n("el-pagination",{attrs:{background:"","pager-count":5,layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),n("ApplicationDialog",{ref:"applicationDialog",attrs:{formStatus:t.formStatus},on:{closeDialog:t.fetchData}}),n("ApplicationPermissionDialog",{ref:"applicationPermissionDialog",attrs:{formStatus:t.formPermissionStatus},on:{closeDialog:t.fetchData}})],1)},r=[],s=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),l=n("5880"),c=n("b3eb"),u=n("81ce"),d=n("65ce");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"MyApplicationTable",data:function(){return{title:"应用管理",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{instanceId:"",queryName:""},formStatus:{visible:!1,operationType:!0,addTitle:"新增应用配置",updateTitle:"更新应用配置"},formPermissionStatus:{visible:!1}}},computed:f({},Object(l["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize(),this.fetchData()},components:{ApplicationDialog:c["a"],ApplicationPermissionDialog:u["a"]},methods:f({},Object(l["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},handlerRowSel:function(t){this.$emit("handlerSelApplication",t)},handlerRowEdit:function(t){this.formStatus.operationType=!1,this.formStatus.visible=!0,this.$refs.applicationDialog.initData(Object.assign({},t))},handlerRowPermissionEdit:function(t){this.formPermissionStatus.visible=!0,this.$refs.applicationPermissionDialog.initData(Object.assign({},t))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},handlerSetApplicationRate:function(t){var e=this,n={userPermissionId:t.userPermission.id,rate:t.userPermission.rate};Object(d["w"])(n).then((function(t){t.success&&e.fetchData()}))},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(d["o"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}})},b=m,h=(n("8956"),n("2877")),g=function(t){t.options.__source="src/components/opscloud/application/MyApplicationTable.vue"},v=g,y=Object(h["a"])(b,o,r,!1,null,null,null);"function"===typeof v&&v(y);var x=y.exports,w=n("3bff"),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[n("el-input",{staticClass:"input",attrs:{disabled:"",placeholder:"应用名称"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}}),n("el-input",{staticClass:"input",attrs:{placeholder:"输入任务名称查询"},model:{value:t.queryParam.queryName,callback:function(e){t.$set(t.queryParam,"queryName","string"===typeof e?e.trim():e)},expression:"queryParam.queryName"}}),n("el-checkbox",{staticClass:"input",on:{click:t.fetchData},model:{value:t.queryParam.showHide,callback:function(e){t.$set(t.queryParam,"showHide",e)},expression:"queryParam.showHide"}},[t._v("显示隐藏任务")]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{disabled:""===t.application},on:{click:t.fetchData}},[t._v("查询")]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{disabled:""===t.application},on:{click:t.handlerAdd}},[t._v("新建任务")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.jobKey,placement:"top-start"}},[n("span",[t._v(t._s(e.row.name))])]),n("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return n("span",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}])}),n("el-table-column",{attrs:{prop:"branch",label:"首选分支",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),n("b",[t._v(t._s(e.row.branch))])]}}])}),n("el-table-column",{attrs:{prop:"sonarQube",label:"代码质量",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableSonar&&"{}"!=JSON.stringify(e.row.sonarQube.measures)?n("div",[n("sonar-popover",{attrs:{sonarQube:e.row.sonarQube}})],1):t._e()]}}])}),n("el-table-column",{attrs:{prop:"env",label:"环境",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{style:{color:e.row.env.color},attrs:{"disable-transitions":""}},[t._v(t._s(e.row.env.envName))])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"最新构建",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",t._l(e.row.buildViews,(function(e){return n("el-button",{key:e.buildNumber,style:{backgroundColor:e.color,color:"#FFFFFF",width:"50px"}},[n("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("控制台")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.building,expression:"item.building"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerAbortBuild(e.executors)}}},[t._v("中止任务 ")])],1),n("el-form",[n("span",{directives:[{name:"show",rawName:"v-show",value:e.executors.length>0,expression:"item.executors.length > 0"}]},[n("el-tag",{attrs:{type:"primary"}},[t._v("构建日志 "),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerOpenViewBuildOutput(e.executors)}}},[n("span",{staticStyle:{color:"#535353"}},[t._v("查看")])])],1),n("el-divider"),t._l(e.executors,(function(e){return n("div",{key:e.id},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp)+" "),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerOpenXTerm(e)}}},[n("span",{staticStyle:{color:"#535353"}},[t._v("打开终端")])])],1)],1)}))],2),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.executors.length,expression:"item.executors.length === 0"}]},[t._v("No Executors")])])],1),n("span",{attrs:{slot:"reference"},slot:"reference"},[e.building?n("i",{staticClass:"el-icon-loading"}):t._e(),t._v(t._s(e.buildNumber))])],1)],1)})),1)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",{staticStyle:{"margin-right":"5px"}},[n("el-button",{attrs:{type:"primary",icon:"fa fa-play"},on:{click:function(n){return t.handlerRowRunBuild(e.row)}}}),0!==e.row.deploymentJobId?n("el-button",{attrs:{type:"primary",icon:"fa fa-cloud-upload"},on:{click:function(n){return t.handlerRowRunDeployment(e.row)}}}):t._e()],1),n("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(n){return t.handlerRowEdit(e.row)}}},[n("i",{staticClass:"el-icon-edit"}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"fa fa-plane"}},[n("span",{on:{click:function(n){return t.handlerRowEngineEdit(e.row)}}},[t._v("工作引擎")])]),n("el-dropdown-item",{attrs:{icon:"el-icon-edit"}},[n("span",{on:{click:function(n){return t.handlerRowCreateDeployment(e.row)}}},[t._v("新建部署")])]),n("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[n("span",{on:{click:function(n){return t.handlerRowPermissionEdit(e.row)}}},[t._v("权限配置")])])],1)],1)]}}])})],1),n("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),n("ciJobDialog",{ref:"ciJobDialog",attrs:{formStatus:t.formCiJobStatus},on:{closeDialog:t.fetchData}}),n("cdJobDialog",{ref:"cdJobDialog",attrs:{formStatus:t.formCdJobStatus},on:{closeDialog:t.fetchData}}),n("jobEngineDialog",{ref:"jobEngineDialog",attrs:{formStatus:t.formEngineStatus}}),n("h5JobBuildDialog",{ref:"h5JobBuildDialog",attrs:{formStatus:t.formH5BuildStatus}}),n("javaJobBuildDialog",{ref:"javaJobBuildDialog",attrs:{formStatus:t.formJavaBuildStatus}}),n("javaJobDeployDialog",{ref:"javaJobDeployDialog",attrs:{formStatus:t.formJavaDeployStatus}}),n("iOSJobBuildDialog",{ref:"iOSJobBuildDialog",attrs:{formStatus:t.formIOSBuildStatus}}),n("pythonJobBuildDialog",{ref:"pythonJobBuildDialog",attrs:{formStatus:t.formPythonBuildStatus}}),n("androidJobBuildDialog",{ref:"androidJobBuildDialog",attrs:{formStatus:t.formAndroidBuildStatus}}),n("androidReinforceJobBuildDialog",{ref:"androidReinforceJobBuildDialog",attrs:{formStatus:t.formAndroidReinforceBuildStatus}}),n("jenkinsNodeXTerm",{ref:"xtermDialog",attrs:{formStatus:t.formXtermStatus}}),n("viewJobBuildOutput",{ref:"viewJobBuildOutput",attrs:{formStatus:t.formBuildOutputStatus}}),n("ciJobPermissionDialog",{ref:"ciJobPermissionDialog",attrs:{formStatus:t.formPermissionStatus}})],1)},k=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"80%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},close:t.handlerExit}},[t._l(t.xterms,(function(e){return n("div",{key:e},[[n("el-col",{attrs:{span:24}},[n("el-alert",{staticStyle:{"margin-bottom":"5px"},attrs:{title:"常用命令",type:"success","show-icon":""}},[n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerSendCmd(0)}}},[t._v("[点击进入工作目录] cd "+t._s(t.executor.workspace)+" ")])],1),n("el-card",{staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{shadow:"hover","body-style":"padding: 2px"}},[n("div",{staticClass:"clearfix",staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",[t._v(" "+t._s(e))])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"退出",placement:"top-start"}},[n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerLogout(e)}}},[t._v(" Logout ")])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制会话",placement:"top-start"}},[n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"20px"},attrs:{type:"text"},on:{click:function(e){return t.handlerDuplicateSession()}}},[t._v("Duplicate ")])],1)],1),n("div",{staticClass:"xterm",attrs:{id:e}})])],1)]],2)})),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.handlerExit}},[t._v("关闭")])],1)],2)},O=[],T=(n("d81d"),n("b0c0"),n("1276"),n("c276")),j=(n("abb2"),n("fcf3")),D=n("47d0"),C=n("e232"),J="ws/xterm",P="XTERM",I={data:function(){return{title:"Web-XTerminal",socketURI:T["a"].wsUrl(J),executor:{},server:{},addonMap:[],xterms:[],xtermMap:{},timer:null,xtermSize:{rows:30},xtermTheme:{foreground:"#FFFFFF",background:"#606266",cursor:"help"}}},name:"JenkinsNodeXTerm",props:["formStatus"],mixins:[],mounted:function(){this.setXTermSetting()},beforeDestroy:function(){try{for(var t in this.socket.close(),this.xtermMap)this.xtermMap[t].dispose()}catch(e){}clearInterval(this.timer)},methods:{setXTermSetting:function(){var t=this;Object(C["a"])(P).then((function(e){if(e.success)try{t.xtermTheme.foreground=e.body["XTERM_FOREGROUND"],t.xtermTheme.background=e.body["XTERM_BACKGROUND"],t.xtermSize.rows=e.body["XTERM_ROWS"]||30}catch(n){}else t.$message.error(e.msg)}))},handlerExit:function(){this.handlerClose();try{for(var t in this.socket.close(),this.xtermMap)this.xtermMap[t].dispose()}catch(e){}this.formStatus.visible=!1},initData:function(t){this.executor=t,this.server=t.server,this.handlerLogin()},setTimer:function(){var t=this;this.timer=setInterval((function(){t.handlerSSHHeartbeat()}),1e4)},handlerSSHHeartbeat:function(){var t={status:"HEARTBEAT"};try{this.socketOnSend(JSON.stringify(t))}catch(e){}},initTermInstance:function(t){var e=this,n=t.name,i=new j["Terminal"]({rendererType:"canvas",allowTransparency:!0,fontSize:11,rows:this.xtermSize.rows,theme:this.xtermTheme,termName:"xterm",visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,cancelEvents:!1,cursorStyle:"underline",cursorBlink:!0,convertEol:!0});e.addonMap[n]=new D["FitAddon"],i.loadAddon(e.addonMap[n]),i.open(document.getElementById(n)),e.addonMap[n].fit(),i.focus(),i.onData((function(t){var i={data:t,status:"COMMAND",instanceId:n};e.socketOnSend(JSON.stringify(i))})),this.xtermMap[n]=i},handlerResize:function(){for(var t in this.xtermMap){this.addonMap[t].fit();var e={status:"RESIZE",instanceId:t,xtermWidth:7*this.addonMap[t]._terminal.cols,xtermHeight:document.getElementById(t).clientHeight};this.socketOnSend(JSON.stringify(e)),this.xtermMap[t].scrollToBottom()}},handlerDuplicateSession:function(){var t=this,e=this.server.name+"#"+T["a"].uuid(),n={status:"DUPLICATE_SESSION_IP",duplicateInstanceId:this.server.name,token:T["a"].cookies.get("token"),instanceId:e,xtermWidth:7*this.addonMap[e.split("#")[0]]._terminal.cols,xtermHeight:document.getElementById(e.split("#")[0]).clientHeight};this.xterms.push(e);var i={name:e,ip:this.server.privateIp};this.$nextTick((function(){t.initTermInstance(i),t.socketOnSend(JSON.stringify(n))}))},handlerLogout:function(t){var e={status:"LOGOUT",instanceId:t};this.socketOnSend(JSON.stringify(e));var n=this.xtermMap[t];n.dispose(),delete this.xtermMap[t],this.xterms=this.xterms.filter((function(e){return e!==t})),this.$message.warning(t+"终端已关闭")},handlerClose:function(){var t={status:"CLOSE"};this.socketOnSend(JSON.stringify(t)),this.xterms=[],this.xtermMap={},clearInterval(this.timer)},handlerLogin:function(){this.xtermMap={},this.initSocket(),this.setTimer()},initSocket:function(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError(),this.socketOnMessage()},socketOnOpen:function(){var t=this;this.socket.onopen=function(){try{t.xterms=[],t.xterms.push(t.server.name),t.$nextTick((function(){t.initTermInstance(t.server);var e={token:T["a"].cookies.get("token"),instanceId:t.server.name,ip:t.server.privateIp,status:"INITIAL_IP",xtermWidth:0,xtermHeight:308};t.socketOnSend(JSON.stringify(e)),t.$nextTick((function(){t.handlerResize()}))}))}catch(e){t.$message.error("登录失败，未选择服务器或其它原因")}}},socketOnClose:function(){this.socket.onclose=function(){}},socketOnError:function(){this.socket.onerror=function(){}},socketOnSend:function(t){this.socket.send(t)},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){var n=JSON.parse(e.data),i=t;n.map((function(t){i.xtermMap[t.instanceId].write(t.output)}))}},handlerSendCmd:function(){for(var t in this.xtermMap){var e={data:"cd "+this.executor.workspace+"\n",status:"COMMAND",instanceId:t};this.socketOnSend(JSON.stringify(e))}}}},N=I,B=(n("0831"),function(t){t.options.__source="src/components/opscloud/xterm/JenkinsNodeXTerm.vue"}),E=B,L=Object(h["a"])(N,_,O,!1,null,"7fe402c9",null);"function"===typeof E&&E(L);var A=L.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"任务配置",name:"job"}},[n("el-form",{attrs:{model:t.application}},[n("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),n("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}})],1)],1),n("el-divider"),n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth,required:""}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"任务key","label-width":t.labelWidth,required:""}},[n("el-input",{attrs:{placeholder:"请输入内容(只允许使用a-zA-Z、0-9、-)",disabled:!t.formStatus.operationType},model:{value:t.ciJob.jobKey,callback:function(e){t.$set(t.ciJob,"jobKey",e)},expression:"ciJob.jobKey"}})],1),n("el-form-item",{attrs:{label:"任务类型","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.ciJob.jobType,callback:function(e){t.$set(t.ciJob,"jobType","string"===typeof e?e.trim():e)},expression:"ciJob.jobType"}},t._l(t.jobTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"代码仓库","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择"},on:{change:t.handlerSelScm},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1),n("el-checkbox",{staticStyle:{"margin-left":"20px"},on:{change:t.handlerSelScm},model:{value:t.ciJob.enableTag,callback:function(e){t.$set(t.ciJob,"enableTag",e)},expression:"ciJob.enableTag"}},[n("span",[t._v("允许标签(tag)构建")])])],1),n("el-form-item",{attrs:{label:"首选分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择",disabled:""===t.branchOptions||0===t.branchOptions.length},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"刷新分支",placement:"top"}},[n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.ciJob.scmMemberId,loading:t.branchesLoading},on:{click:t.handlerSelScm}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"创建默认发布分支",placement:"top"}},[n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.ciJob.scmMemberId,loading:t.branchesLoading},on:{click:t.handlerCreateBranch}},[n("i",{staticClass:"fa fa-git",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-form-item",{attrs:{label:"任务环境","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.ciJob.envType,callback:function(e){t.$set(t.ciJob,"envType","string"===typeof e?e.trim():e)},expression:"ciJob.envType"}},t._l(t.envTypeOptions,(function(t){return n("el-option",{key:t.envType,attrs:{label:t.envName,value:t.envType}})})),1)],1),n("el-form-item",{attrs:{label:"质量管理","label-width":t.labelWidth,required:""}},[n("el-checkbox",{model:{value:t.ciJob.enableSonar,callback:function(e){t.$set(t.ciJob,"enableSonar",e)},expression:"ciJob.enableSonar"}},[t._v("启用SonarQube")])],1),n("el-form-item",{attrs:{label:"隐藏任务","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.ciJob.hide,callback:function(e){t.$set(t.ciJob,"hide","string"===typeof e?e.trim():e)},expression:"ciJob.hide"}},t._l(t.hideOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.ciJob.comment,callback:function(e){t.$set(t.ciJob,"comment","string"===typeof e?e.trim():e)},expression:"ciJob.comment"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"存储配置",name:"storage"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"对象存储(oss)","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","remote-method":t.getOSSBucket,loading:t.bucketLoading},model:{value:t.ciJob.ossBucketId,callback:function(e){t.$set(t.ciJob,"ossBucketId","string"===typeof e?e.trim():e)},expression:"ciJob.ossBucketId"}},t._l(t.bucketOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),n("el-tab-pane",{attrs:{label:"通知配置",name:"dingtalk"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"钉钉","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","remote-method":t.getDingtalk},model:{value:t.ciJob.dingtalkId,callback:function(e){t.$set(t.ciJob,"dingtalkId","string"===typeof e?e.trim():e)},expression:"ciJob.dingtalkId"}},t._l(t.dingtalkOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"通知类型","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.ciJob.atAll,callback:function(e){t.$set(t.ciJob,"atAll","string"===typeof e?e.trim():e)},expression:"ciJob.atAll"}},t._l(t.atAllOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),n("el-tab-pane",{attrs:{label:"模版配置",name:"template"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"克隆模版","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择当前应用下的任务",remote:"","value-key":"id","remote-method":t.getCiJob},model:{value:t.cloneCiJob,callback:function(e){t.cloneCiJob="string"===typeof e?e.trim():e},expression:"cloneCiJob"}},t._l(t.ciJobOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"克隆选中任务模版",placement:"top"}},[n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",disabled:""===t.cloneCiJob},on:{click:t.handlerCloneJobTpl}},[n("i",{staticClass:"fa fa-clone",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-form-item",{attrs:{label:"任务模版","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择模版",remote:"","value-key":"id","remote-method":t.getJobTpl},on:{change:t.handlerSelTpl},model:{value:t.ciJob.jobTpl,callback:function(e){t.$set(t.ciJob,"jobTpl",e)},expression:"ciJob.jobTpl"}},t._l(t.jobTplOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑模版参数",placement:"top"}},[n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.handlerEditParameters}},[n("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])],1)],1),t.editing?t._e():n("el-form-item",{attrs:{label:"参数详情","label-width":t.labelWidth}},[n("parameters-view",{attrs:{parameters:t.ciJob.parameters}})],1),t.editing?n("el-form-item",{attrs:{label:"模版参数","label-width":t.labelWidth,required:""}},["{}"!=JSON.stringify(t.ciJob)?n("editor",{attrs:{lang:"yaml",theme:"chrome",width:"100%",height:"400"},on:{init:t.editorInit},model:{value:t.ciJob.parameterYaml,callback:function(e){t.$set(t.ciJob,"parameterYaml",e)},expression:"ciJob.parameterYaml"}}):t._e()],1):t._e()],1)],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("取消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},R=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{attrs:{shadow:"hover"}},t._l(t.parameters,(function(e,i){return n("div",{key:i},[n("div",[n("el-tag",[t._v(t._s(i))])],1),n("span",{staticStyle:{"margin-top":"2px","margin-bottom":"5px"}},[t._v(t._s(e))]),n("el-divider")],1)})),0)],1)},z=[],q={name:"ParamView",data:function(){return{}},props:["parameters"],methods:{}},W=q,U=function(t){t.options.__source="src/components/opscloud/application/param/ParametersView.vue"},G=U,F=Object(h["a"])(W,$,z,!1,null,"5358f9a9",null);"function"===typeof G&&G(F);var H=F.exports,V=n("c496"),X=n("3b66"),K=n("4903"),Y=n("df79"),Q=n("9bd2"),Z="/application/ci/job";function tt(t){return Object(Q["a"])({url:Z+"/page/query",method:"post",data:t})}function et(t){return Object(Q["a"])({url:Z+"/add",method:"post",data:t})}function nt(t){return Object(Q["a"])({url:Z+"/update",method:"put",data:t})}function it(t){return Object(Q["a"])({url:Z+"/engine/create?ciJobId="+t,method:"put"})}function at(t){return Object(Q["a"])({url:Z+"/engine/query?ciJobId="+t,method:"get"})}var ot=[{value:!1,label:"否"},{value:!0,label:"是"}],rt=[{value:!1,label:"自己"},{value:!0,label:"所有人"}],st=[{value:!1,label:"否"},{value:!0,label:"是"}],lt=[{value:"HTML5",label:"HTML5"},{value:"IOS",label:"iOS"},{value:"ANDROID",label:"Android"},{value:"JAVA",label:"Java"},{value:"PYTHON",label:"Python"}],ct={data:function(){return{activeName:"job",application:{},ciJob:{},jobTpl:{},labelWidth:"150px",options:{stripe:!0},queryParam:{instanceId:"",queryName:""},jobTypeOptions:lt,envTypeOptions:[],enableTagOptions:ot,atAllOptions:rt,hideOptions:st,branchesLoading:!1,branchOptions:[],dingtalkOptions:[],jobTplLoading:!1,jobTplOptions:[],bucketOptions:[],bucketLoading:!1,ciJobOptions:[],cloneCiJob:"",editing:!1}},name:"CiJobDialog",props:["formStatus"],components:{editor:n("7c9e"),ParametersView:H},mounted:function(){this.getEnvType()},beforeDestroy:function(){},methods:{editorInit:function(){n("2099"),n("2968"),n("0696"),n("95b8"),n("ec5e"),n("058d")},closeDialog:function(){this.ciJob={},this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t,e){this.branchOptions=[],this.dingtalkOptions=[],this.jobTplOptions=[],this.bucketOptions=[],this.activeName="job",this.application=t,this.ciJob=e,this.formStatus.operationType?this.editing=!0:(this.getBranches(),this.editing=!1),null===this.ciJob.dingtalk?this.getDingtalk(""):this.dingtalkOptions.push(this.ciJob.dingtalk),null===this.ciJob.jobTpl?(this.getJobTpl(""),this.getCiJob("")):this.jobTplOptions.push(this.ciJob.jobTpl),null===this.ciJob.bucket?this.getOSSBucket(""):this.bucketOptions.push(this.ciJob.bucket)},getCiJob:function(t){var e=this,n={queryName:t,applicationId:this.application.id,extend:1,page:1,length:10};tt(n).then((function(t){e.ciJobOptions=t.body.data}))},handlerEditParameters:function(){this.editing=!this.editing},handlerCloneJobTpl:function(){this.jobTplOptions=[],this.jobTplOptions.push(this.cloneCiJob.jobTpl),this.ciJob.jobTpl=this.cloneCiJob.jobTpl,this.ciJob.parameterYaml=this.cloneCiJob.parameterYaml},handlerSelTpl:function(){""===this.ciJob.parameterYaml&&(this.ciJob.parameterYaml=this.ciJob.jobTpl.parameterYaml)},getOSSBucket:function(t){var e=this;this.bucketLoading=!0;var n={queryName:t,isActive:!0,extend:1,page:1,length:10};Object(Y["b"])(n).then((function(t){e.bucketOptions=t.body.data,e.bucketLoading=!1}))},getDingtalk:function(t){var e=this,n={queryName:t,extend:1,page:1,length:10};Object(X["c"])(n).then((function(t){e.dingtalkOptions=t.body.data}))},getJobTpl:function(t){var e=this;this.jobTplLoading=!0;var n={queryName:t,extend:1,page:1,length:10};Object(K["f"])(n).then((function(t){e.jobTplOptions=t.body.data,e.jobTplLoading=!1}))},handlerSelScm:function(){""!==this.ciJob.scmMemberId&&this.getBranches()},handlerCreateBranch:function(){""!==this.ciJob.scmMemberId&&this.createBranches()},createBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId};Object(d["e"])(e).then((function(e){t.getBranches()}))},getBranches:function(){var t=this;this.branchesLoading=!0;var e={ciJobId:this.ciJob.id,scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getEnvType:function(){var t=this;Object(V["c"])("","",1,20).then((function(e){t.envTypeOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.ciJob);t.formStatus.operationType?et(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()})):nt(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()}))}),600)}}},ut=ct,dt=function(t){t.options.__source="src/components/opscloud/application/CiJobDialog.vue"},pt=dt,ft=Object(h["a"])(ut,M,R,!1,null,null,null);"function"===typeof pt&&pt(ft);var mt=ft.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"任务配置",name:"job"}},[n("el-form",{attrs:{model:t.application}},[n("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),n("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}})],1)],1),n("el-divider"),n("el-form",{attrs:{model:t.cdJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth,required:""}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),n("el-form-item",{attrs:{label:"任务key","label-width":t.labelWidth,required:""}},[n("el-input",{attrs:{placeholder:"请输入内容(只允许使用a-zA-Z、0-9、-)",disabled:!t.formStatus.operationType},model:{value:t.cdJob.jobKey,callback:function(e){t.$set(t.cdJob,"jobKey",e)},expression:"cdJob.jobKey"}})],1),n("el-form-item",{attrs:{label:"任务类型","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":""},model:{value:t.cdJob.jobType,callback:function(e){t.$set(t.cdJob,"jobType","string"===typeof e?e.trim():e)},expression:"cdJob.jobType"}},t._l(t.jobTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._e(),n("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.cdJob.comment,callback:function(e){t.$set(t.cdJob,"comment","string"===typeof e?e.trim():e)},expression:"cdJob.comment"}})],1)],1)],1),n("el-tab-pane",{attrs:{label:"模版配置",name:"template"}},[n("el-form",{attrs:{model:t.cdJob}},[n("el-form-item",{attrs:{label:"任务模版","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",remote:"","value-key":"id","remote-method":t.getJobTpl},on:{change:t.handlerSelTpl},model:{value:t.cdJob.jobTpl,callback:function(e){t.$set(t.cdJob,"jobTpl",e)},expression:"cdJob.jobTpl"}},t._l(t.jobTplOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑模版参数",placement:"top"}},[n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary"},on:{click:t.handlerEditParameters}},[n("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}})])],1)],1),t.editing?t._e():n("el-form-item",{attrs:{label:"参数详情","label-width":t.labelWidth}},[n("parameters-view",{attrs:{parameters:t.cdJob.parameters}})],1),t.editing?n("el-form-item",{attrs:{label:"模版参数","label-width":t.labelWidth,required:""}},["{}"!=JSON.stringify(t.cdJob)?n("editor",{attrs:{lang:"yaml",theme:"chrome",width:"100%",height:"400"},on:{init:t.editorInit},model:{value:t.cdJob.parameterYaml,callback:function(e){t.$set(t.cdJob,"parameterYaml",e)},expression:"cdJob.parameterYaml"}}):t._e()],1):t._e()],1)],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("取消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},ht=[],gt="/application/cd/job";function vt(t){return Object(Q["a"])({url:gt+"/page/query",method:"post",data:t})}function yt(t){return Object(Q["a"])({url:gt+"/add",method:"post",data:t})}function xt(t){return Object(Q["a"])({url:gt+"/update",method:"put",data:t})}function wt(t){return Object(Q["a"])({url:gt+"/engine/create?cdJobId="+t,method:"put"})}function St(t){return Object(Q["a"])({url:gt+"/engine/query?cdJobId="+t,method:"get"})}var kt=[{value:"ANDROID_REINFORCE",label:"AndroidReinforce"},{value:"JAVA_DEPLOYMENT",label:"JavaDeployment"}],_t={data:function(){return{activeName:"job",application:{},cdJob:{},jobTpl:{},labelWidth:"150px",options:{stripe:!0},queryParam:{instanceId:"",queryName:""},jobTypeOptions:kt,envTypeOptions:[],jobTplLoading:!1,jobTplOptions:[],editing:!1}},name:"CdJobDialog",props:["formStatus"],components:{editor:n("7c9e"),ParametersView:H},mounted:function(){this.getEnvType()},beforeDestroy:function(){},methods:{editorInit:function(){n("2099"),n("2968"),n("0696"),n("95b8"),n("ec5e"),n("058d")},closeDialog:function(){this.cdJob={},this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t,e){this.cdJob={},this.jobTplOptions=[],this.activeName="job",this.application=t,this.cdJob=e,null===this.cdJob.jobTpl?this.getJobTpl(""):this.jobTplOptions.push(this.cdJob.jobTpl),this.formStatus.operationType?this.editing=!0:this.editing=!1},getJobTpl:function(t){var e=this;this.jobTplLoading=!0;var n={queryName:t,extend:1,page:1,length:10};Object(K["f"])(n).then((function(t){e.jobTplOptions=t.body.data,e.jobTplLoading=!1}))},handlerEditParameters:function(){this.editing=!this.editing},handlerSelTpl:function(){""===this.cdJob.parameterYaml&&(this.cdJob.parameterYaml=this.cdJob.jobTpl.parameterYaml)},getEnvType:function(){var t=this;Object(V["c"])("","",1,20).then((function(e){t.envTypeOptions=e.body.data}))},handleClick:function(){this.$emit("input",!this.value)},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.cdJob);t.formStatus.operationType?yt(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()})):xt(e).then((function(e){t.$message({message:"成功",type:"success"}),t.closeDialog()}))}),600)}}},Ot=_t,Tt=function(t){t.options.__source="src/components/opscloud/application/CdJobDialog.vue"},jt=Tt,Dt=Object(h["a"])(Ot,bt,ht,!1,null,null,null);"function"===typeof jt&&jt(Dt);var Ct=Dt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("构建引擎")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.creatingBuildEngine},on:{click:t.handlerBuildEngineCreate}},[t._v("创建工作引擎 ")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"5px"},attrs:{type:"text",loading:t.correctingBuildEngine},on:{click:t.handlerBuildEngineCorrection}},[t._v("校正工作引擎 ")])],1),n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.buildEngineLoading,expression:"buildEngineLoading"}],attrs:{data:t.buildEngines}},[n("el-table-column",{attrs:{prop:"jenkinsInstance",label:"工作引擎实例名称",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.jenkinsInstance.name))])]}}])}),n("el-table-column",{attrs:{prop:"lastBuildNumber",label:"最后构建",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.lastBuildUrl,target:"_blank"}},[n("el-tag",[t._v(t._s(e.row.lastBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.jobUrl,target:"_blank"}},[n("el-tag",[t._v(t._s(e.row.name))])],1)]}}])}),t._e()],1)],1)],1),n("el-card",{directives:[{name:"show",rawName:"v-show",value:null!==t.job.cdJobId,expression:"job.cdJobId !== null"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"},attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("部署引擎")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",loading:t.creatingDeploymentEngine},on:{click:t.handlerDeploymentEngineCreate}},[t._v("创建工作引擎 ")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"5px"},attrs:{type:"text",loading:t.correctingDeploymentEngine},on:{click:t.handlerDeploymentEngineCorrection}},[t._v("校正工作引擎 ")])],1),n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.deploymentEngineLoading,expression:"deploymentEngineLoading"}],attrs:{data:t.deploymentEngines}},[n("el-table-column",{attrs:{prop:"jenkinsInstance",label:"工作引擎实例名称",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.jenkinsInstance.name))])]}}])}),n("el-table-column",{attrs:{prop:"lastBuildNumber",label:"最后构建",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.lastBuildUrl,target:"_blank"}},[n("el-tag",[t._v(t._s(e.row.lastBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.jobUrl,target:"_blank"}},[n("el-tag",[t._v(t._s(e.row.name))])],1)]}}])}),t._e()],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},Pt=[],It=n("0970"),Nt={data:function(){return{title:"工作引擎配置详情",job:"",labelWidth:"150px",options:{stripe:!0},buildEngines:[],buildEngineLoading:!1,creatingBuildEngine:!1,correctingBuildEngine:!1,deploymentEngines:[],deploymentEngineLoading:!1,creatingDeploymentEngine:!1,correctingDeploymentEngine:!1}},name:"JobEngineDialog",props:["formStatus"],components:{},mounted:function(){},methods:{closeDialog:function(){this.buildEngines=[],this.formStatus.visible=!1,this.$emit("closeDialog")},initData:function(t){this.job={ciJobId:t.ciJobId,cdJobId:t.cdJobId},this.fetchBuildEngineData(),null!==this.job.cdJobId&&this.fetchDeploymentEngineData()},handlerBuildEngineCreate:function(){var t=this;this.creatingBuildEngine=!0,it(this.job.ciJobId).then((function(e){t.creatingBuildEngine=!1,t.fetchBuildEngineData()}))},handlerBuildEngineCorrection:function(){var t=this;this.correctingBuildEngine=!0,Object(It["d"])(this.job.ciJobId).then((function(e){t.correctingBuildEngine=!1,t.fetchBuildEngineData()}))},handlerDeploymentEngineCreate:function(){var t=this;this.creatingDeploymentEngine=!0,wt(this.job.cdJobId).then((function(e){t.creatingDeploymentEngine=!1,t.fetchDeploymentEngineData()}))},handlerDeploymentEngineCorrection:function(){var t=this;this.correctingDeploymentEngine=!0,Object(It["e"])(this.job.cdJobId).then((function(e){t.correctingDeploymentEngine=!1,t.fetchDeploymentEngineData()}))},handleClick:function(){this.$emit("input",!this.value)},fetchBuildEngineData:function(){var t=this;this.buildEngineLoading=!0,at(this.job.ciJobId).then((function(e){t.buildEngines=e.body,t.buildEngineLoading=!1}))},fetchDeploymentEngineData:function(){var t=this;this.deploymentEngineLoading=!0,St(this.job.cdJobId).then((function(e){t.deploymentEngines=e.body,t.deploymentEngineLoading=!1}))}}},Bt=Nt,Et=(n("adc0"),function(t){t.options.__source="src/components/opscloud/application/JobEngineDialog.vue"}),Lt=Et,At=Object(h["a"])(Bt,Jt,Pt,!1,null,null,null);"function"===typeof Lt&&Lt(At);var Mt=At.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog,width:"80%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("el-form",[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"xterm",attrs:{id:"outputXterm"}})])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},$t=[],zt="ws/job/output",qt="XTERM",Wt={name:"ViewJobBuildOutput",data:function(){return{title:"构建日志详情",socketURI:T["a"].wsUrl(zt),timer:null,initParam:{buildType:"",buildId:""},term:null,xtermSize:{rows:30},labelWidth:"100px",xtermTheme:{foreground:"#FFFFFF",background:"#606266",cursor:"help"}}},props:["formStatus"],components:{},mounted:function(){this.setXTermSetting()},beforeDestroy:function(){},methods:{setXTermSetting:function(){var t=this;Object(C["a"])(qt).then((function(e){if(e.success)try{t.xtermTheme.foreground=e.body["XTERM_FOREGROUND"],t.xtermTheme.background=e.body["XTERM_BACKGROUND"]}catch(n){}else t.$message.error(e.msg)}))},setTimer:function(){var t=this;this.timer=setInterval((function(){t.handlerHeartbeat()}),1e4)},initSocket:function(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError(),this.socketOnMessage(),this.setTimer()},closeDialog:function(){null!==this.socket&&this.socket.close(),clearInterval(this.timer),null!==this.term&&(this.term.clear(),this.term.dispose(),this.term=null),this.formStatus.visible=!1},initLogOutput:function(){null!==this.term&&this.term.dispose();var t=new j["Terminal"]({rendererType:"canvas",allowTransparency:!0,fontSize:11,rows:this.xtermSize.rows,theme:this.xtermTheme,termName:"xterm",visualBell:!1,popOnBell:!1,scrollback:5e3,screenKeys:!1,debug:!1,cancelEvents:!1,cursorStyle:"bar",cursorBlink:!1,convertEol:!0,disableStdin:!0}),e=new D["FitAddon"];t.loadAddon(e),t.open(document.getElementById("outputXterm")),e.fit(),t.focus(),this.term=t},initData:function(t,e){var n=this;this.initParam={buildType:t,buildId:e},setTimeout((function(){n.initSocket()}),500)},socketOnOpen:function(){var t=this;this.socket.onopen=function(){try{t.$nextTick((function(){t.initLogOutput();var e={status:"INITIAL",buildType:t.initParam.buildType,buildId:t.initParam.buildId};t.socketOnSend(JSON.stringify(e))}))}catch(e){}}},socketOnClose:function(){var t=this;this.socket.onclose=function(){null!==t.socket&&t.socket.close(),clearInterval(t.timer)}},socketOnError:function(){this.socket.onerror=function(){}},socketOnSend:function(t){this.socket.send(t)},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){t.term.write(e.data)}},handlerHeartbeat:function(){var t={status:"HEARTBEAT"};try{this.socketOnSend(JSON.stringify(t))}catch(e){}},handleClick:function(){this.$emit("input",!this.value)}}},Ut=Wt,Gt=function(t){t.options.__source="src/components/opscloud/application/ViewJobBuildOutput.vue"},Ft=Gt,Ht=Object(h["a"])(Ut,Rt,$t,!1,null,null,null);"function"===typeof Ft&&Ft(Ht);var Vt=Ht.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[n("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?n("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-branch",{attrs:{branch:t.row.branch}})]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-status",{attrs:{build:t.row}})]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),n("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),n("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,isRollback:t.row.isRollback,buildStatus:t.row.buildStatus}}),n("build-commit",{attrs:{commit:t.row.commitDetails}}),n("build-changes",{attrs:{changes:t.row.changes}}),n("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),n("build-executors",{attrs:{executors:t.row.executors}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("build-operation",{attrs:{build:e.row,job:t.ciJob}})]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Kt=[],Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-alert",{staticStyle:{"margin-bottom":"5px"},attrs:{title:"Commit",type:"success","show-icon":"",closable:!1}},[n("span",[t._v(t._s(t.commit.commitMessage))]),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerOpenUrl(1)}}},[t._v("[点击查看详情] "+t._s(t.commit.commit)+" ")])],1),t._e()],1)},Qt=[],Zt={name:"ExecuteCommit",data:function(){return{}},props:["commit"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(){T["a"].open(this.commit.commitUrl)}}},te=Zt,ee=(n("336f"),function(t){t.options.__source="src/components/opscloud/build/execute/ExecuteCommit.vue"}),ne=ee,ie=Object(h["a"])(te,Yt,Qt,!1,null,"65f6f7cc",null);"function"===typeof ne&&ne(ie);var ae=ie.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.handlerOpenUrl()}}},[t._v(t._s(""!==t.commit.commit?t.commit.commit:"缺省")+" ")])],1),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"commit",placement:"top-start"}},[n("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},re=[],se={name:"BuildCommit",data:function(){return{}},props:["commit"],filters:{},mounted:function(){},methods:{handlerOpenUrl:function(){T["a"].open(this.commit.commitUrl)}}},le=se,ce=(n("8a7d"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildCommit.vue"}),ue=ce,de=Object(h["a"])(le,oe,re,!1,null,"2a0ec080",null);"function"===typeof ue&&ue(de);var pe=de.exports,fe=n("ec44"),me=n("822b"),be=n("877f"),he=n("5505"),ge=n("1379"),ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-tag",{directives:[{name:"show",rawName:"v-show",value:null!==t.isRollback&&t.isRollback,expression:"isRollback !== null && isRollback"}],staticStyle:{"margin-right":"10px"},attrs:{effect:"dark",type:"danger"}},[t._v("回滚版本 ")]),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:""===t.versionDesc?"没有版本说明":t.versionDesc,placement:"top-start"}},[n("el-tag",{attrs:{effect:"dark",type:t._f("getBuildStatusType")(t.buildStatus)}},[t._v(t._s(t.versionName))])],1)],1),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"版本",placement:"top-start"}},[n("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},ye=[];function xe(t){switch(t){case"FAILURE":return"danger";case"SUCCESS":return"success";case"":return"info";default:return"info"}}var we={name:"BuildVersion",data:function(){return{}},props:["versionName","versionDesc","buildStatus","isRollback"],filters:{getBuildStatusType:xe},mounted:function(){},methods:{}},Se=we,ke=(n("61df"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildVersion.vue"}),_e=ke,Oe=Object(h["a"])(Se,ve,ye,!1,null,"452ffca6",null);"function"===typeof _e&&_e(Oe);var Te=Oe.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:null!==t.build.buildStatus?t.build.buildStatus:"Running",placement:"top-start"}},[n("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(t.build.buildStatus)}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.build.finalized,expression:"!build.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(t.build.buildStatus))+" ")])],1)],1)},De=[],Ce=n("ab7b"),Je={name:"BuildStatus",props:["build"],filters:{getJobBuildStatusType:Ce["b"],getJobBuildStatusText:Ce["a"]}},Pe=Je,Ie=function(t){t.options.__source="src/components/opscloud/build/summary/BuildStatus.vue"},Ne=Ie,Be=Object(h["a"])(Pe,je,De,!1,null,"23f2011d",null);"function"===typeof Ne&&Ne(Be);var Ee=Be.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button-group",{staticStyle:{float:"right"}},[t.build.supportRollback&&t.build.finalized&&"SUCCESS"===t.build.buildStatus?n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"回滚当前任务版本",placement:"top"}},[n("el-button",{attrs:{type:"primary",icon:"fa fa-undo",loading:t.rollbacking},on:{click:function(e){return t.handlerRollback()}}})],1):t._e(),t.build.finalized?t._e():n("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(e){return t.handlerAbortBuild()}}}),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"打开构建任务详情",placement:"top"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(e){return t.handlerOpenBuildUrl()}}})],1),null!=t.option&&t.option.showBuildDetails?n("el-button",{attrs:{type:"primary",icon:"fa fa-download"},on:{click:function(e){return t.handlerOpenBuildDetails()}}}):t._e()],1)],1)},Ae=[],Me={name:"BuildOperation",data:function(){return{ciJob:{},rollbacking:!1}},props:["build","job","option"],filters:{},mounted:function(){},methods:{handlerRollback:function(){var t=this;this.$confirm("确定回滚当前版本?").then((function(e){t.rollbacking=!0;var n={rollbackJobBuildId:t.build.id},i={ciJobId:t.job.id,branch:"",versionName:"",versionDesc:"",isSilence:!1,isRollback:!0,paramMap:n};Object(It["c"])(i).then((function(e){e.success?t.$message({type:"success",message:"回滚任务执行中!"}):t.$message.error(e.msg),t.rollbacking=!1})),done()})).catch((function(t){}))},handlerAbortBuild:function(){var t=this;Object(It["a"])(this.build.id).then((function(e){e.success?t.$message({message:"执行成功（请等待）!",type:"success"}):t.$message.error(e.msg)}))},handlerOpenBuildUrl:function(){T["a"].open(this.build.jobBuildUrl)},handlerOpenBuildDetails:function(){var t=window.location.host,e=window.location.href.split("://")[0];switch(this.option.buildType){case"ANDROID_BUILD":T["a"].open(e+"://"+t+"/#/job/build/android?buildId="+this.build.id);break;case"IOS_BUILD":T["a"].open(e+"://"+t+"/#/job/build/ios?buildId="+this.build.id);break;default:}}}},Re=Me,$e=function(t){t.options.__source="src/components/opscloud/build/operation/BuildOperation.vue"},ze=$e,qe=Object(h["a"])(Re,Le,Ae,!1,null,"f4c9561e",null);"function"===typeof ze&&ze(qe);var We=qe.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),n("b",[t._v(t._s(t.branch))])])},Ge=[],Fe={name:"BuildBranch",props:["branch"]},He=Fe,Ve=function(t){t.options.__source="src/components/opscloud/build/summary/BuildBranch.vue"},Xe=Ve,Ke=Object(h["a"])(He,Ue,Ge,!1,null,"65013770",null);"function"===typeof Xe&&Xe(Ke);var Ye=Ke.exports,Qe={data:function(){return{title:"HTML5构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operation:{showOpen:!0},timer:null}},name:"JobH5BuildDialog",props:["formStatus"],components:{ExecuteCommit:ae,BuildCommit:pe,BuildUser:fe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:he["a"],BuildChanges:ge["a"],BuildVerison:Te,BuildOperation:We,BuildStatus:Ee,BuildBranch:Ye},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:"",versionDesc:"",paramMap:{}};Object(It["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Ze=Qe,tn=(n("e6e5"),function(t){t.options.__source="src/components/opscloud/build/H5JobBuildDialog.vue"}),en=tn,nn=Object(h["a"])(Ze,Xt,Kt,!1,null,null,null);"function"===typeof en&&en(nn);var an=nn.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[n("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?n("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.ciJob.enableSonar,expression:"ciJob.enableSonar"}],attrs:{label:"质量管理","label-width":t.labelWidth}},[n("el-checkbox",{model:{value:t.buildParam.isSonar,callback:function(e){t.$set(t.buildParam,"isSonar",e)},expression:"buildParam.isSonar"}},[t._v("本次构建启用Sonar扫描")])],1),n("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),n("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[n("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1),n("el-form-item",{attrs:{label:"通知静默","label-width":t.labelWidth}},[n("el-checkbox",{model:{value:t.buildParam.isSilence,callback:function(e){t.$set(t.buildParam,"isSilence",e)},expression:"buildParam.isSilence"}},[t._v("本次构建不发送钉钉通知")])],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-branch",{attrs:{branch:t.row.branch}})]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-status",{attrs:{build:t.row}})]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),n("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),n("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,isRollback:t.row.isRollback,buildStatus:t.row.buildStatus}}),n("build-commit",{attrs:{commit:t.row.commitDetails}}),n("build-changes",{attrs:{changes:t.row.changes}}),n("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),n("build-executors",{attrs:{executors:t.row.executors}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("build-operation",{attrs:{build:e.row,job:t.ciJob}})]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},rn=[],sn={data:function(){return{title:"Java构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",isSilence:!1,isSonar:null,paramMap:{}},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",timer:null}},name:"JobJavaBuildDialog",props:["formStatus"],components:{ExecuteCommit:ae,BuildCommit:pe,BuildUser:fe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:he["a"],BuildChanges:ge["a"],BuildVerison:Te,BuildOperation:We,BuildStatus:Ee,BuildBranch:Ye},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.getBranches(),this.setTimer(),this.fetchData(),null!==e.parameters.isSonar&&("true"===e.parameters.isSonar?this.buildParam.isSonar=!0:this.buildParam.isSonar=!1)},getBranches:function(){var t=this;this.branchesLoading=!0;var e={ciJobId:this.ciJob.id,scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,isSilence:this.buildParam.isSilence,paramMap:{}};Object(It["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},ln=sn,cn=(n("a92b"),function(t){t.options.__source="src/components/opscloud/build/JavaJobBuildDialog.vue"}),un=cn,dn=Object(h["a"])(ln,on,rn,!1,null,null,null);"function"===typeof un&&un(dn);var pn=dn.exports,fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行部署",name:"deploy"}},[n("el-form",{attrs:{model:t.cdJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),n("el-form-item",{attrs:{label:"选择构件","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{placeholder:"选择类型",loading:t.loadArtifacts},model:{value:t.buildId,callback:function(e){t.buildId="string"===typeof e?e.trim():e},expression:"buildId"}},t._l(t.artifactOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.versionName,value:e.id,disabled:e.noArtifact}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.versionName))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v("#"+t._s(e.jobBuildNumber)+" "+t._s(e.endTime)+"("+t._s(e.ago)+")")])])})),1)],1),n("el-form-item",{attrs:{label:"主机分组","label-width":t.labelWidth,required:""}},[n("el-select",{attrs:{placeholder:"选择类型"},on:{change:t.handlerSelHostPattern},model:{value:t.hostPattern,callback:function(e){t.hostPattern="string"===typeof e?e.trim():e},expression:"hostPattern"}},t._l(t.hostPatternOptions,(function(t){return n("el-option",{key:t.hostPattern,attrs:{label:t.hostPattern,value:t.hostPattern}})})),1)],1),n("el-form-item",{attrs:{label:"主机详情","label-width":t.labelWidth}},[n("el-card",{attrs:{shadow:"never"}},t._l(t.servers,(function(e){return n("div",{key:e.id},[n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.name)+"-"+t._s(e.serialNumber)+" - "+t._s(e.privateIp)+" ")]),n("el-tag",{staticStyle:{"margin-left":"2px"},attrs:{type:"success",effect:"dark"}},[t._v(t._s(null===e.deployVersion?"首次发布":e.deployVersion.versionName)+" ")])],1)})),0)],1),n("el-form-item",{attrs:{label:"并发控制","label-width":t.labelWidth}},[n("el-slider",{staticStyle:{"margin-left":"10px",width:"50%"},attrs:{mini:"",min:1,max:8,step:1,"show-stops":""},model:{value:t.concurrent,callback:function(e){t.concurrent=e},expression:"concurrent"}})],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),t._e(),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-status",{attrs:{build:t.row}})]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),n("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),n("build-host-pattern",{attrs:{hostPattern:t.row.hostPattern}}),n("build-servers",{attrs:{servers:t.row.servers}}),n("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),n("build-executors",{attrs:{executors:t.row.executors}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-operation",{attrs:{build:t.row}})]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},mn=[],bn=(n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.hostPattern,expression:"hostPattern !== null"}]},[n("b",{staticClass:"label"},[t._v(t._s(t.hostPattern))])]),n("span",{directives:[{name:"show",rawName:"v-show",value:null===t.hostPattern,expression:"hostPattern === null"}]},[t._v("No HostPattern")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"主机分组",placement:"top-start"}},[n("i",{staticClass:"fa fa-tag",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)}),hn=[],gn={name:"BuildHostPattern",data:function(){return{}},props:["hostPattern"],filters:{},mounted:function(){},methods:{}},vn=gn,yn=(n("0dc4"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildHostPattern.vue"}),xn=yn,wn=Object(h["a"])(vn,bn,hn,!1,null,"7e7cc102",null);"function"===typeof xn&&xn(wn);var Sn=wn.exports,kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.servers.length>0,expression:"servers.length > 0"}]},t._l(t.servers,(function(e){return n("div",{key:e.id},[n("b",{staticClass:"label"},[t._v(t._s(e.serverName)+"-"+t._s(e.serialNumber))]),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.privateIp))])])})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===t.servers.length,expression:"servers.length === 0"}]},[t._v("No Servers")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"部署服务器",placement:"top-start"}},[n("i",{staticClass:"fa fa-server",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},_n=[],On={name:"BuildServers",data:function(){return{}},props:["servers"],filters:{},mounted:function(){},methods:{}},Tn=On,jn=(n("395e"),function(t){t.options.__source="src/components/opscloud/build/summary/BuildServers.vue"}),Dn=jn,Cn=Object(h["a"])(Tn,kn,_n,!1,null,"d70269ec",null);"function"===typeof Dn&&Dn(Cn);var Jn=Cn.exports,Pn={data:function(){return{title:"Java发布任务",activeName:"deploy",application:"",cdJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},loadArtifacts:!1,artifactOptions:[],buildId:"",concurrent:1,hostPattern:"",hostPatternOptions:[],servers:[],tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"JavaJobDeployDialog",props:["formStatus"],components:{BuildUser:fe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:he["a"],BuildChanges:ge["a"],BuildHostPattern:Sn,BuildServers:Jn,BuildOperation:We,BuildStatus:Ee,BuildBranch:Ye},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},getBuildArtifact:function(){var t=this;this.loadArtifacts=!0;var e={ciJobId:this.cdJob.ciJobId,size:10};Object(It["i"])(e).then((function(e){t.artifactOptions=e.body,null!==t.artifactOptions&&t.artifactOptions.length>0&&(t.buildId=t.artifactOptions[0].id),t.loadArtifacts=!1}))},getHostPattern:function(){var t=this;Object(It["h"])(this.cdJob.id).then((function(e){e.success&&(t.hostPatternOptions=e.body,t.handlerSelHostPattern())}))},initData:function(t,e){this.activeName="deploy",this.buildId="",this.application=t,this.cdJob=e,this.hostPatternOptions=[],this.servers=[],this.server="",this.hostPattern="",null!==e.parameters.hostPattern&&(this.hostPattern=e.parameters.hostPattern),this.setTimer(),this.fetchData(),this.getBuildArtifact(),this.getHostPattern()},handlerSelHostPattern:function(){this.servers=[];var t=!0,e=!1,n=void 0;try{for(var i,a=this.hostPatternOptions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.hostPattern===this.hostPattern){this.servers=o.servers;break}}}catch(r){e=!0,n=r}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}},handlerBuild:function(){var t=this;""===this.buildId&&this.$message({message:"未选中部署构建",type:"warning"}),""===this.hostPattern&&this.$message({message:"未选中主机分组",type:"warning"}),this.building=!0,this.buildParam.paramMap.hostPattern=this.hostPattern,this.buildParam.paramMap.concurrent=this.concurrent;var e={cdJobId:this.cdJob.id,ciBuildId:this.buildId,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,concurrent:this.buildParam.concurrent,paramMap:this.buildParam.paramMap};Object(It["b"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={cdJobId:this.cdJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["g"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},In=Pn,Nn=(n("8474"),function(t){t.options.__source="src/components/opscloud/build/JavaJobDeployDialog.vue"}),Bn=Nn,En=Object(h["a"])(In,fn,mn,!1,null,null,null);"function"===typeof Bn&&Bn(En);var Ln=En.exports,An=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[n("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?n("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),n("el-form-item",{attrs:{label:"构建类型","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.buildParam.paramMap.buildType,callback:function(e){t.$set(t.buildParam.paramMap,"buildType",e)},expression:"buildParam.paramMap.buildType"}},t._l(t.buildTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),n("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[n("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-branch",{attrs:{branch:t.row.branch}})]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-status",{attrs:{build:t.row}})]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),n("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),n("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,buildStatus:t.row.buildStatus}}),n("build-commit",{attrs:{commit:t.row.commitDetails}}),n("build-changes",{attrs:{changes:t.row.changes}}),n("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),n("build-executors",{attrs:{executors:t.row.executors}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("build-operation",{attrs:{build:e.row,option:t.operationOption}})]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Mn=[],Rn=[{value:"alpha",label:"alpha"},{value:"release",label:"release"}],$n={data:function(){return{title:"iOS构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},buildTypeOptions:Rn,branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operationOption:{buildType:"IOS_BUILD",showBuildDetails:!0},timer:null}},name:"IOSJobBuildDialog",props:["formStatus"],components:{ExecuteCommit:ae,BuildCommit:pe,BuildUser:fe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:he["a"],BuildChanges:ge["a"],BuildVerison:Te,BuildStatus:Ee,BuildBranch:Ye,BuildOperation:We},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.commit="",this.buildParam.paramMap.buildType=this.ciJob.parameters.buildType,this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:this.buildParam.paramMap};Object(It["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},zn=$n,qn=(n("bb63"),function(t){t.options.__source="src/components/opscloud/build/IOSJobBuildDialog.vue"}),Wn=qn,Un=Object(h["a"])(zn,An,Mn,!1,null,null,null);"function"===typeof Wn&&Wn(Un);var Gn=Un.exports,Fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch","string"===typeof e?e.trim():e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])],1),n("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),n("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[n("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),n("b",[t._v(t._s(e.row.branch))])]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.buildStatus,placement:"top-start"}},[n("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(e.row.buildStatus)}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.row.finalized,expression:"!scope.row.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(e.row.buildStatus))+" ")])],1)]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.user.email,placement:"top-start"}},[n("el-tag",{attrs:{"disable-transitions":"",type:"primary"}},[t._v(t._s(e.row.user.displayName)+" ")])],1),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.row.ago))])],1),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[n("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",[t._v("构建时长: "+t._s(e.row.buildTime))]),n("div",[t._v("开始时间: "+t._s(e.row.startTime))]),n("div",[t._v("结束时间: "+t._s(e.row.endTime))])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[n("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.row.changes.length>0,expression:"scope.row.changes.length > 0"}],staticClass:"tag-group"},t._l(e.row.changes,(function(e){return n("div",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.commitId,placement:"top-start"}},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.shortCommitId))])],1),n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.commitMsg))])],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.changes.length,expression:"scope.row.changes.length === 0"}]},[t._v("No Changes")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"变更详情",placement:"top-start"}},[n("i",{staticClass:"fa fa-comment-o",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.row.artifacts.length>0,expression:"scope.row.artifacts.length > 0"}],staticClass:"tag-group"},t._l(e.row.artifacts,(function(e){return n("div",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.artifactFileName))])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.artifactFileSize))])],1)],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.artifacts.length,expression:"scope.row.artifacts.length === 0"}]},[t._v("No Artifacts")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[n("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.row.executors.length>0,expression:"scope.row.executors.length > 0"}],staticClass:"tag-group"},t._l(e.row.executors,(function(e){return n("div",{key:e.id},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp))])],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.executors.length,expression:"scope.row.executors.length === 0"}]},[t._v("No Executors")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[n("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",{staticStyle:{float:"right",padding:"3px 0"}},[e.row.finalized?t._e():n("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(n){return t.handlerRowAbortBuild(e.row)}}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(n){return t.handlerRowOpenBuildUrl(e.row)}}})],1)]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},Hn=[],Vn={data:function(){return{title:"Python构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"PythonJobBuildDialog",props:["formStatus"],components:{},filters:{getJobBuildStatusType:Ce["b"],getJobBuildStatusText:Ce["a"]},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},handlerRowAbortBuild:function(t){var e=this;Object(It["a"])(t.id).then((function(t){t.success?e.$message({message:"执行成功（请等待）!",type:"success"}):e.$message.error(t.msg)}))},handlerRowOpenBuildUrl:function(t){T["a"].open(t.jobBuildUrl)},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:{}};Object(It["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},Xn=Vn,Kn=(n("2d7f"),function(t){t.options.__source="src/components/opscloud/build/PythonJobBuildDialog.vue"}),Yn=Kn,Qn=Object(h["a"])(Xn,Fn,Hn,!1,null,null,null);"function"===typeof Yn&&Yn(Qn);var Zn=Qn.exports,ti=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行构建",name:"build"}},[n("el-form",{attrs:{model:t.ciJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.ciJob.name,callback:function(e){t.$set(t.ciJob,"name",e)},expression:"ciJob.name"}})],1),n("el-form-item",{attrs:{label:"仓库","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"500px"},attrs:{disabled:""},model:{value:t.ciJob.scmMemberId,callback:function(e){t.$set(t.ciJob,"scmMemberId","string"===typeof e?e.trim():e)},expression:"ciJob.scmMemberId"}},t._l(t.application.scmMembers,(function(t){return n("el-option",{key:t.id,attrs:{label:t.scmSshUrl,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"分支","label-width":t.labelWidth,required:""}},[n("el-select",{staticStyle:{width:"500px"},attrs:{filterable:""},model:{value:t.ciJob.branch,callback:function(e){t.$set(t.ciJob,"branch",e)},expression:"ciJob.branch"}},t._l(t.branchOptions,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.branchesLoading},on:{click:t.getBranches}},[n("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})]),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"primary",loading:t.commitLoading},on:{click:t.getCommit}},[n("i",{staticClass:"fa fa-info",attrs:{"aria-hidden":"true"}})]),""!==t.commit?n("execute-commit",{staticStyle:{"margin-top":"10px"},attrs:{commit:t.commit}}):t._e()],1),n("el-form-item",{attrs:{label:"构建类型","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.BUILD_TYPE,callback:function(e){t.BUILD_TYPE=e},expression:"BUILD_TYPE"}},t._l(t.buildTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"发布类型","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.PRODUCT_FLAVOR,callback:function(e){t.PRODUCT_FLAVOR=e},expression:"PRODUCT_FLAVOR"}},t._l(t.buildProductFlavorOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),n("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[n("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-branch",{attrs:{branch:t.row.branch}})]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-status",{attrs:{build:t.row}})]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("build-user",{attrs:{user:t.row.user,ago:t.row.ago}}),n("build-times",{attrs:{buildTime:t.row.buildTime,startTime:t.row.startTime,endTime:t.row.endTime}}),n("build-verison",{attrs:{versionName:t.row.versionName,versionDesc:t.row.versionDesc,buildStatus:t.row.buildStatus}}),n("build-commit",{attrs:{commit:t.row.commitDetails}}),n("build-changes",{attrs:{changes:t.row.changes}}),n("build-artifacts",{attrs:{artifacts:t.row.artifacts}}),n("build-executors",{attrs:{executors:t.row.executors}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("build-operation",{attrs:{build:e.row,option:t.operationOption}})]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},ei=[],ni=[{value:"release",label:"release"},{value:"debug",label:"debug"}],ii=[{value:"alpha",label:"alpha"},{value:"publish",label:"publish"}],ai={data:function(){return{title:"Android构建",activeName:"build",application:"",ciJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},BUILD_TYPE:"",PRODUCT_FLAVOR:"",buildParam:{versionName:"",versionDesc:""},buildTypeOptions:ni,buildProductFlavorOptions:ii,branchOptions:[],branchesLoading:!1,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,commitLoading:!1,commit:"",operationOption:{buildType:"ANDROID_BUILD",showBuildDetails:!0},timer:null}},name:"AndroidJobBuildDialog",props:["formStatus"],components:{ExecuteCommit:ae,BuildCommit:pe,BuildUser:fe["a"],BuildTimes:me["a"],BuildArtifacts:be["a"],BuildExecutors:he["a"],BuildChanges:ge["a"],BuildVerison:Te,BuildOperation:We,BuildStatus:Ee,BuildBranch:Ye},filters:{},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},initData:function(t,e){this.activeName="build",this.application=t,this.ciJob=e,this.BUILD_TYPE=e.parameters["BUILD_TYPE"],this.PRODUCT_FLAVOR=e.parameters["PRODUCT_FLAVOR"],this.commit="",this.getBranches(),this.setTimer(),this.fetchData()},getBranches:function(){var t=this;this.branchesLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,enableTag:this.ciJob.enableTag};Object(d["l"])(e).then((function(e){t.branchOptions=e.body.options,t.branchesLoading=!1}))},getCommit:function(){var t=this;this.commitLoading=!0;var e={scmMemberId:this.ciJob.scmMemberId,branch:this.ciJob.branch};Object(d["m"])(e).then((function(e){t.commit=e.body,t.commitLoading=!1}))},handlerBuild:function(){var t=this;this.building=!0;var e={ciJobId:this.ciJob.id,branch:this.ciJob.branch,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:{BUILD_TYPE:this.BUILD_TYPE,PRODUCT_FLAVOR:this.PRODUCT_FLAVOR}};Object(It["c"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={ciJobId:this.ciJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["k"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},oi=ai,ri=(n("1c71"),function(t){t.options.__source="src/components/opscloud/build/AndroidJobBuildDialog.vue"}),si=ri,li=Object(h["a"])(oi,ti,ei,!1,null,null,null);"function"===typeof si&&si(li);var ci=li.exports,ui=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,width:"60%"},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)},"before-close":t.closeDialog}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"执行加固",name:"reinforce"}},[n("el-form",{attrs:{model:t.cdJob}},[n("el-form-item",{attrs:{label:"任务名称","label-width":t.labelWidth}},[n("el-input",{attrs:{disabled:""},model:{value:t.cdJob.name,callback:function(e){t.$set(t.cdJob,"name",e)},expression:"cdJob.name"}})],1),n("el-form-item",{attrs:{label:"选择构件","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型",loading:t.loadBuildArtifact},model:{value:t.buildId,callback:function(e){t.buildId="string"===typeof e?e.trim():e},expression:"buildId"}},t._l(t.buildArtifactOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.versionName,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.versionName))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v("#"+t._s(e.jobBuildNumber)+" "+t._s(e.endTime)+"("+t._s(e.ago)+")")])])})),1)],1),n("el-form-item",{attrs:{label:"构建渠道","label-width":t.labelWidth}},[n("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.channelType,callback:function(e){t.channelType="string"===typeof e?e.trim():e},expression:"channelType"}},t._l(t.channelTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!==t.channelType,expression:"channelType !== 0"}],attrs:{label:"选择渠道","label-width":t.labelWidth}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择类型",multiple:""},model:{value:t.channelGroup,callback:function(e){t.channelGroup=e},expression:"channelGroup"}},t._l(t.channelGroupOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"版本名称","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"留空自动生成版本号"},model:{value:t.buildParam.versionName,callback:function(e){t.$set(t.buildParam,"versionName",e)},expression:"buildParam.versionName"}})],1),n("el-form-item",{attrs:{label:"版本说明","label-width":t.labelWidth}},[n("el-input",{model:{value:t.buildParam.versionDesc,callback:function(e){t.$set(t.buildParam,"versionDesc",e)},expression:"buildParam.versionDesc"}})],1)],1),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"fa fa-play",loading:t.building,disabled:t.building},on:{click:t.handlerBuild}},[t._v("执行任务 ")])],1)],1),n("el-tab-pane",{attrs:{label:"构建详情",name:"details"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"工作引擎"}},[t._v(t._s(e.row.jobEngine.jenkinsInstance.name))]),n("el-form-item",{attrs:{label:"引擎构建编号"}},[t._v(t._s(e.row.engineBuildNumber))])],1)]}}])}),n("el-table-column",{attrs:{prop:"jobBuildNumber",label:"构建编号",width:"100px"}}),n("el-table-column",{attrs:{prop:"branch",label:"构建分支",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"fa fa-code-fork",staticStyle:{"margin-right":"2px"}}),n("b",[t._v(t._s(e.row.branch))])]}}])}),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.buildStatus,placement:"top-start"}},[n("el-tag",{attrs:{"disable-transitions":"",type:t._f("getJobBuildStatusType")(e.row.buildStatus)}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.row.finalized,expression:"!scope.row.finalized"}],staticClass:"el-icon-loading"}),t._v(t._s(t._f("getJobBuildStatusText")(e.row.buildStatus))+" ")])],1)]}}])}),n("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.user.email,placement:"top-start"}},[n("el-tag",{attrs:{"disable-transitions":"",type:"primary"}},[t._v(t._s(e.row.user.displayName)+" ")])],1),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.row.ago))])],1),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[n("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",[t._v("构建时长: "+t._s(e.row.buildTime))]),n("div",[t._v("开始时间: "+t._s(e.row.startTime))]),n("div",[t._v("结束时间: "+t._s(e.row.endTime))])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[n("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.row.artifacts.length>0,expression:"scope.row.artifacts.length > 0"}],staticClass:"tag-group"},t._l(e.row.artifacts,(function(e){return n("div",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.artifactFileName))])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"}},[t._v(t._s(e.artifactFileSize))])],1)],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.artifacts.length,expression:"scope.row.artifacts.length === 0"}]},[t._v("No Artifacts")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[n("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-divider"),n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.row.executors.length>0,expression:"scope.row.executors.length > 0"}],staticClass:"tag-group"},t._l(e.row.executors,(function(e){return n("div",{key:e.id},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp))])],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.row.executors.length,expression:"scope.row.executors.length === 0"}]},[t._v("No Executors")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"工作节点",placement:"top-start"}},[n("i",{staticClass:"fa fa-television",attrs:{"aria-hidden":"true"}})])],1)],1)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",{staticStyle:{float:"right",padding:"3px 0"}},[e.row.finalized?t._e():n("el-button",{attrs:{type:"primary",icon:"fa fa-stop"},on:{click:function(n){return t.handlerSelRow(e.row)}}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:function(n){return t.handlerRowOpenBuildUrl(e.row)}}}),n("el-button",{attrs:{type:"primary",icon:"fa fa-download"},on:{click:function(n){return t.handlerRowOpenBuildDetails(e.row)}}})],1)]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}})],1)],1),n("el-divider"),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关闭")])],1)],1)},di=[],pi=[{value:0,label:"全渠道"},{value:1,label:"选择渠道"}],fi=[{value:"shero",label:"官网"},{value:"yyb",label:"应用宝"},{value:"huawei",label:"华为"},{value:"xiaomi",label:"小米"},{value:"oppo",label:"OPPO"},{value:"vivo",label:"VIVO"},{value:"bmhy",label:"斑马会员"}],mi={data:function(){return{title:"Android加固任务",activeName:"reinforce",application:"",cdJob:"",labelWidth:"150px",options:{stripe:!0},queryParam:{queryName:""},buildParam:{versionName:"",versionDesc:"",paramMap:{}},loadBuildArtifact:!1,buildArtifactOptions:[],buildId:"",channelType:"",channelGroup:[],channelTypeOptions:pi,channelGroupOptions:fi,tableData:[],loading:!1,pagination:{currentPage:1,pageSize:5,total:0},building:!1,timer:null}},name:"AndroidReinforceJobBuildDialog",props:["formStatus"],components:{},filters:{getJobBuildStatusType:Ce["b"],getJobBuildStatusText:Ce["a"]},computed:{},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)},methods:{closeDialog:function(){clearInterval(this.timer),this.formStatus.visible=!1,this.$emit("closeDialog")},setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.formStatus.visible&&t.fetchData()}),5e3))},getBuildArtifact:function(){var t=this;this.loadBuildArtifact=!0;var e={ciJobId:this.cdJob.ciJobId,size:10};Object(It["i"])(e).then((function(e){t.buildArtifactOptions=e.body,null!==e.body&&e.body.length>0&&(t.buildId=e.body[0].id),t.loadBuildArtifact=!1}))},initData:function(t,e){this.activeName="reinforce",this.buildId="",this.application=t,this.cdJob=e,this.channelType=0,this.channelGroup=[],this.setTimer(),this.fetchData(),this.getBuildArtifact()},handlerRowOpenBuildUrl:function(t){window.open(t.jobBuildUrl)},handlerRowOpenBuildDetails:function(t){var e=window.location.host,n=window.location.href.split("://")[0],i=n+"://"+e+"/#/job/build/android/reinforce?buildId="+t.id;T["a"].open(i)},handlerBuild:function(){var t=this;this.building=!0,this.buildParam.paramMap["channelType"]=this.channelType,0!==this.channelType&&(this.buildParam.paramMap["channelGroup"]=JSON.stringify(this.channelGroup));var e={cdJobId:this.cdJob.id,ciBuildId:this.buildId,versionName:this.buildParam.versionName,versionDesc:this.buildParam.versionDesc,paramMap:this.buildParam.paramMap};Object(It["b"])(e).then((function(e){e.success?t.$message({type:"success",message:"任务执行中!"}):t.$message.error(e.msg),t.building=!1}))},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;0===this.tableData.length&&(this.loading=!0);var e={cdJobId:this.cdJob.id,queryName:this.queryParam.queryName,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(It["g"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},bi=mi,hi=(n("9ffc"),function(t){t.options.__source="src/components/opscloud/build/AndroidReinforceJobBuildDialog.vue"}),gi=hi,vi=Object(h["a"])(bi,ui,di,!1,null,null,null);"function"===typeof gi&&gi(vi);var yi=vi.exports,xi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[n("el-select",{staticStyle:{display:"inline-block","max-width":"200px","margin-left":"10px"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索用户","remote-method":t.getUser,loading:t.searchLoading},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.username,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.username))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v(t._s(e.displayName))])])})),1),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:""===t.userId,plain:"",size:"mini"},on:{click:function(e){return t.grantUser()}}},[t._v("授权 ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{prop:"displayName",label:"显示名"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),n("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"ADMIN"===e.row.userPermission.roleName?"danger":"success",size:"small"}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"管理员":"用户")+" ")])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowUpdatePermission(e.row)}}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"降权":"提权")+" ")]),n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowRevokeUser(e.row)}}},[t._v("撤销")])]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},wi=[],Si=n("7648"),ki={data:function(){return{title:"任务授权管理",application:{},ciJob:{},tableData:[],loading:!1,searchLoading:!1,userId:"",userOptions:[],pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:""}}},name:"CiJobPermissionDialog",props:["formStatus"],mixins:[],mounted:function(){},methods:{initData:function(t){this.ciJob=t,this.userId="",this.pagination.currentPage=1,this.getUser(""),console.log(t),this.fetchData()},getUser:function(t){var e=this;this.searchLoading=!0;var n={queryName:t,applicationId:this.ciJob.applicationId,ciJobId:this.ciJob.id,page:1,length:10};Object(Si["a"])(n).then((function(t){e.userOptions=t.body.data,e.searchLoading=!1}))},closeDialog:function(){this.formStatus.visible=!1},handleClick:function(){this.$emit("input",!this.value)},grantUser:function(){var t=this;setTimeout((function(){Object(d["h"])(t.ciJob.id,t.userId).then((function(e){t.$message({message:"成功",type:"success"}),t.userId="",t.getUser(""),t.fetchData()}))}),30)},handlerRowRevokeUser:function(t){var e=this;setTimeout((function(){Object(d["u"])(e.ciJob.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.getUser(""),e.fetchData()}))}),30)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,applicationId:this.ciJob.applicationId,ciJobId:this.ciJob.id,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(Si["b"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},_i=ki,Oi=function(t){t.options.__source="src/components/opscloud/application/CiJobPermissionDialog.vue"},Ti=Oi,ji=Object(h["a"])(_i,xi,wi,!1,null,null,null);"function"===typeof Ti&&Ti(ji);var Di=ji.exports,Ci=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{placement:"top-start",trigger:"hover",width:"400"}},[n("el-row",{attrs:{gutter:10}},[n("span",{staticStyle:{"margin-left":"5px"}},[t._v("可靠性")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.handlerOpenUrl}},[t._v("跳转详情页面")])],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.bugs.value))]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("Bugs")])])],1),null!=t.sonarQube.measures.new_bugs?n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.new_bugs.periods[0].value)+" ")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("新增Bugs")])])],1):t._e()],1),n("el-row",{attrs:{gutter:10}},[n("span",{staticStyle:{"margin-left":"5px"}},[t._v("安全性")])]),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.vulnerabilities.value)+" ")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("漏洞")])])],1),null!=t.sonarQube.measures.new_vulnerabilities?n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.new_vulnerabilities.periods[0].value)+" ")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("新增漏洞")])])],1):t._e()],1),n("el-row",{attrs:{gutter:10}},[n("span",{staticStyle:{"margin-left":"5px"}},[t._v("覆盖率")])]),n("el-row",{attrs:{gutter:10}},[n("el-col",[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.coverage.value)+"%")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("覆盖率")])])],1)],1),n("el-row",{attrs:{gutter:10}},[n("span",{staticStyle:{"margin-left":"5px"}},[t._v("重复")])]),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.duplicated_lines_density.value)+"% ")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("重复度")])])],1),n("el-col",{attrs:{span:12}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{"font-size":"30px",color:"#20A9D9","font-weight":"300"}},[t._v(t._s(t.sonarQube.measures.duplicated_blocks.value)+" ")]),n("div",{staticStyle:{"font-size":"10px",color:"#B7B6B6"}},[t._v("重复块")])])],1)],1),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[n("img",{attrs:{src:t.sonarQube.alertStatus}})])],1)],1)},Ji=[],Pi={name:"SonarPopover",data:function(){return{}},props:["sonarQube"],methods:{handlerOpenUrl:function(){T["a"].open(this.sonarQube.projectUrl)}}},Ii=Pi,Ni=function(t){t.options.__source="src/components/opscloud/build/sonar/SonarPopover.vue"},Bi=Ni,Ei=Object(h["a"])(Ii,Ci,Ji,!1,null,"affc5a44",null);"function"===typeof Bi&&Bi(Ei);var Li=Ei.exports;function Ai(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ai(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ri={visible:!1},$i={name:"MyCiJobTable",data:function(){return{application:"",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{showHide:!1,queryName:""},formCiJobStatus:{visible:!1,operationType:!0,addTitle:"新增任务配置",updateTitle:"更新任务配置"},formCdJobStatus:{visible:!1,operationType:!0,addTitle:"新增部署任务配置",updateTitle:"更新部署任务配置"},formEngineStatus:Object.assign({},Ri),formH5BuildStatus:Object.assign({},Ri),formJavaBuildStatus:Object.assign({},Ri),formJavaDeployStatus:Object.assign({},Ri),formIOSBuildStatus:Object.assign({},Ri),formPythonBuildStatus:Object.assign({},Ri),formAndroidBuildStatus:Object.assign({},Ri),formAndroidReinforceBuildStatus:Object.assign({},Ri),formXtermStatus:Object.assign({},Ri),formBuildOutputStatus:Object.assign({},Ri),formPermissionStatus:Object.assign({},Ri),labelWidth:"100px"}},computed:Mi({},Object(l["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize()},beforeDestroy:function(){},components:{JenkinsNodeXTerm:A,CiJobDialog:mt,CdJobDialog:Ct,JobEngineDialog:Mt,H5JobBuildDialog:an,JavaJobBuildDialog:pn,JavaJobDeployDialog:Ln,IOSJobBuildDialog:Gn,PythonJobBuildDialog:Zn,AndroidJobBuildDialog:ci,AndroidReinforceJobBuildDialog:yi,ViewJobBuildOutput:Vt,CiJobPermissionDialog:Di,SonarPopover:Li},methods:Mi({},Object(l["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},initData:function(t){this.application=t,this.queryParam.queryName="",this.fetchData()},handlerAdd:function(){var t={id:"",applicationId:this.application.id,jobTpl:null,name:"",jobKey:"",branch:"",envType:0,jotTplId:"",jobType:"",enableTag:!1,enableSonar:!1,parameterYaml:"",jobBuildNumber:0,hide:!1,deploymentJobId:0,atAll:!1,dingtalk:null,dingtalkId:"",bucket:null,ossBucketId:"",scmMemberId:"",comment:""};this.formCiJobStatus.operationType=!0,this.formCiJobStatus.visible=!0,this.$refs.ciJobDialog.initData(this.application,t)},handlerRowRunBuild:function(t){switch(t.jobType){case"HTML5":this.formH5BuildStatus.visible=!0,this.$refs.h5JobBuildDialog.initData(this.application,t);break;case"JAVA":this.formJavaBuildStatus.visible=!0,this.$refs.javaJobBuildDialog.initData(this.application,t);break;case"IOS":this.formIOSBuildStatus.visible=!0,this.$refs.iOSJobBuildDialog.initData(this.application,t);break;case"PYTHON":this.formPythonBuildStatus.visible=!0,this.$refs.pythonJobBuildDialog.initData(this.application,t);break;case"ANDROID":this.formAndroidBuildStatus.visible=!0,this.$refs.androidJobBuildDialog.initData(this.application,t);break;default:this.$message.error("构建任务类型配置错误!")}},handlerRowRunDeployment:function(t){switch(null===t.cdJob&&this.$message.error("部署任务未创建!"),t.cdJob.jobType){case"ANDROID_REINFORCE":this.formAndroidReinforceBuildStatus.visible=!0,this.$refs.androidReinforceJobBuildDialog.initData(this.application,t.cdJob);break;case"JAVA_DEPLOYMENT":this.formJavaDeployStatus.visible=!0,this.$refs.javaJobDeployDialog.initData(this.application,t.cdJob);break;default:this.$message.error("部署任务类型配置错误!")}},handlerRowCreateDeployment:function(t){var e={id:"",ciJobId:t.id,applicationId:t.applicationId,jobTpl:null,name:"",jobKey:"",envType:0,jotTplId:"",jobType:"",parameterYaml:"",jobBuildNumber:0,comment:""};this.formCdJobStatus.operationType=!0,this.$refs.cdJobDialog.initData(this.application,e),this.formCdJobStatus.visible=!0},handlerRowPermissionEdit:function(t){this.formPermissionStatus.visible=!0,this.$refs.ciJobPermissionDialog.initData(Object.assign({},t))},handlerRowEngineEdit:function(t){var e={ciJobId:t.id,cdJobId:null!==t.cdJob?t.cdJob.id:null};this.formEngineStatus.visible=!0,this.$refs.jobEngineDialog.initData(e)},handlerRowEdit:function(t){this.formCiJobStatus.operationType=!1,this.formCiJobStatus.visible=!0,this.$refs.ciJobDialog.initData(this.application,Object.assign({},t))},handlerOpenXTerm:function(t){this.formXtermStatus.visible=!0,this.$refs.xtermDialog.initData(t)},handlerAbortBuild:function(t){var e=this;Object(It["a"])(t[0].buildId).then((function(t){t.success?e.$message({message:"执行成功（请等待）!",type:"success"}):e.$message.error(t.msg)}))},handlerOpenViewBuildOutput:function(t){this.formBuildOutputStatus.visible=!0,this.$refs.viewJobBuildOutput.initData(0,t[0].buildId)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;if(""!==this.application){0===this.tableData.length&&(this.loading=!0);var e={applicationId:this.application.id,queryName:this.queryParam.queryName,showHide:this.queryParam.showHide,extend:1,page:this.pagination.currentPage,length:this.pagination.pageSize};tt(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}})},zi=$i,qi=(n("b1c9"),function(t){t.options.__source="src/components/opscloud/application/MyCiJobTable.vue"}),Wi=qi,Ui=Object(h["a"])(zi,S,k,!1,null,null,null);"function"===typeof Wi&&Wi(Ui);var Gi=Ui.exports,Fi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[n("el-input",{staticClass:"input",attrs:{disabled:"",placeholder:"应用名称"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name","string"===typeof e?e.trim():e)},expression:"application.name"}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"name",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.jobKey,placement:"top-start"}},[n("span",[t._v(t._s(e.row.name))])]),n("span",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return n("span",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}])}),n("el-table-column",{attrs:{prop:"env",label:"环境",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{style:{color:e.row.env.color},attrs:{"disable-transitions":""}},[t._v(t._s(e.row.env.envName))])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"最新构建",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",t._l(e.row.buildViews,(function(e){return n("el-button",{key:e.buildNumber,style:{backgroundColor:e.color,color:"#FFFFFF",width:"50px"}},[n("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[n("el-form",[n("span",{directives:[{name:"show",rawName:"v-show",value:e.executors.length>0,expression:"item.executors.length > 0"}]},[n("el-tag",{attrs:{type:"primary"}},[t._v("构建日志 "),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerOpenViewBuildOutput(e.executors)}}},[n("span",{staticStyle:{color:"#535353"}},[t._v("查看")])])],1),n("el-divider"),t._l(e.executors,(function(e){return n("div",{key:e.id},[n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.nodeName)+":"+t._s(e.privateIp)+" "),n("el-button",{staticStyle:{"margin-left":"10px",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerOpenXTerm(e)}}},[n("span",{staticStyle:{color:"#535353"}},[t._v("打开终端")])])],1)],1)}))],2),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.executors.length,expression:"item.executors.length === 0"}]},[t._v(" No Executors ")])]),n("span",{attrs:{slot:"reference"},slot:"reference"},[e.building?n("i",{staticClass:"el-icon-loading"}):t._e(),t._v(t._s(e.buildNumber))])],1)],1)})),1)]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",{staticStyle:{"margin-right":"5px"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.row.deploymentJobId,expression:"scope.row.deploymentJobId !== 0"}],attrs:{type:"primary",icon:"fa fa-cloud-upload"},on:{click:function(n){return t.handlerRowRunDeployment(e.row)}}})],1),n("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:function(n){return t.handlerRowDeploymentEdit(e.row)}}},[n("i",{staticClass:"el-icon-edit"}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"fa fa-plane"}},[n("span",{on:{click:function(n){return t.handlerRowEngineEdit(e.row)}}},[t._v("工作引擎")])]),n("el-dropdown-item",{attrs:{icon:"fa fa-user"}},[n("span",[t._v("权限配置")])])],1)],1)]}}])})],1),n("el-pagination",{attrs:{background:"","page-sizes":[10,15,20,25,30],layout:"sizes, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange,"size-change":t.handleSizeChange}}),n("cd-job-dialog",{ref:"cdJobDialog",attrs:{formStatus:t.formCdJobStatus},on:{closeDialog:t.fetchData}}),n("job-engine-dialog",{ref:"jobEngineDialog",attrs:{formStatus:t.formEngineStatus}}),n("android-reinforce-job-build-dialog",{ref:"androidReinforceJobBuildDialog",attrs:{formStatus:t.formAndroidReinforceBuildStatus}}),n("java-job-deploy-dialog",{ref:"javaJobDeployDialog",attrs:{formStatus:t.formJavaDeployStatus}}),n("jenkins-node-x-term",{ref:"xtermDialog",attrs:{formStatus:t.formXtermStatus},on:{openXTerm:t.handlerOpenXTerm}}),n("view-job-build-output",{ref:"viewJobBuildOutput",attrs:{formStatus:t.formBuildOutputStatus}})],1)},Hi=[];function Vi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vi(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ki={name:"MyCdJobTable",data:function(){return{application:"",tableData:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:10,total:0},queryParam:{instanceId:"",queryName:""},formCiJobStatus:{visible:!1,operationType:!0,addTitle:"新增任务配置",updateTitle:"更新任务配置"},formCdJobStatus:{visible:!1,operationType:!0,addTitle:"新增部署任务配置",updateTitle:"更新部署任务配置"},formEngineStatus:{visible:!1},formAndroidReinforceBuildStatus:{visible:!1},formJavaDeployStatus:{visible:!1},formXtermStatus:{visible:!1},formBuildOutputStatus:{visible:!1}}},computed:Xi({},Object(l["mapState"])("d2admin/user",["info"])),mounted:function(){this.initPageSize()},beforeDestroy:function(){},components:{JenkinsNodeXTerm:A,CdJobDialog:Ct,JobEngineDialog:Mt,AndroidReinforceJobBuildDialog:yi,JavaJobDeployDialog:Ln,ViewJobBuildOutput:Vt},methods:Xi({},Object(l["mapActions"])({setPageSize:"d2admin/user/set"}),{handleSizeChange:function(t){this.pagination.pageSize=t,this.info.pageSize=t,this.setPageSize(this.info),this.fetchData()},initPageSize:function(){"undefined"!==typeof this.info.pageSize&&(this.pagination.pageSize=this.info.pageSize)},initData:function(t){this.application=t,this.fetchData()},handlerRowRunDeployment:function(t){switch(t.jobType){case"ANDROID_REINFORCE":this.formAndroidReinforceBuildStatus.visible=!0,this.$refs.androidReinforceJobBuildDialog.initData(this.application,t);break;case"JAVA_DEPLOYMENT":this.formJavaDeployStatus.visible=!0,this.$refs.javaJobDeployDialog.initData(this.application,t);break;default:this.$message.error("部署任务类型配置错误!")}},handlerRowDeploymentEdit:function(t){this.formCdJobStatus.operationType=!1,this.$refs.cdJobDialog.initData(this.application,Object.assign({},t)),this.formCdJobStatus.visible=!0},handlerRowEngineEdit:function(t){var e={ciJobId:t.ciJobId,cdJobId:t.id};this.formEngineStatus.visible=!0,this.$refs.jobEngineDialog.initData(e)},handlerOpenXTerm:function(t){this.formXtermStatus.visible=!0,this.$refs.xtermDialog.initData(t)},handlerOpenViewBuildOutput:function(t){this.formBuildOutputStatus.visible=!0,this.$refs.viewJobBuildOutput.initData(1,t[0].buildId)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;if(""!==this.application){0===this.tableData.length&&(this.loading=!0);var e={applicationId:this.application.id,queryName:this.queryParam.queryName,page:this.pagination.currentPage,length:this.pagination.pageSize};vt(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}})},Yi=Ki,Qi=(n("b852"),function(t){t.options.__source="src/components/opscloud/application/MyCdJobTable.vue"}),Zi=Qi,ta=Object(h["a"])(Yi,Fi,Hi,!1,null,null,null);"function"===typeof Zi&&Zi(ta);var ea=ta.exports,na=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.announcementCarousel.isShow,expression:"announcementCarousel.isShow"}],staticStyle:{"margin-bottom":"10px"}},[n("el-carousel",{attrs:{trigger:"click",height:"150px",interval:1e4}},t._l(t.announcementCarousel.announcements,(function(e){return n("el-carousel-item",{key:e.id},[n("h3",{staticClass:"small"},[t._v(t._s(e.title))]),n("p",{staticStyle:{"margin-left":"50px","font-size":"14px"},domProps:{innerHTML:t._s(e.content)}})])})),1)],1)},ia=[],aa="/announcement";function oa(){return Object(Q["a"])({url:aa+"/carousel/query",method:"get"})}var ra={name:"AnnouncementCarousel",data:function(){return{announcementCarousel:{}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;oa().then((function(e){t.announcementCarousel=e.body}))}}},sa=ra,la=(n("9c4d"),function(t){t.options.__source="src/components/opscloud/announcement/AnnouncementCarousel.vue"}),ca=la,ua=Object(h["a"])(sa,na,ia,!1,null,null,null);"function"===typeof ca&&ca(ua);var da=ua.exports,pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},t._l(t.status.blockPlatforms,(function(e){return n("div",{key:e.id,staticStyle:{"margin-bottom":"10px"}},[n("el-alert",{attrs:{title:e.comment,type:"warning","show-icon":""}},[t._v("封网时间 "+t._s(e.startTime)+" - "+t._s(e.endTime))])],1)})),0)])},fa=[],ma="/platform";function ba(){return Object(Q["a"])({url:ma+"/block/status/query",method:"get"})}var ha={name:"BlockPlatformStatus",data:function(){return{status:{blockPlatforms:[]},isShow:!0}},mounted:function(){this.fetchData()},components:{},methods:{fetchData:function(){var t=this;ba().then((function(e){t.status=e.body,t.isShow=t.status.show}))}}},ga=ha,va=function(t){t.options.__source="src/components/opscloud/platform/BlockPlatformStatus.vue"},ya=va,xa=Object(h["a"])(ga,pa,fa,!1,null,"158a118e",null);"function"===typeof ya&&ya(xa);var wa,Sa=xa.exports,ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticStyle:{"margin-bottom":"10px"}},[n("el-radio",{attrs:{label:"build"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("构建任务")]),n("el-radio",{attrs:{label:"deployment"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("部署任务")])],1),n("el-col",{attrs:{span:11}},[n("task-pipeline",{directives:[{name:"show",rawName:"v-show",value:"build"===t.radio,expression:"radio === 'build'"}],attrs:{buildType:0},on:{handlerOutput:t.handlerPipelineOutput}}),n("task-pipeline",{directives:[{name:"show",rawName:"v-show",value:"deployment"===t.radio,expression:"radio === 'deployment'"}],attrs:{buildType:1},on:{handlerOutput:t.handlerPipelineOutput}})],1),n("el-col",{attrs:{span:13}},[n("pipeline-output",{ref:"pipelineOutput"})],1)],1)},_a=[],Oa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.pipelines,(function(e){return n("div",{key:e.id,staticStyle:{"font-size":"12px"}},[[n("el-card",{staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{shadow:"hover","body-style":"padding: 2px"}},[n("div",{staticClass:"clearfix",staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",[t._v(t._s(e.jobName))]),n("el-tag",{staticStyle:{"margin-left":"5px"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.isRunning,expression:"pipeline.isRunning"}],staticClass:"el-icon-loading"}),t._v(" 任务编号 : "+t._s(e.jobBuildNumber))]),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"展开日志",placement:"top-start"}},[n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.handlerPipelineOutput(e)}}},[t._v(" Log ")])],1)],1)]),n("div",{staticStyle:{height:"120px"}},[n("pipeline-graph",{attrs:{stages:e.nodes,layout:t.layout}})],1)])]],2)})),0)},Ta=[];n("e5e4"),n("078b"),n("ed60"),n("4a64"),n("69c0"),n("e428"),n("30d0"),n("8b49"),n("ee33"),n("6777"),n("8fbf"),n("3d8a"),n("ff18"),n("b7ae"),n("e3bc"),n("3ceb"),n("eda6");function ja(t){const e=String(t).toLowerCase();for(const n of Object.keys(wa)){const t=wa[n];if(n.toLowerCase()===e||t.toLowerCase()===e)return t}return wa.unknown}(function(t){t["success"]="success",t["failure"]="failure",t["running"]="running",t["queued"]="queued",t["paused"]="paused",t["unstable"]="unstable",t["aborted"]="aborted",t["not_built"]="not_built",t["skipped"]="skipped",t["unknown"]="unknown"})(wa||(wa={}));const Da={nodeSpacingH:120,parallelSpacingH:120,nodeSpacingV:70,nodeRadius:12,terminalRadius:7,curveRadius:12,connectorStrokeWidth:3.5,labelOffsetV:20,smallLabelOffsetV:15,ypStart:55};n("10ff");var Ca,Ja,Pa={name:"svg-spinner",components:{},data:function(){var t=this;return{infiniteRotationRunning:!1,infiniteRotateDegrees:0,isEdgeOrIE:"MSInputMethodContext"in window&&"documentMode"in document||window.navigator.userAgent.indexOf("Edge")>-1,requestAnimationFrameId:0,infiniteLoadingTimer:function(){t.infiniteRotateDegrees+=1.5,t.infiniteRotateDegrees>=360&&(t.infiniteRotateDegrees=0),t.animatedElement.setAttribute("transform","rotate(".concat(t.infiniteRotateDegrees,")")),t.requestAnimationFrameId=requestAnimationFrame(t.infiniteLoadingTimer)}}},props:["radius","result","percentage"],beforeMount:function(){this.infiniteRotationRunning=!1,this.infiniteRotateDegrees=0},beforeDestroy:function(){cancelAnimationFrame(this.requestAnimationFrameId)},mounted:function(){},updated:function(){},render:function(t){var e=this,n=this.result,i=this.radius||12,a=i-.5*no,o=this.percentage,r=["PWGx-progress-spinner",n];n===wa.queued?o=0:"number"!==typeof o||isNaN(o)||o<0?o=0:100===o?(r.push("pc-over-100"),o=0):o>100&&(r.push("spin"),o=25,!this.infiniteRotationRunning&&this.isEdgeOrIE&&(requestAnimationFrame(this.infiniteLoadingTimer),this.infiniteRotationRunning=!0));var s=o/100*360,l=this.describeArcAsPath(0,0,a,0,s),c=a/3;return t("g",{class:r.join(" "),ref:function(t){return e.animatedElement=t}},[t("circle",{attrs:{cx:"0",cy:"0",r:i,strokeWidth:no},class:"halo"}),t("circle",{attrs:{cx:"0",cy:"0",r:a,strokeWidth:no},class:"statusColor"}),t("circle",{attrs:{cx:"0",cy:"0",r:c},class:"inner statusColor"}),o?t("path",{class:n,attrs:{fill:"none",strokeWidth:no,d:l}}):null])},methods:{polarToCartesian:function(t,e,n,i){var a=(i-90)*Math.PI/180;return{x:t+n*Math.cos(a),y:e+n*Math.sin(a)}},describeArcAsPath:function(t,e,n,i,a){var o=this.polarToCartesian(t,e,n,a),r=this.polarToCartesian(t,e,n,i),s=a-i<=180?"0":"1",l=["M",o.x,o.y,"A",n,n,0,s,0,r.x,r.y].join(" ");return l}}},Ia=Pa,Na=function(t){t.options.__source="node_modules/jenkins-pipeline-graph-vue/src/components/support/SvgSpinner.vue"},Ba=Na,Ea=Object(h["a"])(Ia,Ca,Ja,!1,null,null,null);"function"===typeof Ba&&Ba(Ea);var La,Aa,Ma=Ea.exports,Ra="M-0.672,4.29 L0.753,4.29 L0.753,5.78 L-0.672,5.78 L-0.672,4.29 Z M-2.21,-3.94 C-1.63,-4.57 -0.830,-4.88 0.187,-4.88 C1.13,-4.88 1.88,-4.61 2.45,-4.07 C3.01,-3.54 3.30,-2.85 3.30,-2.01 C3.30,-1.51 3.19,-1.10 2.99,-0.782 C2.78,-0.467 2.36,-0.00346 1.73,0.608 C1.27,1.05 0.972,1.43 0.836,1.74 C0.700,2.04 0.632,2.50 0.632,3.10 L-0.644,3.10 C-0.644,2.42 -0.562,1.87 -0.400,1.45 C-0.238,1.03 0.118,0.553 0.668,0.0133 L1.24,-0.553 C1.41,-0.715 1.55,-0.885 1.66,-1.06 C1.85,-1.37 1.94,-1.69 1.94,-2.03 C1.94,-2.50 1.80,-2.90 1.52,-3.25 C1.24,-3.59 0.782,-3.76 0.137,-3.76 C-0.660,-3.76 -1.21,-3.47 -1.52,-2.87 C-1.69,-2.54 -1.79,-2.07 -1.81,-1.45 L-3.09,-1.45 C-3.09,-2.48 -2.80,-3.31 -2.21,-3.94 L-2.21,-3.94 Z",$a="-2.00 2.80 -4.80 0.00 -5.73 0.933 -2.00 4.67 6.00 -3.33 5.07 -4.27",za="4.67 -3.73 3.73 -4.67 0 -0.94 -3.73 -4.67 -4.67 -3.73 -0.94 0 -4.67 3.73 -3.73 4.67 0 0.94 3.73 4.67 4.67 3.73 0.94 0",qa={name:"svg-status",components:{},data:function(){return{}},props:["result","radius"],beforeMount:function(){},beforeDestroy:function(){},mounted:function(){},render:function(t){var e=this.result,n=this.radius||12;if(e===wa.not_built||e===wa.skipped){var i=n-.5*no;return t("g",null,[t("circle",{attrs:{cx:"0",cy:"0",r:n,strokeWidth:no},class:"halo"}),t("circle",{attrs:{cx:"0",cy:"0",r:i,strokeWidth:no},class:"PWGx-svgResultStatusOutline"})])}return t("g",{class:"PWGx-svgResultStatusSolid"},[t("circle",{attrs:{cx:"0",cy:"0",r:n,strokeWidth:no},class:"halo"}),t("circle",{attrs:{cx:"0",cy:"0",r:n},class:"statusColor circle-bg ".concat(e)}),this.getGlyphFor(e,t)])},methods:{getGlyphFor:function(t,e){switch(t){case wa.aborted:return e("g",{class:"PWGx-result-status-glyph"},[e("polygon",{attrs:{points:"-5 -1 5 -1 5 1 -5 1"}})]);case wa.paused:return e("g",{class:"PWGx-result-status-glyph"},[e("polygon",{attrs:{points:"-4,-4.65 -4,4.65 -4,4.65 -1.5,4.65 -1.5,-4.65"}}),e("polygon",{attrs:{points:"4,-4.65 1.5,-4.65 1.5,-4.65 1.5,4.65 4,4.65"}})]);case wa.unstable:return e("g",{class:"PWGx-result-status-glyph"},[e("polygon",{attrs:{points:"-1 -5 1 -5 1 1 -1 1"}}),e("polygon",{attrs:{points:"-1 3 1 3 1 5 -1 5"}})]);case wa.success:return e("g",{class:"PWGx-result-status-glyph"},[e("polygon",{attrs:{points:$a}})]);case wa.failure:return e("g",{class:"PWGx-result-status-glyph"},[e("polygon",{attrs:{points:za}})]);case wa.not_built:case wa.skipped:case wa.queued:case wa.running:case wa.unknown:break;default:this.badResult(t)}return e("g",{class:"PWGx-result-status-glyph"},[e("path",{attrs:{d:Ra}})])},badResult:function(t){console.error("Unexpected Result value",t)}}},Wa=qa,Ua=function(t){t.options.__source="node_modules/jenkins-pipeline-graph-vue/src/components/support/SvgStatus.vue"},Ga=Ua,Fa=Object(h["a"])(Wa,La,Aa,!1,null,null,null);"function"===typeof Ga&&Ga(Fa);var Ha,Va,Xa=Fa.exports,Ka={name:"svg-block",components:{},data:function(){return{}},props:["node"],beforeMount:function(){},beforeDestroy:function(){},mounted:function(){},render:function(t){return t("g",null,[t("rect",{attrs:{x:"-113",y:"25",width:this.node.stage.popInfo.width||"101",height:this.node.stage.popInfo.height||"58"},style:{stroke:"#ff7e5a",fill:"#ff7e5a",strokeWidth:"1px",rx:"5",ry:"5",fillOpacity:.9,strokeOpacity:0}}),t("switch",{},[t("foreignObject",{attrs:{x:"-113",y:"25",width:this.node.stage.popInfo.width||"101",height:this.node.stage.popInfo.height||"120",outline:"0px solid blue",strokeOpacity:0},style:{backgroundColor:"#fe8a6b",fontSize:"12",fontWeight:800,borderRadius:"5px"}},[t("p",{style:{fontSize:"12",color:"white",fontWeight:800,marginBottom:"2px!important",marginTop:"2px",textAlign:"center"}},[this.node.stage.popInfo.title]),t("p",{style:{color:"white",lineHeight:.1,marginBottom:"0px!important",marginTop:"0px!important",textAlign:"center"}},[this.node.stage.popInfo.title?"--------------------------":""]),this.node.stage.popInfo.msg.map((function(e){return t("p",{style:{fontSize:"12",color:"white",fontWeight:800,textAlign:"center",marginBottom:"1px!important",marginTop:"1px!important"}},[e])}))])]),t("polygon",{attrs:{points:"-20,8 -70,25 -40,25"},style:{fontSize:"12",fill:"#ff7e5a",fillOpacity:.9,strokeOpacity:0}})])},methods:{}},Ya=Ka,Qa=function(t){t.options.__source="node_modules/jenkins-pipeline-graph-vue/src/components/support/SvgBlock.vue"},Za=Qa,to=Object(h["a"])(Ya,Ha,Va,!1,null,null,null);"function"===typeof Za&&Za(to);var eo=to.exports;const no=3.5;function io(t,e,n,i){switch(t){case wa.running:case wa.queued:return i(Ma,{props:{radius:n,result:t,percentage:e}});case wa.not_built:case wa.skipped:case wa.success:case wa.failure:case wa.paused:case wa.unstable:case wa.aborted:case wa.unknown:return i(Xa,{props:{radius:n,result:t}});default:return oo(t),i(Xa,{props:{radius:n,result:wa.unknown}})}}function ao(t,e){return e(eo,{props:{node:t}})}function oo(t){console.error("Unexpected Result value",t)}var ro,so=n("53ca"),lo=5,co=50;(function(t){t[t["INITIAL"]=0]="INITIAL",t[t["MEASURE"]=1]="MEASURE",t[t["FLUID"]=2]="FLUID",t[t["STABLE"]=3]="STABLE"})(ro||(ro={}));var uo,po,fo={name:"truncating-label",components:{},data:function(){return{completeText:"",innerText:"",renderState:ro.INITIAL,textCutoffLength:0,longestGood:0,shortestBad:0,loopCount:0}},props:["children","className","style2"],beforeMount:function(){this.handleProps(this.children)},beforeUpdate:function(){this.invalidateSize()},beforeDestroy:function(){this.checkSizeRequest&&(cancelAnimationFrame(this.checkSizeRequest),this.checkSizeRequest=0)},mounted:function(){this.invalidateSize()},updated:function(){},render:function(t){var e=this.className||"",n=this.style2||{},i=Object.assign({overflow:"hidden",wordWrap:"break-word"},n);return this.renderState!==ro.STABLE&&(i.opacity=0),t("div",{class:"TruncatingLabel "+e,ref:"targetWW",style:i,attrs:{title:this.innerText}},this.innerText)},methods:{handleProps:function(t){var e=t||"";"string"===typeof e?this.completeText=e:null===e||!1===e?this.completeText="":(console.warn("TruncatingLabel - Label children must be string but is",Object(so["a"])(e),e),this.completeText="Contents must be string"),this.renderState=ro.MEASURE,this.innerText=this.completeText,this.loopCount=0,this.longestGood=lo,this.shortestBad=this.innerText.length},invalidateSize:function(){var t=this;this.checkSizeRequest||(this.checkSizeRequest=requestAnimationFrame((function(){return t.checkSize()})))},checkSize:function(){if(this.checkSizeRequest=0,this.renderState!==ro.STABLE){var t=this.$refs.targetWW,e=t.scrollHeight,n=t.clientHeight,i=t.scrollWidth,a=t.clientWidth,o=e>n||i>a;if(this.renderState===ro.MEASURE&&(o?(this.renderState=ro.FLUID,this.longestGood=lo,this.textCutoffLength=this.shortestBad=this.innerText.length):this.renderState=ro.STABLE),this.renderState===ro.FLUID){this.loopCount++;var r,s=this.textCutoffLength;this.loopCount>=co?(console.error("TruncatingLabel - TOO MANY LOOPS"),r=!1):s<=lo?r=!1:Math.abs(this.shortestBad-this.longestGood)<2?r=!1:(o?this.shortestBad=Math.min(this.shortestBad,s):this.longestGood=Math.max(this.longestGood,s),this.textCutoffLength=Math.floor((this.longestGood+this.shortestBad)/2),this.innerText=this.completeText.substr(0,this.textCutoffLength)+"…",t.innerText=this.innerText,r=!0),r?this.invalidateSize():this.renderState=ro.STABLE}}}}},mo=fo,bo=function(t){t.options.__source="node_modules/jenkins-pipeline-graph-vue/src/components/support/TruncatingLabel.vue"},ho=bo,go=Object(h["a"])(mo,uo,po,!1,null,null,null);"function"===typeof ho&&ho(go);var vo=go.exports;const yo=70;function xo(t,e){const n=wo(t),{nodeSpacingH:i,ypStart:a}=e,o={x:0,y:0,name:"Start",id:-1,isPlaceholder:!0,key:"start-node",type:"start"},r={x:0,y:0,name:"End",id:-2,isPlaceholder:!0,key:"end-node",type:"end"},s=[{rows:[[o]],centerX:0,hasBranchLabels:!1,startX:0},...n,{rows:[[r]],centerX:0,hasBranchLabels:!1,startX:0}];So(s,e);const l=ko(s),c=_o(s),u=Oo(s),d=To(s);let p=0,f=200;for(const m of s)for(const t of m.rows)for(const e of t)p=Math.max(p,e.x+i/2),f=Math.max(f,e.y+a);return{nodeColumns:s,connections:d,bigLabels:l,smallLabels:c,branchLabels:u,measuredWidth:p,measuredHeight:f}}function wo(t=[]){const e=[];for(const n of t){const t=n.children&&n.children.length?n.children:[n],i={topStage:n,rows:[],centerX:0,startX:0,hasBranchLabels:!1};for(const e of t){const t=[];let n=e;while(n)n.seqContainerName&&(i.hasBranchLabels=!0),t.push({x:0,y:0,name:n.name,id:n.id,stage:n,isPlaceholder:!1,key:"n_"+n.id}),n=n.nextSibling;i.rows.push(t)}e.push(i)}return e}function So(t,{nodeSpacingH:e,parallelSpacingH:n,nodeSpacingV:i,ypStart:a}){let o,r=e/2;for(const s of t){const t=s.rows[0][0];let l=a;o&&(o.isPlaceholder||t.isPlaceholder?r+=Math.floor(.7*e):r+=e);let c=0;for(const e of s.rows)c=Math.max(c,e.length);const u=r;s.hasBranchLabels&&(r+=yo);let d=r;for(const e of s.rows){let t=r;t+=Math.round((c-e.length)*n*.5);for(const i of e)d=Math.max(d,t),i.x=t,i.y=l,t+=n;l+=i}s.centerX=Math.round((u+d)/2),s.startX=u,r=d,o=t}}function ko(t){const e=[];for(const n of t){const t=n.rows[0][0],i=n.topStage,a=i?i.name:t.name,o="l_b_"+t.key;let r=n.centerX;n.hasBranchLabels&&(r+=Math.floor(yo/2)),e.push({x:r,y:t.y,node:t,stage:i,text:a,key:o})}return e}function _o(t){const e=[];for(const n of t)for(const t of n.rows)for(const i of t){if(i.isPlaceholder||i.stage===n.topStage)continue;const t={x:i.x,y:i.y,text:i.name,key:"l_s_"+i.key,node:i};!1===i.isPlaceholder&&(t.stage=i.stage),e.push(t)}return e}function Oo(t){const e=[];let n=0;for(const i of t)if(i.hasBranchLabels)for(const t of i.rows){const a=t[0];!a.isPlaceholder&&a.stage.seqContainerName&&e.push({x:i.startX,y:a.y,key:`branchLabel-${++n}`,node:a,text:a.stage.seqContainerName})}return e}function To(t){const e=[];let n=[],i=[];for(const a of t)if(a.topStage&&"skipped"===a.topStage.state)i.push(a.rows[0][0]);else{n.length&&e.push({sourceNodes:n,destinationNodes:a.rows.map(t=>t[0]),skippedNodes:i,hasBranchLabels:a.hasBranchLabels});for(const t of a.rows)for(let n=0;n<t.length-1;n++)e.push({sourceNodes:[t[n]],destinationNodes:[t[n+1]],skippedNodes:[],hasBranchLabels:!1});n=a.rows.map(t=>t[t.length-1]),i=[]}return e}function jo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Do(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jo(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Co,Jo,Po={name:"jenkins-pipeline-graph-vue",components:{},data:function(){return{nodeColumns:[],connections:[],bigLabels:[],smallLabels:[],branchLabels:[],measuredWidth:0,measuredHeight:0,layout2:Object.assign({},Da,this.layout),selectedStage2:this.selectedStage,stages2:this.stages}},props:["layout","selectedStage","stages","onNodeClick"],beforeMount:function(){this.stagesUpdated(this.stages)},beforeUpdate:function(){var t,e=this,n=!1;this.layout!=this.layout2&&(t=Object.assign({},t,{layout2:Object.assign({},Da,this.layout2)}),n=!0),this.selectedStage!==this.selectedStage2&&(t=Object.assign({},t,{selectedStage2:this.selectedStage})),this.stages!==this.stages2&&(n=!0);var i=function(){n&&e.stagesUpdated(e.stages)};i()},beforeDestroy:function(){},mounted:function(){},updated:function(){},watch:{stages:function(){this.stagesUpdated(this.stages)},selectedStage:function(){this.selectedStage2=this.selectedStage}},render:function(t){var e=this,n=this.nodeColumns,i=this.connections,a=this.bigLabels,o=this.smallLabels,r=this.branchLabels,s=this.measuredWidth,l=this.measuredHeight,c={position:"relative",overflow:"visible"},u=[];i.forEach((function(n){e.renderCompositeConnection(n,u,t)})),this.renderSelectionHighlight(u,t);var d=!0,p=!1,f=void 0;try{for(var m,b=n[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var h=m.value,g=!0,v=!1,y=void 0;try{for(var x,w=h.rows[Symbol.iterator]();!(g=(x=w.next()).done);g=!0){var S=x.value,k=!0,_=!1,O=void 0;try{for(var T,j=S[Symbol.iterator]();!(k=(T=j.next()).done);k=!0){var D=T.value;this.renderNode(D,u,t)}}catch(C){_=!0,O=C}finally{try{k||null==j.return||j.return()}finally{if(_)throw O}}}}catch(C){v=!0,y=C}finally{try{g||null==w.return||w.return()}finally{if(v)throw y}}}}catch(C){p=!0,f=C}finally{try{d||null==b.return||b.return()}finally{if(p)throw f}}return t("div",{class:"PWGx-PipelineGraph-container"},[t("div",{style:c,class:"PWGx-PipelineGraph"},[t("svg",{attrs:{width:s,height:l}},u),a.map((function(n){return e.renderBigLabel(n,t)})),o.map((function(n){return e.renderSmallLabel(n,t)})),r.map((function(n){return e.renderSequentialContainerLabel(n,t)}))])])},methods:{connectorKey:function(t,e){return"c_"+t.key+"_to_"+e.key},stagesUpdated:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=xo(t,this.layout2);this.nodeColumns=e.nodeColumns,this.connections=e.connections,this.bigLabels=e.bigLabels,this.smallLabels=e.smallLabels,this.branchLabels=e.branchLabels,this.measuredWidth=e.measuredWidth,this.measuredHeight=e.measuredHeight},renderBigLabel:function(t,e){var n=this.layout2,i=n.nodeSpacingH,a=n.labelOffsetV,o=n.connectorStrokeWidth,r=n.ypStart,s=i-2*o,l=r-a,c=Math.floor(s/-2),u={position:"absolute",width:s+"px",maxHeight:l+"px",textAlign:"center",marginLeft:c+"px"},d=t.x,p=this.measuredHeight-t.y+a,f=Object.assign({},u,{bottom:p+"px",left:d+"px"}),m=["PWGx-pipeline-big-label"];return(this.stageIsSelected(t.stage)||this.stageChildIsSelected(t.stage))&&m.push("selected"),e(vo,{props:{className:m.join(" "),style2:f,children:t.text},key:t.key},[t.text])},renderSmallLabel:function(t,e){var n=this.layout2,i=n.nodeSpacingH,a=n.nodeSpacingV,o=n.curveRadius,r=n.connectorStrokeWidth,s=n.nodeRadius,l=n.smallLabelOffsetV,c=Math.floor(i-2*o-2*r),u=Math.floor(a-l-s-no),d=Math.floor(-.5*c),p=t.x+d,f=t.y+l,m={top:f+"px",left:p+"px",position:"absolute",width:c+"px",maxHeight:u+"px",textAlign:"center"},b=Object.assign({},m),h=["PWGx-pipeline-small-label"];return t.stage&&this.stageIsSelected(t.stage)&&h.push("selected"),e(vo,{props:{className:h.join(" "),style2:b,children:t.text},key:t.key},[t.text])},renderSequentialContainerLabel:function(t,e){var n=this.layout2.nodeRadius,i=t.text,a=t.y,o=t.x-Math.floor(2*n),r={top:a,left:o,marginTop:"-0.5em",position:"absolute",maxWidth:yo,overflow:"hidden",textOverflow:"ellipsis",background:"white",padding:"0 7px",lineHeight:"1",whiteSpace:"nowrap"};return e("div",{style:r,key:t.key,attrs:{title:i}},i)},renderCompositeConnection:function(t,e,n){var i=t.sourceNodes,a=t.destinationNodes,o=t.skippedNodes,r=t.hasBranchLabels;0===o.length?this.renderBasicConnections(i,a,e,r,n):this.renderSkippingConnections(i,a,o,e,r,n)},renderBasicConnections:function(t,e,n,i,a){var o=this.layout2,r=o.connectorStrokeWidth,s=o.nodeSpacingH,l=s/2,c={class:"PWGx-pipeline-connector",attrs:{strokeWidth:r}};if(this.renderHorizontalConnection(t[0],e[0],c,n,a),1!==t.length||1!==e.length){for(var u=t[0].x,d=e[0].x,p=1;p<t.length;p++)u=Math.max(u,t[p].x);for(var f=1;f<e.length;f++)d=Math.min(d,e[f].x);var m=Math.round(u+l),b=!0,h=!1,g=void 0;try{for(var v,y=t.slice(1)[Symbol.iterator]();!(b=(v=y.next()).done);b=!0){var x=v.value;this.renderBasicCurvedConnection(x,e[0],m,n,a)}}catch(D){h=!0,g=D}finally{try{b||null==y.return||y.return()}finally{if(h)throw g}}var w=Math.round(d-l);i&&(w-=yo);var S=!0,k=!1,_=void 0;try{for(var O,T=e.slice(1)[Symbol.iterator]();!(S=(O=T.next()).done);S=!0){var j=O.value;this.renderBasicCurvedConnection(t[0],j,w,n,a)}}catch(D){k=!0,_=D}finally{try{S||null==T.return||T.return()}finally{if(k)throw _}}}},renderSkippingConnections:function(t,e,n,i,a,o){var r,s,l=this.layout2,c=l.connectorStrokeWidth,u=l.nodeRadius,d=l.terminalRadius,p=l.curveRadius,f=l.nodeSpacingV,m=l.nodeSpacingH,b=m/2,h={class:"PWGx-pipeline-connector",attrs:{strokeWidth:c}},g={class:"PWGx-pipeline-connector-skipped",attrs:{strokeWidth:c}},v=n[n.length-1];r=t[0];var y=!0,x=!1,w=void 0;try{for(var S,k=n[Symbol.iterator]();!(y=(S=k.next()).done);y=!0)s=S.value,this.renderHorizontalConnection(r,s,g,i,o),r=s}catch(zt){x=!0,w=zt}finally{try{y||null==k.return||k.return()}finally{if(x)throw w}}this.renderHorizontalConnection(r,e[0],g,i,o);for(var _=t[0].x,O=e[0].x,T=1;T<t.length;T++)_=Math.max(_,t[T].x);for(var j=1;j<e.length;j++)O=Math.min(O,e[j].x);r=t[0],s=n[0];var D=!0,C=!1,J=void 0;try{for(var P,I=t.slice(1)[Symbol.iterator]();!(D=(P=I.next()).done);D=!0){r=P.value;var N=Math.round(_+b),B=r.isPlaceholder?d:u,E=this.connectorKey(r,s),L=r.x+B-no/2,A=r.y,M=N,R=s.y,$="M ".concat(L," ").concat(A)+this.svgBranchCurve(L,A,M,R,N,p);i.push(o("path",Object.assign({},h,{key:E,attrs:{d:$,fill:"none",strokeWidth:h.attrs.strokeWidth}})))}}catch(zt){C=!0,J=zt}finally{try{D||null==I.return||I.return()}finally{if(C)throw J}}r=v;var z=Math.round(O-b);a&&(z-=yo);var q=!0,W=!1,U=void 0;try{for(var G,F=e.slice(1)[Symbol.iterator]();!(q=(G=F.next()).done);q=!0){s=G.value;var H=s.isPlaceholder?d:u,V=this.connectorKey(r,s),X=z,K=r.y,Y=s.x-H+no/2,Q=s.y,Z="M ".concat(X," ").concat(K)+this.svgBranchCurve(X,K,Y,Q,z,p);i.push(o("path",Object.assign({},h,{key:V,attrs:{d:Z,fill:"none",strokeWidth:h.attrs.strokeWidth}})))}}catch(zt){W=!0,U=zt}finally{try{q||null==F.return||F.return()}finally{if(W)throw U}}r=t[0],s=e[0];var tt=r.isPlaceholder?d:u,et=s.isPlaceholder?d:u,nt=this.connectorKey(r,s),it=.5*f,at=1.54*p,ot=.257*it,rt=.2*it,st=Math.round(.7071*it),lt=r.x+tt-no/2,ct=r.y,ut=Math.round(n[0].x-b),dt=ct,pt=ut+at,ft=dt,mt=n[0].x,bt=ct+it,ht=mt-ot,gt=bt,vt=n[0].x-st,yt=n[0].y+st,xt=vt-rt,wt=yt-rt,St=vt+rt,kt=yt+rt,_t=v.x,Ot=bt,Tt=_t+ot,jt=Ot,Dt=Math.round(v.x+b),Ct=s.y,Jt=Dt-at,Pt=Ct,It=v.x+st,Nt=v.y+st,Bt=It-rt,Et=Nt+rt,Lt=It+rt,At=Nt-rt,Mt=s.x-et+no/2,Rt=s.y,$t="M ".concat(lt," ").concat(ct)+"L ".concat(ut," ").concat(dt)+"C ".concat(pt," ").concat(ft," ").concat(xt," ").concat(wt," ").concat(vt," ").concat(yt)+"C ".concat(St," ").concat(kt," ").concat(ht," ").concat(gt," ").concat(mt," ").concat(bt)+"L ".concat(_t," ").concat(Ot)+"C ".concat(Tt," ").concat(jt," ").concat(Bt," ").concat(Et," ").concat(It," ").concat(Nt)+"C ".concat(Lt," ").concat(At," ").concat(Jt," ").concat(Pt," ").concat(Dt," ").concat(Ct)+"L ".concat(Mt," ").concat(Rt)+"";i.push(o("path",Object.assign({},h,{key:nt,attrs:{d:$t,fill:"none",strokeWidth:h.attrs.strokeWidth}})))},renderHorizontalConnection:function(t,e,n,i,a){var o=this.layout2,r=o.nodeRadius,s=o.terminalRadius,l=t.isPlaceholder?s:r,c=e.isPlaceholder?s:r,u=this.connectorKey(t,e),d=t.x+l-no/2,p=e.x-c+no/2,f=t.y;i.push(a("line",Object.assign({},n,{key:u,attrs:{x1:d,y1:f,x2:p,y2:f,strokeWidth:n.attrs.strokeWidth}})))},renderBasicCurvedConnection:function(t,e,n,i,a){var o=this.layout2,r=o.nodeRadius,s=o.terminalRadius,l=o.curveRadius,c=o.connectorStrokeWidth,u=t.isPlaceholder?s:r,d=e.isPlaceholder?s:r,p=this.connectorKey(t,e),f={x:t.x+u-no/2,y:t.y},m={x:e.x-d+no/2,y:e.y},b={class:"PWGx-pipeline-connector",attrs:{strokeWidth:c}},h="M ".concat(f.x," ").concat(f.y)+this.svgBranchCurve(f.x,f.y,m.x,m.y,n,l);i.push(a("path",Object.assign({},b,{key:p,attrs:{d:h,fill:"none",strokeWidth:b.attrs.strokeWidth}})))},svgBranchCurve:function(t,e,n,i,a,o){var r=Math.sign(i-e),s=a-o-t+o*r,l=n-o-a-o*r,c=i-e-2*o*r,u=r*o;return" l ".concat(s," 0")+" c ".concat(o," 0 ").concat(o," ").concat(u," ").concat(o," ").concat(u)+" l 0 ".concat(c)+" c 0 ".concat(u," ").concat(o," ").concat(u," ").concat(o," ").concat(u)+" l ".concat(l," 0")},renderNode:function(t,e,n){var i=this,a=!1,o=this.layout2,r=o.nodeRadius,s=o.connectorStrokeWidth,l=o.terminalRadius,c=t.key,u=[];if(!0===t.isPlaceholder)u.push(n("circle",{attrs:{r:l},class:"PWGx-pipeline-node-terminal"}));else{var d=t.stage,p=d.completePercent,f=void 0===p?0:p,m=d.title,b=d.state,h=ja(b);u.push(io(h,f,r,n)),t.stage&&t.stage.popInfo&&u.push(ao(t,n)),m&&u.push(n("title",null,m)),a=this.stageIsSelected(t.stage)}var g={};!1===t.isPlaceholder&&"skipped"!==t.stage.state&&(g.cursor="pointer"),u.push(n("circle",Object.assign({attrs:Do({r:r+2*s,"fill-opacity":"0",stroke:"none"},g),class:"PWGx-pipeline-node-hittarget",on:{click:function(){return i.nodeClicked(t)}}})));var v={key:c,attrs:{transform:"translate(".concat(t.x,",").concat(t.y,")")},class:a?"PWGx-pipeline-node-selected":"PWGx-pipeline-node"};e.push(n("g",v,[].concat(u)))},renderSelectionHighlight:function(t,e){var n,i=this.layout2,a=i.nodeRadius,o=i.connectorStrokeWidth,r=Math.ceil(a+.5*o+1),s=!0,l=!1,c=void 0;try{t:for(var u,d=this.nodeColumns[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value,f=!0,m=!1,b=void 0;try{for(var h,g=p.rows[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var v=h.value,y=!0,x=!1,w=void 0;try{for(var S,k=v[Symbol.iterator]();!(y=(S=k.next()).done);y=!0){var _=S.value;if(!1===_.isPlaceholder&&this.stageIsSelected(_.stage)){n=_;break t}}}catch(T){x=!0,w=T}finally{try{y||null==k.return||k.return()}finally{if(x)throw w}}}}catch(T){m=!0,b=T}finally{try{f||null==g.return||g.return()}finally{if(m)throw b}}}}catch(T){l=!0,c=T}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}if(n){var O="translate(".concat(n.x," ").concat(n.y,")");t.push(e("g",{class:"PWGx-pipeline-selection-highlight",attrs:{transform:O},key:"selection-highlight"},[e("circle",{attrs:{r:r,strokeWidth:o}})]))}},stageIsSelected:function(t){var e=this.selectedStage2;return e&&t&&e.id===t.id||!1},stageChildIsSelected:function(t){if(t){var e=t.children,n=this.selectedStage2;if(e&&n){var i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value,c=l;while(c){if(c.id===n.id)return!0;c=c.nextSibling}}}catch(u){a=!0,o=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}}return!1},nodeClicked:function(t){if(!1===t.isPlaceholder&&"skipped"!==t.stage.state){var e=t.stage,n=this.onNodeClick;n&&n(e.name,e.id),this.selectedStage2=e}}}},Io=Po,No=(n("243d"),function(t){t.options.__source="node_modules/jenkins-pipeline-graph-vue/src/components/PipelineGraph.vue"}),Bo=No,Eo=Object(h["a"])(Io,Co,Jo,!1,null,"c3ed3d9e",null);"function"===typeof Bo&&Bo(Eo);var Lo=Eo.exports,Ao=Lo,Mo={nodeSpacingH:90,parallelSpacingH:400,nodeRadius:12,terminalRadius:10,curveRadius:5,connectorStrokeWidth:8,labelOffsetV:20,smallLabelOffsetV:10},Ro="ws/pipeline",$o={name:"TaskPipeline",props:["buildType"],data:function(){return{title:"持续集成",activeName:"myApplication",socket:null,socketURI:T["a"].wsUrl(Ro),layout:Mo,pipelines:[]}},components:{PipelineGraph:Ao},mounted:function(){this.initSocket()},destroyed:function(){},methods:{initSocket:function(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError(),this.socketOnMessage()},socketOnOpen:function(){var t=this,e=this;this.socket.onopen=function(){console.log("WebSocket链接成功！");var n={status:"INITIAL",token:T["a"].cookies.get("token"),buildType:t.buildType};e.socketOnSend(JSON.stringify(n))}},socketOnClose:function(){var t=this;this.socket.onclose=function(){console.log("WebSocket链接关闭,尝试重新链接！"),setTimeout((function(){t.initSocket()}),15e3)}},socketOnError:function(){this.socket.onerror=function(){}},socketOnSend:function(t){this.socket.send(t)},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){t.pipelines=JSON.parse(e.data)}},handlerPipelineOutput:function(t){var e={buildType:this.buildType,buildId:t.id};this.$emit("handlerOutput",e)}}},zo=$o,qo=function(t){t.options.__source="src/components/opscloud/pipeline/TaskPipeline.vue"},Wo=qo,Uo=Object(h["a"])(zo,Oa,Ta,!1,null,"2bb48dc9",null);"function"===typeof Wo&&Wo(Uo);var Go=Uo.exports,Fo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",staticStyle:{height:"15px"},attrs:{slot:"header"},slot:"header"},[n("span",[n("el-tag",[t._v("Console Output")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.closeOutput}},[t._v("Close ")])],1)]),n("div",{staticClass:"xterm",attrs:{id:"outputXterm"}})])],1)},Ho=[],Vo="ws/job/output",Xo="XTERM",Ko={name:"PipelineOutput",data:function(){return{title:"构建日志详情",socketURI:T["a"].wsUrl(Vo),timer:null,interval:15e3,initParam:{buildType:"",buildId:""},term:null,xtermSize:{rows:30},labelWidth:"100px",xtermTheme:{foreground:"#FFFFFF",background:"#606266",cursor:"help"}}},props:["formStatus"],components:{},mounted:function(){this.setXTermSetting()},beforeDestroy:function(){},methods:{setXTermSetting:function(){var t=this;Object(C["a"])(Xo).then((function(e){if(e.success)try{t.xtermTheme.foreground=e.body["XTERM_FOREGROUND"],t.xtermTheme.background=e.body["XTERM_BACKGROUND"]}catch(n){}else t.$message.error(e.msg)}))},setTimer:function(){var t=this;this.timer=setInterval((function(){t.handlerHeartbeat()}),this.interval)},initSocket:function(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError(),this.socketOnMessage(),this.setTimer()},closeOutput:function(){null!==this.socket&&this.socket.close(),clearInterval(this.timer),null!==this.term&&(this.term.clear(),this.term.dispose(),this.term=null)},initLogOutput:function(){null!==this.term&&this.term.dispose();var t=new j["Terminal"]({rendererType:"canvas",allowTransparency:!0,fontSize:11,rows:this.xtermSize.rows,theme:this.xtermTheme,termName:"xterm",visualBell:!1,popOnBell:!1,scrollback:5e3,screenKeys:!1,debug:!1,cancelEvents:!1,cursorStyle:"bar",cursorBlink:!1,convertEol:!0,disableStdin:!0}),e=new D["FitAddon"];t.loadAddon(e),t.open(document.getElementById("outputXterm")),t.focus(),this.term=t},initData:function(t){var e=this;this.initParam=t,setTimeout((function(){e.initSocket()}),500)},socketOnOpen:function(){var t=this;this.socket.onopen=function(){try{t.$nextTick((function(){t.initLogOutput();var e={status:"INITIAL",buildType:t.initParam.buildType,buildId:t.initParam.buildId};t.socketOnSend(JSON.stringify(e))}))}catch(e){}}},socketOnClose:function(){var t=this;this.socket.onclose=function(){null!==t.socket&&t.socket.close(),clearInterval(t.timer)}},socketOnError:function(){this.socket.onerror=function(){}},socketOnSend:function(t){this.socket.send(t)},socketOnMessage:function(){var t=this;this.socket.onmessage=function(e){t.term.write(e.data)}},handlerHeartbeat:function(){var t={status:"HEARTBEAT"};try{this.socketOnSend(JSON.stringify(t))}catch(e){}},handleClick:function(){this.$emit("input",!this.value)}}},Yo=Ko,Qo=function(t){t.options.__source="src/components/opscloud/pipeline/PipelineOutput.vue"},Zo=Qo,tr=Object(h["a"])(Yo,Fo,Ho,!1,null,"563a187b",null);"function"===typeof Zo&&Zo(tr);var er=tr.exports,nr={data:function(){return{radio:"build"}},components:{TaskPipeline:Go,PipelineOutput:er},beforeDestroy:function(){},mounted:function(){},methods:{handlerSwitch:function(){this.buildType=!this.buildType},handlerPipelineOutput:function(t){this.$refs.pipelineOutput.initData(t)}}},ir=nr,ar=(n("a9b0"),function(t){t.options.__source="src/components/opscloud/pipeline/MyTaskPipeline.vue"}),or=ar,rr=Object(h["a"])(ir,ka,_a,!1,null,null,null);"function"===typeof or&&or(rr);var sr=rr.exports,lr={data:function(){return{title:"持续集成",activeName:"application",buildType:!0,timer:null,intervalTime:12e3}},components:{MyApplicationTable:x,engineChart:w["a"],MyCiJobTable:Gi,MyCdJobTable:ea,AnnouncementCarousel:da,BlockPlatformStatus:Sa,MyTaskPipeline:sr},beforeDestroy:function(){clearInterval(this.timer)},mounted:function(){},methods:{setTimer:function(){var t=this;null===this.timer&&(this.timer=setInterval((function(){t.buildType?t.$refs.myCiJobTable.fetchData():t.$refs.myCdJobTable.fetchData()}),this.intervalTime))},handleClick:function(){},handlerSwitch:function(){this.buildType=!this.buildType},handlerSelApplication:function(t){this.$refs.myCiJobTable.initData(t),this.$refs.myCdJobTable.initData(t),this.setTimer()}}},cr=lr,ur=(n("adf7"),function(t){t.options.__source="src/pages/workbench/continuous-integration/index.vue"}),dr=ur,pr=Object(h["a"])(cr,i,a,!1,null,null,null);"function"===typeof dr&&dr(pr);e["default"]=pr.exports},"5cea":function(t,e,n){"use strict";var i=n("2e1e").IteratorPrototype,a=n("9d0d"),o=n("d587"),r=n("a635"),s=n("b33e"),l=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=a(i,{next:o(1,n)}),r(t,c,!1,!0),s[c]=l,t}},"5dd2":function(t,e,n){var i=n("2f86"),a=n("447f"),o=n("2f17"),r=a("species");t.exports=function(t){return o>=51||!i((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"5e32":function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"5eba":function(t,e,n){var i,a,o,r=n("6768"),s=n("dc26"),l=n("b388"),c=n("0f0e"),u=n("b598"),d=n("3ec4"),p=n("3fb9"),f=s.WeakMap,m=function(t){return o(t)?a(t):i(t,{})},b=function(t){return function(e){var n;if(!l(e)||(n=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(r){var h=new f,g=h.get,v=h.has,y=h.set;i=function(t,e){return y.call(h,t,e),e},a=function(t){return g.call(h,t)||{}},o=function(t){return v.call(h,t)}}else{var x=d("state");p[x]=!0,i=function(t,e){return c(t,x,e),e},a=function(t){return u(t,x)?t[x]:{}},o=function(t){return u(t,x)}}t.exports={set:i,get:a,has:o,enforce:m,getterFor:b}},"618e":function(t,e,n){var i=n("257f");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"61df":function(t,e,n){"use strict";var i=n("d2ac"),a=n.n(i);a.a},"65ce":function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"o",(function(){return r})),n.d(e,"w",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"v",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"r",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"m",(function(){return h})),n.d(e,"i",(function(){return g})),n.d(e,"b",(function(){return v})),n.d(e,"q",(function(){return y})),n.d(e,"g",(function(){return x})),n.d(e,"t",(function(){return w})),n.d(e,"x",(function(){return S})),n.d(e,"p",(function(){return k})),n.d(e,"n",(function(){return _})),n.d(e,"d",(function(){return O})),n.d(e,"s",(function(){return T})),n.d(e,"h",(function(){return j})),n.d(e,"u",(function(){return D}));var i=n("9bd2"),a="/application";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/my/page/query",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/my/rate/update",method:"put",data:t})}function l(t){return Object(i["a"])({url:a+"/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:a+"/update",method:"put",data:t})}function u(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}function d(t){return Object(i["a"])({url:a+"/scm/member/query?applicationId="+t,method:"get"})}function p(t,e){return Object(i["a"])({url:a+"/scm/member/add?applicationId="+t+"&projectId="+e,method:"put"})}function f(t){return Object(i["a"])({url:a+"/scm/member/remove?id="+t,method:"delete"})}function m(t){return Object(i["a"])({url:a+"/scm/member/branch/query",method:"post",data:t})}function b(t){return Object(i["a"])({url:a+"/scm/member/branch/create",method:"post",data:t})}function h(t){return Object(i["a"])({url:a+"/scm/member/branch/commit/query",method:"post",data:t})}function g(t){return Object(i["a"])({url:a+"/engine/query?applicationId="+t,method:"get"})}function v(t,e){return Object(i["a"])({url:a+"/engine/add?applicationId="+t+"&jenkinsInstanceId="+e,method:"put"})}function y(t){return Object(i["a"])({url:a+"/engine/remove?id="+t,method:"delete"})}function x(t,e){return Object(i["a"])({url:a+"/user/grant?applicationId="+t+"&userId="+e,method:"put"})}function w(t,e){return Object(i["a"])({url:a+"/user/revoke?applicationId="+t+"&userId="+e,method:"delete"})}function S(t,e){return Object(i["a"])({url:a+"/user/permission/update?applicationId="+t+"&userId="+e,method:"put"})}function k(t){return Object(i["a"])({url:a+"/server/group/page/query",method:"post",data:t})}function _(t){return Object(i["a"])({url:a+"/server/group/query?applicationId="+t,method:"get"})}function O(t){return Object(i["a"])({url:a+"/server/group/add",method:"put",data:t})}function T(t){return Object(i["a"])({url:a+"/server/group/remove?id="+t,method:"delete"})}function j(t,e){return Object(i["a"])({url:a+"/build/job/user/grant?ciJobId="+t+"&userId="+e,method:"put"})}function D(t,e){return Object(i["a"])({url:a+"/build/job/user/revoke?ciJobId="+t+"&userId="+e,method:"delete"})}},6768:function(t,e,n){var i=n("dc26"),a=n("ae0d"),o=i.WeakMap;t.exports="function"===typeof o&&/native code/.test(a(o))},6777:function(t,e,n){var i=n("f2df"),a=n("bb1b");i({target:"Math",stat:!0},{sign:a})},6889:function(t,e,n){},6912:function(t,e,n){var i=n("2f86");t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},"69c0":function(t,e,n){"use strict";var i=n("f2df"),a=n("5406").filter,o=n("5dd2"),r=n("ac6d"),s=o("filter"),l=r("filter");i({target:"Array",proto:!0,forced:!s||!l},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},7439:function(t,e,n){},7648:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var i=n("9bd2"),a="/user/application";function o(t){return Object(i["a"])({url:a+"/exclude/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/include/page/query",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/build/job/exclude/page/query",method:"post",data:t})}function l(t){return Object(i["a"])({url:a+"/build/job/include/page/query",method:"post",data:t})}},"784e":function(t,e,n){var i=n("dc26"),a=n("0f0e");t.exports=function(t,e){try{a(i,t,e)}catch(n){i[t]=e}return e}},"79df":function(t,e,n){var i=n("2f86"),a=n("257f"),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?o.call(t,""):Object(t)}:Object},"7acb":function(t,e,n){},"7d80":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c}));var i=n("9bd2"),a="/jenkins/instance";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/update",method:"put",data:t})}function l(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}function c(t){return Object(i["a"])({url:a+"/active/set?id="+t,method:"get"})}},"7fb6":function(t,e,n){var i=n("f526"),a=n("9db1"),o=a.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},"7fd9":function(t,e,n){var i=n("b388"),a=n("618e"),o=n("447f"),r=o("species");t.exports=function(t,e){var n;return a(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[r],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"81ce":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.formStatus.visible,"before-close":t.closeDialog},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:24}},[n("el-select",{staticStyle:{display:"inline-block","max-width":"200px","margin-left":"10px"},attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索用户","remote-method":t.getUser,loading:t.searchLoading},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.username,value:e.id}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.username))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"10px"}},[t._v(t._s(e.displayName))])])})),1),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:""===t.userId,plain:"",size:"mini"},on:{click:function(e){return t.grantUser()}}},[t._v("授权 ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{prop:"displayName",label:"显示名"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),n("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"ADMIN"===e.row.userPermission.roleName?"danger":"success",size:"small"}},[t._v(" "+t._s("ADMIN"===e.row.userPermission.roleName?"管理员":"用户")+" ")])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowUpdatePermission(e.row)}}},[t._v(t._s("ADMIN"===e.row.userPermission.roleName?"降权":"提权"))]),n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerRowRevokeUser(e.row)}}},[t._v("撤销")])]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize},on:{"current-change":t.paginationCurrentChange}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("关闭")])],1)],1)},a=[],o=n("7648"),r=n("65ce"),s={data:function(){return{title:"应用授权管理",application:{},tableData:[],loading:!1,searchLoading:!1,userId:"",userOptions:[],pagination:{currentPage:1,pageSize:10,total:0},queryParam:{queryName:""}}},name:"ApplicationPermissionDialog",props:["formStatus"],mixins:[],mounted:function(){},methods:{initData:function(t){this.application=t,this.userId="",this.pagination.currentPage=1,this.getUser(""),this.fetchData()},getUser:function(t){var e=this;this.searchLoading=!0;var n={queryName:t,applicationId:this.application.id,page:1,length:10};Object(o["c"])(n).then((function(t){e.userOptions=t.body.data,e.searchLoading=!1}))},closeDialog:function(){this.formStatus.visible=!1},handleClick:function(){this.$emit("input",!this.value)},grantUser:function(){var t=this;setTimeout((function(){Object(r["g"])(t.application.id,t.userId).then((function(e){t.$message({message:"成功",type:"success"}),t.userId="",t.getUser(""),t.fetchData()}))}),30)},handlerRowUpdatePermission:function(t){var e=this;setTimeout((function(){Object(r["x"])(e.application.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.userId="",e.getUser(""),e.fetchData()}))}),30)},handlerRowRevokeUser:function(t){var e=this;setTimeout((function(){Object(r["t"])(e.application.id,t.id).then((function(t){e.$message({message:"成功",type:"success"}),e.getUser(""),e.fetchData()}))}),30)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0;var e={queryName:this.queryParam.queryName,applicationId:this.application.id,page:this.pagination.currentPage,length:this.pagination.pageSize};Object(o["d"])(e).then((function(e){t.tableData=e.body.data,t.pagination.total=e.body.totalNum,t.loading=!1}))}}},l=s,c=n("2877"),u=function(t){t.options.__source="src/components/opscloud/application/ApplicationPermissionDialog.vue"},d=u,p=Object(c["a"])(l,i,a,!1,null,null,null);"function"===typeof d&&d(p);e["a"]=p.exports},"822b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",[n("span",{directives:[{name:"show",rawName:"v-show",value:null!==t.buildTime&&""!==t.buildTime,expression:"buildTime !== null && buildTime !== ''"}],staticClass:"label"},[t._v("构建时长")]),t._v(" "+t._s(t.buildTime))]),n("div",[n("span",{staticClass:"label"},[t._v("开始时间")]),t._v(" "+t._s(t.startTime))]),n("div",[n("span",{directives:[{name:"show",rawName:"v-show",value:null!==t.endTime&&""!==t.endTime,expression:"endTime !== null && endTime !== ''"}],staticClass:"label"},[t._v("结束时间")]),t._v(" "+t._s(t.endTime))])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"构建时间",placement:"top-start"}},[n("i",{staticClass:"el-icon-time",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},a=[],o={name:"BuildTimes",data:function(){return{}},props:["buildTime","startTime","endTime"],filters:{},mounted:function(){},methods:{}},r=o,s=(n("4205"),n("2877")),l=function(t){t.options.__source="src/components/opscloud/build/summary/BuildTimes.vue"},c=l,u=Object(s["a"])(r,i,a,!1,null,null,null);"function"===typeof c&&c(u);e["a"]=u.exports},8474:function(t,e,n){"use strict";var i=n("ac3e"),a=n.n(i);a.a},8513:function(t,e,n){},"877f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.artifacts&&t.artifacts.length>0,expression:"artifacts !== null && artifacts.length > 0"}],staticClass:"tag-group"},t._l(t.artifacts,(function(e){return n("div",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.ossUrl,placement:"top-start"}},[n("b",{staticClass:"label"},[t._v(t._s(e.artifactFileName))])]),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"文件大小",placement:"top-start"}},[n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.artifactFileSize))])])],1)})),0),n("span",{directives:[{name:"show",rawName:"v-show",value:null===t.artifacts||0===t.artifacts.length,expression:"artifacts === null || artifacts.length === 0"}]},[t._v("No Artifacts")])]),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"产出物",placement:"top-start"}},[n("i",{staticClass:"el-icon-folder",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},a=[],o={name:"BuildArtifacts",data:function(){return{}},props:["artifacts"],filters:{},mounted:function(){},methods:{}},r=o,s=(n("3452"),n("2877")),l=function(t){t.options.__source="src/components/opscloud/build/summary/BuildArtifacts.vue"},c=l,u=Object(s["a"])(r,i,a,!1,null,"6132f5ca",null);"function"===typeof c&&c(u);e["a"]=u.exports},"883b":function(t,e,n){var i=n("f3cc"),a=n("e3a0");(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8956:function(t,e,n){"use strict";var i=n("f2a8"),a=n.n(i);a.a},"8a7d":function(t,e,n){"use strict";var i=n("8f76"),a=n.n(i);a.a},"8b49":function(t,e,n){"use strict";var i=n("f2df"),a=n("b388"),o=n("618e"),r=n("11fa"),s=n("d885"),l=n("0663"),c=n("9da3"),u=n("447f"),d=n("5dd2"),p=n("ac6d"),f=d("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),b=u("species"),h=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var n,i,u,d=l(this),p=s(d.length),f=r(t,p),m=r(void 0===e?p:e,p);if(o(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?a(n)&&(n=n[b],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,f,m);for(i=new(void 0===n?Array:n)(g(m-f,0)),u=0;f<m;f++,u++)f in d&&c(i,u,d[f]);return i.length=u,i}})},"8b7e":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return s}));var i=n("9bd2"),a="/gitlab/project";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}function s(t){return Object(i["a"])({url:a+"/sync?instanceId="+t,method:"get"})}},"8f76":function(t,e,n){},"8fbf":function(t,e,n){var i=n("f2df"),a=n("2f86"),o=n("0663"),r=n("bc00").f,s=n("2164"),l=a((function(){r(1)})),c=!s||l;i({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return r(o(t),e)}})},9142:function(t,e,n){var i=n("ffb7"),a=n("1a97"),o=function(t){return function(e,n){var o,r,s=String(a(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?t?s.charAt(l):o:t?s.slice(l,l+2):r-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"915c":function(t,e,n){"use strict";var i=n("da3c"),a=n("a259");t.exports=i?{}.toString:function(){return"[object "+a(this)+"]"}},"915f":function(t,e,n){var i=n("2164"),a=n("2f86"),o=n("34e1");t.exports=!i&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"95d0":function(t,e,n){var i=n("0663"),a=n("7fb6").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(e){return r.slice()}};t.exports.f=function(t){return r&&"[object Window]"==o.call(t)?s(t):a(i(t))}},9688:function(t,e,n){var i=n("b388");t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},"97ca":function(t,e,n){},"9c4d":function(t,e,n){"use strict";var i=n("bdbd"),a=n.n(i);a.a},"9d0d":function(t,e,n){var i,a=n("9688"),o=n("051c"),r=n("9db1"),s=n("3fb9"),l=n("c601"),c=n("34e1"),u=n("3ec4"),d=">",p="<",f="prototype",m="script",b=u("IE_PROTO"),h=function(){},g=function(t){return p+m+d+t+p+"/"+m+d},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){var t,e=c("iframe"),n="java"+m+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},x=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}x=i?v(i):y();var t=r.length;while(t--)delete x[f][r[t]];return x()};s[b]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h[f]=a(t),n=new h,h[f]=null,n[b]=t):n=x(),void 0===e?n:o(n,e)}},"9da3":function(t,e,n){"use strict";var i=n("ef20"),a=n("0925"),o=n("d587");t.exports=function(t,e,n){var r=i(e);r in t?a.f(t,r,o(0,n)):t[r]=n}},"9db1":function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"9fbf":function(t,e,n){},"9ffc":function(t,e,n){"use strict";var i=n("c373"),a=n.n(i);a.a},a00b:function(t,e,n){},a225:function(t,e,n){},a259:function(t,e,n){var i=n("da3c"),a=n("257f"),o=n("447f"),r=o("toStringTag"),s="Arguments"==a(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=i?a:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=Object(t),r))?n:s?a(e):"Object"==(i=a(e))&&"function"==typeof e.callee?"Arguments":i}},a635:function(t,e,n){var i=n("0925").f,a=n("b598"),o=n("447f"),r=o("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},a92b:function(t,e,n){"use strict";var i=n("8513"),a=n.n(i);a.a},a96e:function(t,e,n){var i=n("0663"),a=n("d885"),o=n("11fa"),r=function(t){return function(e,n,r){var s,l=i(e),c=a(l.length),u=o(r,c);if(t&&n!=n){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:r(!0),indexOf:r(!1)}},a9b0:function(t,e,n){"use strict";var i=n("3ba7"),a=n.n(i);a.a},ac3e:function(t,e,n){},ac6d:function(t,e,n){var i=n("2164"),a=n("2f86"),o=n("b598"),r=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:l,d=o(e,1)?e[1]:void 0;return s[t]=!!n&&!a((function(){if(c&&!i)return!0;var t={length:-1};c?r(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,u,d)}))}},adc0:function(t,e,n){"use strict";var i=n("7acb"),a=n.n(i);a.a},adf7:function(t,e,n){"use strict";var i=n("a00b"),a=n.n(i);a.a},ae0d:function(t,e,n){var i=n("e3a0"),a=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return a.call(t)}),t.exports=i.inspectSource},b1c9:function(t,e,n){"use strict";var i=n("f8b1"),a=n.n(i);a.a},b1d5:function(t,e,n){var i=n("b388");t.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},b255:function(t,e,n){},b33e:function(t,e){t.exports={}},b388:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},b3eb:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.formStatus.operationType?t.formStatus.addTitle:t.formStatus.updateTitle,visible:t.formStatus.visible},on:{"update:visible":function(e){return t.$set(t.formStatus,"visible",e)}}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"应用配置",name:"application"}},[n("el-form",{attrs:{model:t.application}},[n("el-form-item",{attrs:{label:"应用名称","label-width":t.labelWidth,required:!0}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),n("el-form-item",{attrs:{label:"应用key","label-width":t.labelWidth,required:!0}},[n("el-input",{attrs:{placeholder:"请输入内容",disabled:!t.formStatus.operationType},model:{value:t.application.applicationKey,callback:function(e){t.$set(t.application,"applicationKey",e)},expression:"application.applicationKey"}},[n("template",{slot:"append"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerBuildKey}},[n("i",{staticClass:"fa fa-arrow-up",attrs:{"aria-hidden":"true"}})])],1)],2)],1),n("el-form-item",{attrs:{label:"GitFlow","label-width":t.labelWidth}},[n("el-checkbox",{model:{value:t.application.enableGitflow,callback:function(e){t.$set(t.application,"enableGitflow",e)},expression:"application.enableGitflow"}},[t._v("启用")])],1),n("el-form-item",{attrs:{label:"描述","label-width":t.labelWidth}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.application.comment,callback:function(e){t.$set(t.application,"comment",e)},expression:"application.comment"}})],1)],1)],1),""!==t.application.id?n("el-tab-pane",{attrs:{label:"SCM配置",name:"scm"}},[n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[n("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"搜索实例","remote-method":t.getGitlabInstance},on:{change:t.handlerSelGitlabInstance},model:{value:t.queryGitlabParam.instanceId,callback:function(e){t.$set(t.queryGitlabParam,"instanceId",e)},expression:"queryGitlabParam.instanceId"}},t._l(t.gitlabInstanceOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),n("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"",disabled:""===t.queryGitlabParam.instanceId,remote:"","reserve-keyword":"",placeholder:"搜索项目","remote-method":t.getProject},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.projectOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[n("span",{staticStyle:{float:"left","margin-right":"15px"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.sshUrl))])])})),1),n("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.projectId},on:{click:t.handlerScmMemberAdd}},[t._v("添加")])],1),n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.scmMemberLoading,expression:"scmMemberLoading"}],staticStyle:{width:"100%"},attrs:{data:t.scmMembers}},[n("el-table-column",{attrs:{prop:"scmType",label:"SCM类型",width:"100"}}),n("el-table-column",{attrs:{prop:"scmSshUrl",label:"sshUrl",width:"300"}}),n("el-table-column",{attrs:{prop:"tags",label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"tag-group"},t._l(e.row.tags,(function(e){return n("span",{key:e.id},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.comment,placement:"top-start"}},[n("el-tag",{staticStyle:{"margin-left":"5px"},style:{color:e.color}},[t._v(t._s(e.tagKey))])],1)],1)})),0)]}}],null,!1,726257749)}),n("el-table-column",{attrs:{prop:"comment",label:"描述"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerScmMemberRowRemove(e.row)}}},[t._v("移除")])]}}],null,!1,1935080429)})],1)],1)],1):t._e(),""!==t.application.id?n("el-tab-pane",{attrs:{label:"服务器组(可选)",name:"serverGroup"}},[n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[n("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"","reserve-keyword":""},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},t._l(t.sourceTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"","value-key":"id",remote:"","reserve-keyword":"",placeholder:"搜索服务器组","remote-method":t.getServerGroup},model:{value:t.serverGroup,callback:function(e){t.serverGroup=e},expression:"serverGroup"}},t._l(t.serverGroupOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e}},[n("span",{staticStyle:{float:"left","margin-right":"15px"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.comment))])])})),1),n("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.serverGroup},on:{click:t.handlerServerGroupAdd}},[t._v("添加 ")])],1),n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.applicationServerGroupLoading,expression:"applicationServerGroupLoading"}],staticStyle:{width:"100%"},attrs:{data:t.serverGroups}},[n("el-table-column",{attrs:{prop:"source",label:"数据源",width:"100"}}),n("el-table-column",{attrs:{prop:"serverGroupName",label:"服务器组名称",width:"300"}}),n("el-table-column",{attrs:{prop:"comment",label:"描述"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerServerGroupRowRemove(e.row)}}},[t._v("移除 ")])]}}],null,!1,142187386)})],1)],1)],1):t._e(),""!==t.application.id?n("el-tab-pane",{attrs:{label:"工作引擎",name:"engine"}},[n("el-row",{staticStyle:{"margin-bottom":"5px","margin-left":"0px"},attrs:{gutter:24}},[n("el-select",{staticClass:"select",attrs:{clearable:"",placeholder:"引擎类型"},on:{change:t.handlerSelEngineType},model:{value:t.application.engineType,callback:function(e){t.$set(t.application,"engineType",e)},expression:"application.engineType"}},t._l(t.engineTypeOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-select",{directives:[{name:"show",rawName:"v-show",value:1===t.application.engineType,expression:"application.engineType === 1"}],staticClass:"select",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"搜索实例","remote-method":t.getJenkinsInstance},model:{value:t.jenkinsInstanceId,callback:function(e){t.jenkinsInstanceId=e},expression:"jenkinsInstanceId"}},t._l(t.jenkinsInstanceOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),n("el-button",{attrs:{size:"mini",type:"primary",disabled:""===t.jenkinsInstanceId},on:{click:t.handlerEngineAdd}},[t._v("添加 ")])],1),n("el-row",{directives:[{name:"show",rawName:"v-show",value:1===t.application.engineType,expression:"application.engineType === 1"}],staticStyle:{"margin-bottom":"5px","margin-left":"5px"},attrs:{gutter:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.engineLoading,expression:"engineLoading"}],attrs:{data:t.engines}},[n("el-table-column",{attrs:{prop:"instance",label:"实例名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.instance.name))])]}}],null,!1,593344902)}),n("el-table-column",{attrs:{prop:"instance",label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.instance.comment))])]}}],null,!1,2974055794)}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){return t.handlerEngineRowRemove(e.row)}}},[t._v("移除")])]}}],null,!1,1805247854)})],1)],1)],1):t._e()],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formStatus.visible=!1}}},[t._v("取消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlerSave}},[t._v("确定")])],1)],1)},a=[],o=(n("b0c0"),n("e68b")),r=n("8b7e"),s=n("7d80"),l=n("65ce"),c=[{value:0,label:"所有引擎"},{value:1,label:"指定引擎"}],u=[{value:"LOCAL",label:"本地数据源"},{value:"OPSCLOUD",label:"OPSCLOUD"}],d={data:function(){return{activeName:"application",application:{},labelWidth:"150px",options:{stripe:!0},serverLoading:!1,serverOptions:[],scmMembers:[],scmMemberLoading:!1,gitlabInstanceOptions:[],queryGitlabParam:{instanceId:"",queryName:""},projectId:"",projectOptions:[],queryJenkinsParam:{queryName:""},sourceType:"OPSCLOUD",sourceTypeOptions:u,serverGroup:"",serverGroupOptions:[],applicationServerGroupLoading:!1,serverGroups:[],jenkinsInstanceId:"",engineLoading:!1,engines:[],engineTypeOptions:c,jenkinsInstanceOptions:[]}},name:"ApplicationDialog",props:["formStatus"],components:{},mounted:function(){},methods:{initData:function(t){this.application=t,""!==t.id&&(this.getScmMember(),this.getGitlabInstance(""),1===this.application.engineType&&this.getEngine(),null!==t.serverGroups&&t.serverGroups.length>0&&(this.serverGroups=t.serverGroups))},handleClick:function(){this.$emit("input",!this.value)},getServerGroup:function(t){var e=this,n={source:this.sourceType,name:t,grpType:"",page:1,length:10};Object(l["p"])(n).then((function(t){e.serverGroupOptions=t.body.data}))},getEngine:function(){var t=this;0===this.application.engineType?this.engines=[]:(this.engineLoading=!0,Object(l["i"])(this.application.id).then((function(e){e.success?t.engines=e.body:t.$message.error(e.msg),t.engineLoading=!1})))},getScmMember:function(){var t=this;this.scmMemberLoading=!0,Object(l["k"])(this.application.id).then((function(e){e.success?t.scmMembers=e.body:t.$message.error(e.msg),t.scmMemberLoading=!1}))},getApplicationServerGroup:function(){var t=this;this.applicationServerGroupLoading=!0,Object(l["n"])(this.application.id).then((function(e){e.success?t.serverGroups=e.body:t.$message.error(e.msg),t.applicationServerGroupLoading=!1}))},getJenkinsInstance:function(t){var e=this;this.loading=!0;var n={queryName:t,extend:1,page:1,length:10};Object(s["c"])(n).then((function(t){e.jenkinsInstanceOptions=t.body.data}))},getGitlabInstance:function(t){var e=this,n={queryName:t,extend:0,page:1,length:10};Object(o["c"])(n).then((function(t){e.gitlabInstanceOptions=t.body.data}))},handlerSelGitlabInstance:function(){this.getProject("")},getProject:function(t){var e=this,n={instanceId:this.queryGitlabParam.instanceId,queryName:t,extend:1,page:1,length:10};Object(r["b"])(n).then((function(t){e.projectOptions=t.body.data}))},handlerBuildKey:function(){this.application.applicationKey=this.application.name.toUpperCase()},handlerSelEngineType:function(){1===this.application.engineType&&this.getJenkinsInstance("")},handlerEngineAdd:function(){var t=this;Object(l["b"])(this.application.id,this.jenkinsInstanceId).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.jenkinsInstanceId="",t.getEngine()):t.$message.error(e.msg)}))},handlerServerGroupAdd:function(){var t=this,e={id:"",applicationId:this.application.id,serverGroupName:this.serverGroup.name,serverGroupId:this.serverGroup.id,comment:this.serverGroup.comment,source:this.sourceType};Object(l["d"])(e).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.serverGroup="",t.getApplicationServerGroup()):t.$message.error(e.msg)}))},handlerScmMemberAdd:function(){var t=this;Object(l["c"])(this.application.id,this.projectId).then((function(e){e.success?(t.$message({message:"成功",type:"success"}),t.projectId="",t.getScmMember()):t.$message.error(e.msg)}))},handlerEngineRowRemove:function(t){var e=this;Object(l["q"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getEngine()}))},handlerScmMemberRowRemove:function(t){var e=this;Object(l["r"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getScmMember()}))},handlerServerGroupRowRemove:function(t){var e=this;Object(l["s"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getApplicationServerGroup()}))},handlerSave:function(){var t=this;setTimeout((function(){var e=Object.assign({},t.application);t.formStatus.operationType?Object(l["a"])(e).then((function(e){t.$message({message:"成功",type:"success"}),t.formStatus.visible=!1,t.$emit("closeDialog")})):Object(l["v"])(e).then((function(e){t.$message({message:"成功",type:"success"}),t.formStatus.visible=!1,t.$emit("closeDialog")}))}),600)}}},p=d,f=(n("c318"),n("2877")),m=function(t){t.options.__source="src/components/opscloud/application/ApplicationDialog.vue"},b=m,h=Object(f["a"])(p,i,a,!1,null,null,null);"function"===typeof b&&b(h);e["a"]=h.exports},b461:function(t,e,n){var i=n("ee04"),a=n("b598"),o=n("c920"),r=n("0925").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});a(e,t)||r(e,t,{value:o.f(t)})}},b598:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},b671:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+i).toString(36)}},b7ae:function(t,e,n){var i=n("da3c"),a=n("bf6f"),o=n("915c");i||a(Object.prototype,"toString",o,{unsafe:!0})},b852:function(t,e,n){"use strict";var i=n("269b"),a=n.n(i);a.a},ba0a:function(t,e,n){var i=n("ee04"),a=n("dc26"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t])||o(a[t]):i[t]&&i[t][e]||a[t]&&a[t][e]}},bab5:function(t,e,n){var i=n("ba0a");t.exports=i("navigator","userAgent")||""},bb1b:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},bb63:function(t,e,n){"use strict";var i=n("2d6d"),a=n.n(i);a.a},bc00:function(t,e,n){var i=n("2164"),a=n("30bc"),o=n("d587"),r=n("0663"),s=n("ef20"),l=n("b598"),c=n("915f"),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=r(t),e=s(e,!0),c)try{return u(t,e)}catch(n){}if(l(t,e))return o(!a.f.call(t,e),t[e])}},bcc8:function(t,e,n){"use strict";var i=n("2f86");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},bdbd:function(t,e,n){},bf6f:function(t,e,n){var i=n("dc26"),a=n("0f0e"),o=n("b598"),r=n("784e"),s=n("ae0d"),l=n("5eba"),c=l.get,u=l.enforce,d=String(String).split("String");(t.exports=function(t,e,n,s){var l=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||a(n,"name",e),u(n).source=d.join("string"==typeof e?e:"")),t!==i?(l?!p&&t[e]&&(c=!0):delete t[e],c?t[e]=n:a(t,e,n)):c?t[e]=n:r(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},c318:function(t,e,n){"use strict";var i=n("5672"),a=n.n(i);a.a},c373:function(t,e,n){},c496:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return s}));var i=n("9bd2");function a(t,e,n,a){return Object(i["a"])({url:"/env/page/query?envName="+t+"&envType="+e+"&page="+n+"&length="+a,method:"get"})}function o(t){return Object(i["a"])({url:"/env/add",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/env/del?id="+t,method:"delete"})}function s(t){return Object(i["a"])({url:"/env/update",method:"put",data:t})}},c601:function(t,e,n){var i=n("ba0a");t.exports=i("document","documentElement")},c6b7:function(t,e,n){"use strict";var i=n("5406").forEach,a=n("bcc8"),o=n("ac6d"),r=a("forEach"),s=o("forEach");t.exports=r&&s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},c835:function(t,e,n){},c8b6:function(t,e,n){var i=n("f526"),a=n("9db1");t.exports=Object.keys||function(t){return i(t,a)}},c920:function(t,e,n){var i=n("447f");e.f=i},cbcc:function(t,e,n){var i=n("4622");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,a){return t.call(e,n,i,a)}}return function(){return t.apply(e,arguments)}}},cd2a:function(t,e,n){},d2ac:function(t,e,n){},d587:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},d7b1:function(t,e,n){var i=n("2f86");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},d885:function(t,e,n){var i=n("ffb7"),a=Math.min;t.exports=function(t){return t>0?a(i(t),9007199254740991):0}},da3c:function(t,e,n){var i=n("447f"),a=i("toStringTag"),o={};o[a]="z",t.exports="[object z]"===String(o)},dc26:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dee4:function(t,e,n){var i=n("b598"),a=n("2a62"),o=n("3ec4"),r=n("6912"),s=o("IE_PROTO"),l=Object.prototype;t.exports=r?Object.getPrototypeOf:function(t){return t=a(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},df79:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n("9bd2"),a="/aliyun/oss/bucket";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(){return Object(i["a"])({url:a+"/sync",method:"put"})}function s(t){return Object(i["a"])({url:a+"/active/set?id="+t,method:"put"})}function l(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}},e3a0:function(t,e,n){var i=n("dc26"),a=n("784e"),o="__core-js_shared__",r=i[o]||a(o,{});t.exports=r},e3bc:function(t,e,n){"use strict";var i=n("9142").charAt,a=n("5eba"),o=n("2c76"),r="String Iterator",s=a.set,l=a.getterFor(r);o(String,"String",(function(t){s(this,{type:r,string:String(t),index:0})}),(function(){var t,e=l(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=i(n,a),e.index+=t.length,{value:t,done:!1})}))},e428:function(t,e,n){"use strict";var i=n("f2df"),a=n("79df"),o=n("0663"),r=n("bcc8"),s=[].join,l=a!=Object,c=r("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},e5e4:function(t,e,n){"use strict";var i=n("f2df"),a=n("dc26"),o=n("ba0a"),r=n("f3cc"),s=n("2164"),l=n("d7b1"),c=n("e8b2"),u=n("2f86"),d=n("b598"),p=n("618e"),f=n("b388"),m=n("9688"),b=n("2a62"),h=n("0663"),g=n("ef20"),v=n("d587"),y=n("9d0d"),x=n("c8b6"),w=n("7fb6"),S=n("95d0"),k=n("2bae"),_=n("bc00"),O=n("0925"),T=n("30bc"),j=n("0f0e"),D=n("bf6f"),C=n("883b"),J=n("3ec4"),P=n("3fb9"),I=n("b671"),N=n("447f"),B=n("c920"),E=n("b461"),L=n("a635"),A=n("5eba"),M=n("5406").forEach,R=J("hidden"),$="Symbol",z="prototype",q=N("toPrimitive"),W=A.set,U=A.getterFor($),G=Object[z],F=a.Symbol,H=o("JSON","stringify"),V=_.f,X=O.f,K=S.f,Y=T.f,Q=C("symbols"),Z=C("op-symbols"),tt=C("string-to-symbol-registry"),et=C("symbol-to-string-registry"),nt=C("wks"),it=a.QObject,at=!it||!it[z]||!it[z].findChild,ot=s&&u((function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=V(G,e);i&&delete G[e],X(t,e,n),i&&t!==G&&X(G,e,i)}:X,rt=function(t,e){var n=Q[t]=y(F[z]);return W(n,{type:$,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof F},lt=function(t,e,n){t===G&&lt(Z,e,n),m(t);var i=g(e,!0);return m(n),d(Q,i)?(n.enumerable?(d(t,R)&&t[R][i]&&(t[R][i]=!1),n=y(n,{enumerable:v(0,!1)})):(d(t,R)||X(t,R,v(1,{})),t[R][i]=!0),ot(t,i,n)):X(t,i,n)},ct=function(t,e){m(t);var n=h(e),i=x(n).concat(mt(n));return M(i,(function(e){s&&!dt.call(n,e)||lt(t,e,n[e])})),t},ut=function(t,e){return void 0===e?y(t):ct(y(t),e)},dt=function(t){var e=g(t,!0),n=Y.call(this,e);return!(this===G&&d(Q,e)&&!d(Z,e))&&(!(n||!d(this,e)||!d(Q,e)||d(this,R)&&this[R][e])||n)},pt=function(t,e){var n=h(t),i=g(e,!0);if(n!==G||!d(Q,i)||d(Z,i)){var a=V(n,i);return!a||!d(Q,i)||d(n,R)&&n[R][i]||(a.enumerable=!0),a}},ft=function(t){var e=K(h(t)),n=[];return M(e,(function(t){d(Q,t)||d(P,t)||n.push(t)})),n},mt=function(t){var e=t===G,n=K(e?Z:h(t)),i=[];return M(n,(function(t){!d(Q,t)||e&&!d(G,t)||i.push(Q[t])})),i};if(l||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),n=function(t){this===G&&n.call(Z,t),d(this,R)&&d(this[R],e)&&(this[R][e]=!1),ot(this,e,v(1,t))};return s&&at&&ot(G,e,{configurable:!0,set:n}),rt(e,t)},D(F[z],"toString",(function(){return U(this).tag})),D(F,"withoutSetter",(function(t){return rt(I(t),t)})),T.f=dt,O.f=lt,_.f=pt,w.f=S.f=ft,k.f=mt,B.f=function(t){return rt(N(t),t)},s&&(X(F[z],"description",{configurable:!0,get:function(){return U(this).description}}),r||D(G,"propertyIsEnumerable",dt,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:F}),M(x(nt),(function(t){E(t)})),i({target:$,stat:!0,forced:!l},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var n=F(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!s},{create:ut,defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:pt}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ft,getOwnPropertySymbols:mt}),i({target:"Object",stat:!0,forced:u((function(){k.f(1)}))},{getOwnPropertySymbols:function(t){return k.f(b(t))}}),H){var bt=!l||u((function(){var t=F();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));i({target:"JSON",stat:!0,forced:bt},{stringify:function(t,e,n){var i,a=[t],o=1;while(arguments.length>o)a.push(arguments[o++]);if(i=e,(f(e)||void 0!==t)&&!st(t))return p(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!st(e))return e}),a[1]=e,H.apply(null,a)}})}F[z][q]||j(F[z],q,F[z].valueOf),L(F,$),P[R]=!0},e68b:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return l}));var i=n("9bd2"),a="/gitlab/instance";function o(t){return Object(i["a"])({url:a+"/page/query",method:"post",data:t})}function r(t){return Object(i["a"])({url:a+"/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:a+"/update",method:"put",data:t})}function l(t){return Object(i["a"])({url:a+"/del?id="+t,method:"delete"})}},e6e5:function(t,e,n){"use strict";var i=n("ed0f"),a=n.n(i);a.a},e8b2:function(t,e,n){var i=n("d7b1");t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},ec44:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.user.email,placement:"top-start"}},[n("b",{staticClass:"label"},[t._v(t._s(t.user.displayName))])]),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.ago))])],1),n("el-col",{attrs:{span:2}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"执行人",placement:"top-start"}},[n("i",{staticClass:"el-icon-user",attrs:{"aria-hidden":"true"}})])],1)],1),n("el-row",[n("el-divider")],1)],1)},a=[],o={name:"BuildOperation",data:function(){return{}},props:["user","ago"],filters:{},mounted:function(){},methods:{}},r=o,s=(n("1219"),n("2877")),l=function(t){t.options.__source="src/components/opscloud/build/summary/BuildUser.vue"},c=l,u=Object(s["a"])(r,i,a,!1,null,"6a7f126a",null);"function"===typeof c&&c(u);e["a"]=u.exports},ec5e:function(t,e){ace.define("ace/snippets/yaml",["require","exports","module"],(function(t,e,n){"use strict";e.snippetText=void 0,e.scope="yaml"}))},ed0f:function(t,e,n){},ed60:function(t,e,n){var i=n("b461");i("iterator")},eda6:function(t,e,n){var i=n("dc26"),a=n("5e32"),o=n("0eec"),r=n("0f0e"),s=n("447f"),l=s("iterator"),c=s("toStringTag"),u=o.values;for(var d in a){var p=i[d],f=p&&p.prototype;if(f){if(f[l]!==u)try{r(f,l,u)}catch(b){f[l]=u}if(f[c]||r(f,c,d),a[d])for(var m in o)if(f[m]!==o[m])try{r(f,m,o[m])}catch(b){f[m]=o[m]}}}},ee04:function(t,e,n){var i=n("dc26");t.exports=i},ee33:function(t,e,n){var i=n("2164"),a=n("0925").f,o=Function.prototype,r=o.toString,s=/^\s*function ([^ (]*)/,l="name";!i||l in o||a(o,l,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},ef20:function(t,e,n){var i=n("b388");t.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},f2a8:function(t,e,n){},f2df:function(t,e,n){var i=n("dc26"),a=n("bc00").f,o=n("0f0e"),r=n("bf6f"),s=n("784e"),l=n("56a1"),c=n("3407");t.exports=function(t,e){var n,u,d,p,f,m,b=t.target,h=t.global,g=t.stat;if(u=h?i:g?i[b]||s(b,{}):(i[b]||{}).prototype,u)for(d in e){if(f=e[d],t.noTargetGet?(m=a(u,d),p=m&&m.value):p=u[d],n=c(h?d:b+(g?".":"#")+d,t.forced),!n&&void 0!==p){if(typeof f===typeof p)continue;l(f,p)}(t.sham||p&&p.sham)&&o(f,"sham",!0),r(u,d,f,t)}}},f3cc:function(t,e){t.exports=!1},f43e:function(t,e,n){},f526:function(t,e,n){var i=n("b598"),a=n("0663"),o=n("a96e").indexOf,r=n("3fb9");t.exports=function(t,e){var n,s=a(t),l=0,c=[];for(n in s)!i(r,n)&&i(s,n)&&c.push(n);while(e.length>l)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},f825:function(t,e,n){var i=n("ba0a"),a=n("7fb6"),o=n("2bae"),r=n("9688");t.exports=i("Reflect","ownKeys")||function(t){var e=a.f(r(t)),n=o.f;return n?e.concat(n(t)):e}},f8b1:function(t,e,n){},ff18:function(t,e,n){var i=n("f2df"),a=n("2a62"),o=n("c8b6"),r=n("2f86"),s=r((function(){o(1)}));i({target:"Object",stat:!0,forced:s},{keys:function(t){return o(a(t))}})},ffb7:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}}}]);